{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/marked/lib/marked.js","src/handlers/base.ts","src/handlers/download.ts","src/handlers/env.ts","src/handlers/input.ts","src/handlers/output.ts","src/handlers/pin.ts","src/handlers/popup.ts","src/handlers/script.ts","src/handlers/toast.ts","src/i18n.ts","src/main.ts","src/models/datatable.ts","src/models/input/actions.ts","src/models/input/base.ts","src/models/input/checkbox_radio.ts","src/models/input/file.ts","src/models/input/index.ts","src/models/input/input.ts","src/models/input/select.ts","src/models/input/slider.ts","src/models/input/textarea.ts","src/models/output.ts","src/models/pin.ts","src/session.ts","src/state.ts","src/ui.ts","src/utils.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","global","factory","this","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_arrayLikeToArray","arr","len","arr2","Array","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","isArray","minLen","prototype","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","done","value","TypeError","next","bind","defaults","fn","createCommonjsModule","getDefaults","baseUrl","breaks","gfm","headerIds","headerPrefix","highlight","langPrefix","mangle","pedantic","renderer","sanitize","sanitizer","silent","smartLists","smartypants","tokenizer","walkTokens","xhtml","changeDefaults","newDefaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","&","<",">","\"","'","getEscapeReplacement","ch","unescapeTest","unescape","html","replace","_","toLowerCase","charAt","String","fromCharCode","parseInt","substring","caret","nonWordAndColonTest","originIndependentUrl","baseUrls","justDomain","protocol","domain","resolveUrl","base","href","rtrim","relativeBase","indexOf","str","invert","l","suffLen","currChar","substr","helpers","encode","regex","opt","source","obj","val","getRegex","RegExp","prot","decodeURIComponent","encodeURI","exec","arguments","hasOwnProperty","tableRow","count","cells","match","offset","escaped","curr","split","splice","push","trim","b","level","console","warn","pattern","result","defaults$1","rtrim$1","splitCells$1","_escape","findClosingBracket$1","outputLink","cap","link","raw","title","text","type","Tokenizer_1","Tokenizer","options","_proto","space","src","rules","block","newline","tokens","lastToken","trimRight","codeBlockStyle","fences","matchIndentToCode","indentToCode","map","node","matchIndentInNode","join","indentCodeCompensation","lang","heading","trimmed","depth","nptable","item","header","align","hr","blockquote","list","bcurr","bnext","addBack","loose","istask","ischecked","bull","isordered","ordered","start","items","itemMatch","listItemStart","undefined","task","checked","pre","def","tag","table","lheading","paragraph","escape","inline","inLink","inRawBlock","trimmedUrl","rtrimSlash","lastParenIndex","linkLen","_escapes","reflink","links","nolink","strong","maskedSrc","prevChar","punctuation","endReg","endAst","endUnd","lastIndex","middle","index","em","codespan","hasNonSpaceChars","hasSpaceCharsOnBothEnds","br","del","autolink","url","prevCapZero","_backpedal","inlineText","noopTest$1","edit$1","merge$1","_paragraph","_label","_title","bullet","_tag","_comment","normal","reflinkSearch","_punctuation","_blockSkip","_overlapSkip","blockSkip","overlapSkip","_scheme","_email","_attribute","_href","_extended_email","defaults$2","block$1","inline$1","repeatString$1","out","charCodeAt","Math","random","Lexer_1","Lexer","create","lex","lexInline","inlineTokens","Constructor","protoProps","staticProps","blockTokens","top","token","errMsg","error","j","k","l2","row","keepPrevChar","keys","includes","lastIndexOf","get","defaults$3","cleanUrl$1","escape$1","Renderer_1","Renderer","_code","infostring","quote","_html","slugger","slug","body","listitem","checkbox","tablerow","content","tablecell","flags","image","_text","TextRenderer_1","TextRenderer","Slugger_1","Slugger","seen","serialize","getNextSafeSlug","originalSlug","isDryRun","occurenceAccumulator","dryrun","defaults$4","unescape$1","Parser_1","Parser","textRenderer","parse","parseInline","l3","cell","itemBody","unshift","merge$2","checkSanitizeDeprecation$1","escape$2","defaults$5","marked","callback","err","pending","setTimeout","_tokens","message","setOptions","use","extension","opts","_loop","prop","prevRenderer","_len","args","_key","ret","apply","_loop2","prevTokenizer","_len2","_key2","_step","_iterator","_step2","_iterator2","_step3","_iterator3","_step4","_iterator4","_cell","parser","lexer","define","amd","globalThis","self","SessionCtrlHandler","session","_classCallCheck","accept_command","msg","command","close_session","webio_session_id","spec","CommandDispatcher","command2handler","handlers","_iteratorNormalCompletion","_didIteratorError","_iteratorError","h","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","cmd","return","handle_message","utils_1","DownloadHandler","blob","b64toBlob","saveAs","session_1","state_1","EnvSettingHandler","document","auto_scroll_bottom","state","AutoScrollBottom","output_animation","config","outputAnimation","classList","remove","add","http_pull_interval","CurrentSession","HttpSession","change_pull_interval","input_panel_min_height","InputPanelMinHeight","input_panel_init_height","InputPanelInitHeight","input_panel_fixed","FixedInputPanel","input_auto_focus","AutoFocusOnInput","output_max_width","$","css","input_1","ui_1","i18n_1","InputHandler","container_elem","form_ctrls","LRUMap","curr_card","style","height","width","show_input","old_ctrls","get_top","after_show","focus","task_id","old_ctrl","_this","ctrls","get_value","ctrl","element","show","ShowDuration","_after_show_form","move_to_top","hide","_this2","target_ctrls","make_set","FormController","append","create_element","after_add_to_dom","_activate_form","dispatch_ctrl_message","deleted","pop","close_input","name2input","show_count","_this3","tpl","that","Mustache","render","label","cancelable","find","on","send_message","event","data","inputs","buttons","idx","input_spec","input_items","item_class","input_item","event_name","on_reset","preventDefault","check_valid","error_alert","input_names","input_values","each","on_process","loaded","total","make_progress","Promise","all","then","values","input_data","files","multiple","forEach","file","serialize_file","send_buffer","Blob","serialize_json","concat","elem","bar","progress","toFixed","attr","target_name","update_input","cls","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","accept_input_types","all_input_items","_iteratorNormalCompletion4","register_inputitem","output_1","DISPLAY_NONE_TAGS","after_show_callbacks","trigger_output_widget_show_event","cb","AfterCurrentOutputWidgetShow","OutputHandler","container_parent","parent","body_scroll_to","tagName","output_to_root","getWidgetElement","JSON","stringify","scope","is_elem_visible","position","prepend","con","pos","children","eq","insertBefore","insertAfter","wrap","createElement","fadeIn","complete","scroll_bottom","handle_output_ctl","set_scope","container","old","if_exist","empty","scope_css","min-height","prev","getBoundingClientRect","bottom","margin-top","margin-bottom","clear","clear_before","prevAll","clear_after","scroll_to","clear_range","removed","valid","id","pin_1","PinHandler","GetPinValue","send_msg","submit","IsFileInput","PinUpdate","attributes","WaitChange","names","timeout","resolve","change_info","catch","PinChangeCallback","callback_id","is_file","_msg$data$value","toast","Toastify","duration","gravity","backgroundColor","showToast","_toConsumableArray","toastElement","innerText","hideToast","output_2","PopupHandler","current_elem","modal","get_element","closable","implicit_close","render_tpl","assign","large","size","small","ScriptHandler","script","arg_names","arg_vals","res","Function","log","eval","ToastHandler","close","color","stopOnFocus","onClick","userLangCode","navigator","language","userLanguage","customMessage","translations","en","disconnected_with_server","connect_fail","error_in_input","file_size_exceed","file_total_size_exceed","reset","cancel","duplicated_pin_name","browse_file","duplicated_scope_name","file_uploading","zh","ru","de","fa","uz","strfmt","fmt","p1","msgid","_arr","_i","base_1","popup_1","script_1","download_1","toast_1","env_1","window","WebIO","_state","startWebIOClient","runtime_config","addr","backend_addr","backend_address","URL","location","start_session","is_http","webio_session","output_container_elem","input_container_elem","on_session_create","on_session_close","output_ctrl","input_ctrl","popup_ctrl","session_ctrl","script_ctrl","pin_ctrl","download_ctrl","toast_ctrl","env_ctrl","dispatcher","on_server_message","dispatch_message","set_up_session","app_name","httpPullInterval","WebSocketSession","debug","is_http_backend","openApp","message_tpl","pushData","path2field","path","field2path","field","parts","flatten_row_and_extract_column","current_columns","row_data","_typeof","flatten_row","parse_js_func","object","js_func_key","__pywebio_js_function__","params","safe_run","func_name","func","gridDefaultOptions","rowMultiSelectWithClick","groupSelectsChildren","groupSelectsFiltered","enableCellTextSelection","ensureDomOrder","autoGroupColumnDef","pinned","enableCharts","enableRangeSelection","sideBar","toolPanels","labelDefault","labelKey","iconKey","toolPanel","minWidth","maxWidth","gridDefaultColDef","wrapHeaderText","autoHeaderHeight","sortable","filter","resizable","enableValue","enableRowGroup","enablePivot","defaultAggFunc","Datatable","handle_type","field_args","path_args","grid_args","auto_height","column_order","capitalizeFirstLetter","s","toUpperCase","columns","rows","path_field_args","_ref","_ref2","_slicedToArray","column_def","rowData","columnDefs","gen_columns_def","args_from_parent","path_field","extra_args","headerName","column","row_data_and_column_def","records","actions","getRowId","id_field","grid_resolve","gridPromise","reject","instance_id","gridOptions","rowSelection","multiple_select","defaultColDef","getSelectedRowIDs","selectedRows","api","getSelectedNodes","selected_row_ids","group","rid","onGridReady","param","setDomLayout","grid_elem","on_grid_show","clientWidth","ResizeObserver","entries","observer","disconnect","observe","columnApi","autoSizeAllColumns","content_width","getColumns","getColDef","getActualWidth","sizeColumnsToFit","deselectAll","btn_idx","btn","onCellFocused","getDisplayedRowAtIndex","rowIndex","cellValue","getValue","querySelector","innerHTML","cell_content_bar","onSelectionChanged","on_select","ag_version","enterprise_key","requirejs","agGrid","Grid","Actions","on_input_event","_possibleConstructorReturn","__proto__","getPrototypeOf","submit_value","btns","onchange","parents","trigger","target_value","update_input_helper","InputItem","valid_status","first_show","input_idx","attr2selector","invalid_feedback","valid_feedback","help_text","attribute","input_elem","class_name","removeClass","addClass","options_tpl","CheckboxRadio","setup_spec","setup_input_options","deep_copy","id_name_prefix","floor","onblur","selected","item_val","_spec","before","raw_val","value_arr","serializeArray","FileUpload","id_name","ignore_keys","placeholder","total_size","max_size","_formate_size","max_total_size","bsCustomFileInput","init","actions_1","checkbox_radio_1","textarea_1","file_1","select_1","slider_1","Input","Textarea","Select","Slider","get_input_item_from_type","type2item","datalist_tpl","previous_value","rectify_input","re","Number","isNaN","datalist_html","datalist","parseFloat","selectpicker","BootstrapVersion","use_bootstrap_select","native","is_mobile","setup_select_options","opts_html","range_value","code_mirror","code_mirror_config","lineNumbers","indentUnit","styleActiveLine","matchBrackets","lineWrapping","autoRefresh","extraKeys","F11","cm","setOption","getOption","Esc","required","mode","CodeMirror","modeURL","codeMirrorModeURL","origin_mode","mode_info","findModeByExtension","findModeByMIME","readonly","disabled","theme","load_codemirror_theme","setValue","fromTextArea","autoLoadMode","instance","changeObj","origin","setSize","url_tpl","codeMirrorThemeURL","cssId","getElementById","head","getElementsByTagName","rel","media","appendChild","datatable_1","Text","createTextNode","parseHtml","html_str","nodes","parseHTML","Prism","languages","ScrollableWidget","keep_bottom","stop","MutationObserver","mutations","animate","scrollTop","childList","subtree","ScopeWidget","dom_id","tip","all_widgets","DOMPurify","outline","table_data","row_id","col_id","_data","span","tdata","template","tabs","PinWidget","type2widget","w","old_style","click_callback_id","container_dom_id","container_selector","placeholder2spec","outerHTML","randomid","names2id","cnt","sub_elem","replaceWith","index_1","contains","disposable_onchange_callbacks","resident_onchange_callbacks","promises","callback_ids","register_on_change","race","input","resolve_list","trigger_onchange_event","safe_poprun_callbacks","callbacks","ws_api","_session_create_ts","_session_create_callbacks","_session_close_callbacks","_on_server_message","ws","_closed","search","set_ws_api","Date","now","WebSocket","onopen","onclose","evt","onmessage","info","onprogress","bufferedAmount","onprogressID","setInterval","clearInterval","closed","send","start_onprogress","readyState","CLOSED","CLOSING","api_url","pull_interval_ms","interval_pull_id","sender","_executed_command_msg_id","ReliableSender","_send","pull","ajax","contentType","dataType","headers","webio-session-id","success","textStatus","jqXHR","_on_request_success","startsWith","ack","msg_start_idx","seq","commands","sid","getResponseHeader","msgs","add_send_task","json","_this4","ajax_options","some","cache","processData","xhr","XMLHttpRequest","upload","addEventListener","lengthComputable","always","new_interval","_this5","fail","has_input","input_panel","input_cards","end_space","hasClass","input_min_fixed_height","min_fixed_height","max","now_height","min","toggle_input_panel_style","fixed","init_fixed_height","move_input_panel","step","new_height","lastScrollTop","st","pageYOffset","documentElement","downmove","upmove","innerHeight","deltaY","last_y","changedTouches","screenY","variation","top_key","json_obj","json_str","json_buf","TextEncoder","buffer","int2bytes","byteLength","num","buf","ArrayBuffer","dataView","DataView","setUint32","b64Data","sliceSize","byteCharacters","atob","byteArrays","byteNumbers","byteArray","Uint8Array","set","clientHeight","speed","abs","box_scroll_to","scrollTopOffset","characters","charactersLength","new_window","searchParams","open","input_name","filename","mime_type","last_modified","lastModified","userAgentData","mobile","ipadOS","platform","maxTouchPoints","userAgent","window_size","init_seq","send_interval","min_send_interval","queue","_stop","ignore_interval_send","last_send_time","interval_send_id","interval_send","allow_batch_send","enable_batch","do_send","tasks","batch_send","get_tasks","pop_count"],"mappings":"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","file":"pywebio.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2021, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.marked = factory());\n}(this, (function () { 'use strict';\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it;\n\n    if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n        return function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    it = o[Symbol.iterator]();\n    return it.next.bind(it);\n  }\n\n  function createCommonjsModule(fn) {\n    var module = { exports: {} };\n  \treturn fn(module, module.exports), module.exports;\n  }\n\n  var defaults = createCommonjsModule(function (module) {\n    function getDefaults() {\n      return {\n        baseUrl: null,\n        breaks: false,\n        gfm: true,\n        headerIds: true,\n        headerPrefix: '',\n        highlight: null,\n        langPrefix: 'language-',\n        mangle: true,\n        pedantic: false,\n        renderer: null,\n        sanitize: false,\n        sanitizer: null,\n        silent: false,\n        smartLists: false,\n        smartypants: false,\n        tokenizer: null,\n        walkTokens: null,\n        xhtml: false\n      };\n    }\n\n    function changeDefaults(newDefaults) {\n      module.exports.defaults = newDefaults;\n    }\n\n    module.exports = {\n      defaults: getDefaults(),\n      getDefaults: getDefaults,\n      changeDefaults: changeDefaults\n    };\n  });\n\n  /**\n   * Helpers\n   */\n  var escapeTest = /[&<>\"']/;\n  var escapeReplace = /[&<>\"']/g;\n  var escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\n  var escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n  var escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  var getEscapeReplacement = function getEscapeReplacement(ch) {\n    return escapeReplacements[ch];\n  };\n\n  function escape(html, encode) {\n    if (encode) {\n      if (escapeTest.test(html)) {\n        return html.replace(escapeReplace, getEscapeReplacement);\n      }\n    } else {\n      if (escapeTestNoEncode.test(html)) {\n        return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n      }\n    }\n\n    return html;\n  }\n\n  var unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n  function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(unescapeTest, function (_, n) {\n      n = n.toLowerCase();\n      if (n === 'colon') return ':';\n\n      if (n.charAt(0) === '#') {\n        return n.charAt(1) === 'x' ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));\n      }\n\n      return '';\n    });\n  }\n\n  var caret = /(^|[^\\[])\\^/g;\n\n  function edit(regex, opt) {\n    regex = regex.source || regex;\n    opt = opt || '';\n    var obj = {\n      replace: function replace(name, val) {\n        val = val.source || val;\n        val = val.replace(caret, '$1');\n        regex = regex.replace(name, val);\n        return obj;\n      },\n      getRegex: function getRegex() {\n        return new RegExp(regex, opt);\n      }\n    };\n    return obj;\n  }\n\n  var nonWordAndColonTest = /[^\\w:]/g;\n  var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n  function cleanUrl(sanitize, base, href) {\n    if (sanitize) {\n      var prot;\n\n      try {\n        prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, '').toLowerCase();\n      } catch (e) {\n        return null;\n      }\n\n      if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n        return null;\n      }\n    }\n\n    if (base && !originIndependentUrl.test(href)) {\n      href = resolveUrl(base, href);\n    }\n\n    try {\n      href = encodeURI(href).replace(/%25/g, '%');\n    } catch (e) {\n      return null;\n    }\n\n    return href;\n  }\n\n  var baseUrls = {};\n  var justDomain = /^[^:]+:\\/*[^/]*$/;\n  var protocol = /^([^:]+:)[\\s\\S]*$/;\n  var domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n  function resolveUrl(base, href) {\n    if (!baseUrls[' ' + base]) {\n      // we can ignore everything in base after the last slash of its path component,\n      // but we might need to add _that_\n      // https://tools.ietf.org/html/rfc3986#section-3\n      if (justDomain.test(base)) {\n        baseUrls[' ' + base] = base + '/';\n      } else {\n        baseUrls[' ' + base] = rtrim(base, '/', true);\n      }\n    }\n\n    base = baseUrls[' ' + base];\n    var relativeBase = base.indexOf(':') === -1;\n\n    if (href.substring(0, 2) === '//') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(protocol, '$1') + href;\n    } else if (href.charAt(0) === '/') {\n      if (relativeBase) {\n        return href;\n      }\n\n      return base.replace(domain, '$1') + href;\n    } else {\n      return base + href;\n    }\n  }\n\n  var noopTest = {\n    exec: function noopTest() {}\n  };\n\n  function merge(obj) {\n    var i = 1,\n        target,\n        key;\n\n    for (; i < arguments.length; i++) {\n      target = arguments[i];\n\n      for (key in target) {\n        if (Object.prototype.hasOwnProperty.call(target, key)) {\n          obj[key] = target[key];\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n      var escaped = false,\n          curr = offset;\n\n      while (--curr >= 0 && str[curr] === '\\\\') {\n        escaped = !escaped;\n      }\n\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n        cells = row.split(/ \\|/);\n    var i = 0;\n\n    if (cells.length > count) {\n      cells.splice(count);\n    } else {\n      while (cells.length < count) {\n        cells.push('');\n      }\n    }\n\n    for (; i < cells.length; i++) {\n      // leading or trailing whitespace is ignored per the gfm spec\n      cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n    }\n\n    return cells;\n  } // Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n  // /c*$/ is vulnerable to REDOS.\n  // invert: Remove suffix of non-c chars instead. Default falsey.\n\n\n  function rtrim(str, c, invert) {\n    var l = str.length;\n\n    if (l === 0) {\n      return '';\n    } // Length of suffix matching the invert condition.\n\n\n    var suffLen = 0; // Step left until we fail to match the invert condition.\n\n    while (suffLen < l) {\n      var currChar = str.charAt(l - suffLen - 1);\n\n      if (currChar === c && !invert) {\n        suffLen++;\n      } else if (currChar !== c && invert) {\n        suffLen++;\n      } else {\n        break;\n      }\n    }\n\n    return str.substr(0, l - suffLen);\n  }\n\n  function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n      return -1;\n    }\n\n    var l = str.length;\n    var level = 0,\n        i = 0;\n\n    for (; i < l; i++) {\n      if (str[i] === '\\\\') {\n        i++;\n      } else if (str[i] === b[0]) {\n        level++;\n      } else if (str[i] === b[1]) {\n        level--;\n\n        if (level < 0) {\n          return i;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  function checkSanitizeDeprecation(opt) {\n    if (opt && opt.sanitize && !opt.silent) {\n      console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n    }\n  } // copied from https://stackoverflow.com/a/5450113/806777\n\n\n  function repeatString(pattern, count) {\n    if (count < 1) {\n      return '';\n    }\n\n    var result = '';\n\n    while (count > 1) {\n      if (count & 1) {\n        result += pattern;\n      }\n\n      count >>= 1;\n      pattern += pattern;\n    }\n\n    return result + pattern;\n  }\n\n  var helpers = {\n    escape: escape,\n    unescape: unescape,\n    edit: edit,\n    cleanUrl: cleanUrl,\n    resolveUrl: resolveUrl,\n    noopTest: noopTest,\n    merge: merge,\n    splitCells: splitCells,\n    rtrim: rtrim,\n    findClosingBracket: findClosingBracket,\n    checkSanitizeDeprecation: checkSanitizeDeprecation,\n    repeatString: repeatString\n  };\n\n  var defaults$1 = defaults.defaults;\n  var rtrim$1 = helpers.rtrim,\n      splitCells$1 = helpers.splitCells,\n      _escape = helpers.escape,\n      findClosingBracket$1 = helpers.findClosingBracket;\n\n  function outputLink(cap, link, raw) {\n    var href = link.href;\n    var title = link.title ? _escape(link.title) : null;\n    var text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n    if (cap[0].charAt(0) !== '!') {\n      return {\n        type: 'link',\n        raw: raw,\n        href: href,\n        title: title,\n        text: text\n      };\n    } else {\n      return {\n        type: 'image',\n        raw: raw,\n        href: href,\n        title: title,\n        text: _escape(text)\n      };\n    }\n  }\n\n  function indentCodeCompensation(raw, text) {\n    var matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n    if (matchIndentToCode === null) {\n      return text;\n    }\n\n    var indentToCode = matchIndentToCode[1];\n    return text.split('\\n').map(function (node) {\n      var matchIndentInNode = node.match(/^\\s+/);\n\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      var indentInNode = matchIndentInNode[0];\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    }).join('\\n');\n  }\n  /**\n   * Tokenizer\n   */\n\n\n  var Tokenizer_1 = /*#__PURE__*/function () {\n    function Tokenizer(options) {\n      this.options = options || defaults$1;\n    }\n\n    var _proto = Tokenizer.prototype;\n\n    _proto.space = function space(src) {\n      var cap = this.rules.block.newline.exec(src);\n\n      if (cap) {\n        if (cap[0].length > 1) {\n          return {\n            type: 'space',\n            raw: cap[0]\n          };\n        }\n\n        return {\n          raw: '\\n'\n        };\n      }\n    };\n\n    _proto.code = function code(src, tokens) {\n      var cap = this.rules.block.code.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1]; // An indented code block cannot interrupt a paragraph.\n\n        if (lastToken && lastToken.type === 'paragraph') {\n          return {\n            raw: cap[0],\n            text: cap[0].trimRight()\n          };\n        }\n\n        var text = cap[0].replace(/^ {1,4}/gm, '');\n        return {\n          type: 'code',\n          raw: cap[0],\n          codeBlockStyle: 'indented',\n          text: !this.options.pedantic ? rtrim$1(text, '\\n') : text\n        };\n      }\n    };\n\n    _proto.fences = function fences(src) {\n      var cap = this.rules.block.fences.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var text = indentCodeCompensation(raw, cap[3] || '');\n        return {\n          type: 'code',\n          raw: raw,\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: text\n        };\n      }\n    };\n\n    _proto.heading = function heading(src) {\n      var cap = this.rules.block.heading.exec(src);\n\n      if (cap) {\n        var text = cap[2].trim(); // remove trailing #s\n\n        if (/#$/.test(text)) {\n          var trimmed = rtrim$1(text, '#');\n\n          if (this.options.pedantic) {\n            text = trimmed.trim();\n          } else if (!trimmed || / $/.test(trimmed)) {\n            // CommonMark requires space before trailing #s\n            text = trimmed.trim();\n          }\n        }\n\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[1].length,\n          text: text\n        };\n      }\n    };\n\n    _proto.nptable = function nptable(src) {\n      var cap = this.rules.block.nptable.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : [],\n          raw: cap[0]\n        };\n\n        if (item.header.length === item.align.length) {\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i], item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.hr = function hr(src) {\n      var cap = this.rules.block.hr.exec(src);\n\n      if (cap) {\n        return {\n          type: 'hr',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.blockquote = function blockquote(src) {\n      var cap = this.rules.block.blockquote.exec(src);\n\n      if (cap) {\n        var text = cap[0].replace(/^ *> ?/gm, '');\n        return {\n          type: 'blockquote',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.list = function list(src) {\n      var cap = this.rules.block.list.exec(src);\n\n      if (cap) {\n        var raw = cap[0];\n        var bull = cap[2];\n        var isordered = bull.length > 1;\n        var list = {\n          type: 'list',\n          raw: raw,\n          ordered: isordered,\n          start: isordered ? +bull.slice(0, -1) : '',\n          loose: false,\n          items: []\n        }; // Get each top-level item.\n\n        var itemMatch = cap[0].match(this.rules.block.item);\n        var next = false,\n            item,\n            space,\n            bcurr,\n            bnext,\n            addBack,\n            loose,\n            istask,\n            ischecked;\n        var l = itemMatch.length;\n        bcurr = this.rules.block.listItemStart.exec(itemMatch[0]);\n\n        for (var i = 0; i < l; i++) {\n          item = itemMatch[i];\n          raw = item; // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n\n          if (i !== l - 1) {\n            bnext = this.rules.block.listItemStart.exec(itemMatch[i + 1]);\n\n            if (bnext[1].length > bcurr[0].length || bnext[1].length > 3) {\n              // nested list\n              itemMatch.splice(i, 2, itemMatch[i] + '\\n' + itemMatch[i + 1]);\n              i--;\n              l--;\n              continue;\n            } else {\n              if ( // different bullet style\n              !this.options.pedantic || this.options.smartLists ? bnext[2][bnext[2].length - 1] !== bull[bull.length - 1] : isordered === (bnext[2].length === 1)) {\n                addBack = itemMatch.slice(i + 1).join('\\n');\n                list.raw = list.raw.substring(0, list.raw.length - addBack.length);\n                i = l - 1;\n              }\n            }\n\n            bcurr = bnext;\n          } // Remove the list item's bullet\n          // so it is seen as the next token.\n\n\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+[.)]) ?/, ''); // Outdent whatever the\n          // list item contains. Hacky.\n\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '') : item.replace(/^ {1,4}/gm, '');\n          } // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n\n\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            list.loose = true;\n          } // Check for task list items\n\n\n          if (this.options.gfm) {\n            istask = /^\\[[ xX]\\] /.test(item);\n            ischecked = undefined;\n\n            if (istask) {\n              ischecked = item[1] !== ' ';\n              item = item.replace(/^\\[[ xX]\\] +/, '');\n            }\n          }\n\n          list.items.push({\n            type: 'list_item',\n            raw: raw,\n            task: istask,\n            checked: ischecked,\n            loose: loose,\n            text: item\n          });\n        }\n\n        return list;\n      }\n    };\n\n    _proto.html = function html(src) {\n      var cap = this.rules.block.html.exec(src);\n\n      if (cap) {\n        return {\n          type: this.options.sanitize ? 'paragraph' : 'html',\n          raw: cap[0],\n          pre: !this.options.sanitizer && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.def = function def(src) {\n      var cap = this.rules.block.def.exec(src);\n\n      if (cap) {\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        var tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        return {\n          tag: tag,\n          raw: cap[0],\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n    };\n\n    _proto.table = function table(src) {\n      var cap = this.rules.block.table.exec(src);\n\n      if (cap) {\n        var item = {\n          type: 'table',\n          header: splitCells$1(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          item.raw = cap[0];\n          var l = item.align.length;\n          var i;\n\n          for (i = 0; i < l; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          l = item.cells.length;\n\n          for (i = 0; i < l; i++) {\n            item.cells[i] = splitCells$1(item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''), item.header.length);\n          }\n\n          return item;\n        }\n      }\n    };\n\n    _proto.lheading = function lheading(src) {\n      var cap = this.rules.block.lheading.exec(src);\n\n      if (cap) {\n        return {\n          type: 'heading',\n          raw: cap[0],\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        };\n      }\n    };\n\n    _proto.paragraph = function paragraph(src) {\n      var cap = this.rules.block.paragraph.exec(src);\n\n      if (cap) {\n        return {\n          type: 'paragraph',\n          raw: cap[0],\n          text: cap[1].charAt(cap[1].length - 1) === '\\n' ? cap[1].slice(0, -1) : cap[1]\n        };\n      }\n    };\n\n    _proto.text = function text(src, tokens) {\n      var cap = this.rules.block.text.exec(src);\n\n      if (cap) {\n        var lastToken = tokens[tokens.length - 1];\n\n        if (lastToken && lastToken.type === 'text') {\n          return {\n            raw: cap[0],\n            text: cap[0]\n          };\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: cap[0]\n        };\n      }\n    };\n\n    _proto.escape = function escape(src) {\n      var cap = this.rules.inline.escape.exec(src);\n\n      if (cap) {\n        return {\n          type: 'escape',\n          raw: cap[0],\n          text: _escape(cap[1])\n        };\n      }\n    };\n\n    _proto.tag = function tag(src, inLink, inRawBlock) {\n      var cap = this.rules.inline.tag.exec(src);\n\n      if (cap) {\n        if (!inLink && /^<a /i.test(cap[0])) {\n          inLink = true;\n        } else if (inLink && /^<\\/a>/i.test(cap[0])) {\n          inLink = false;\n        }\n\n        if (!inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = true;\n        } else if (inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          inRawBlock = false;\n        }\n\n        return {\n          type: this.options.sanitize ? 'text' : 'html',\n          raw: cap[0],\n          inLink: inLink,\n          inRawBlock: inRawBlock,\n          text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0]\n        };\n      }\n    };\n\n    _proto.link = function link(src) {\n      var cap = this.rules.inline.link.exec(src);\n\n      if (cap) {\n        var trimmedUrl = cap[2].trim();\n\n        if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n          // commonmark requires matching angle brackets\n          if (!/>$/.test(trimmedUrl)) {\n            return;\n          } // ending angle bracket cannot be escaped\n\n\n          var rtrimSlash = rtrim$1(trimmedUrl.slice(0, -1), '\\\\');\n\n          if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n            return;\n          }\n        } else {\n          // find closing parenthesis\n          var lastParenIndex = findClosingBracket$1(cap[2], '()');\n\n          if (lastParenIndex > -1) {\n            var start = cap[0].indexOf('!') === 0 ? 5 : 4;\n            var linkLen = start + cap[1].length + lastParenIndex;\n            cap[2] = cap[2].substring(0, lastParenIndex);\n            cap[0] = cap[0].substring(0, linkLen).trim();\n            cap[3] = '';\n          }\n        }\n\n        var href = cap[2];\n        var title = '';\n\n        if (this.options.pedantic) {\n          // split pedantic href and title\n          var link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n\n        href = href.trim();\n\n        if (/^</.test(href)) {\n          if (this.options.pedantic && !/>$/.test(trimmedUrl)) {\n            // pedantic allows starting angle bracket without ending angle bracket\n            href = href.slice(1);\n          } else {\n            href = href.slice(1, -1);\n          }\n        }\n\n        return outputLink(cap, {\n          href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n          title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n        }, cap[0]);\n      }\n    };\n\n    _proto.reflink = function reflink(src, links) {\n      var cap;\n\n      if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {\n        var link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = links[link.toLowerCase()];\n\n        if (!link || !link.href) {\n          var text = cap[0].charAt(0);\n          return {\n            type: 'text',\n            raw: text,\n            text: text\n          };\n        }\n\n        return outputLink(cap, link, cap[0]);\n      }\n    };\n\n    _proto.strong = function strong(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.strong.start.exec(src);\n\n      if (match && (!match[1] || match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n        maskedSrc = maskedSrc.slice(-1 * src.length);\n        var endReg = match[0] === '**' ? this.rules.inline.strong.endAst : this.rules.inline.strong.endUnd;\n        endReg.lastIndex = 0;\n        var cap;\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          cap = this.rules.inline.strong.middle.exec(maskedSrc.slice(0, match.index + 3));\n\n          if (cap) {\n            return {\n              type: 'strong',\n              raw: src.slice(0, cap[0].length),\n              text: src.slice(2, cap[0].length - 2)\n            };\n          }\n        }\n      }\n    };\n\n    _proto.em = function em(src, maskedSrc, prevChar) {\n      if (prevChar === void 0) {\n        prevChar = '';\n      }\n\n      var match = this.rules.inline.em.start.exec(src);\n\n      if (match && (!match[1] || match[1] && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n        maskedSrc = maskedSrc.slice(-1 * src.length);\n        var endReg = match[0] === '*' ? this.rules.inline.em.endAst : this.rules.inline.em.endUnd;\n        endReg.lastIndex = 0;\n        var cap;\n\n        while ((match = endReg.exec(maskedSrc)) != null) {\n          cap = this.rules.inline.em.middle.exec(maskedSrc.slice(0, match.index + 2));\n\n          if (cap) {\n            return {\n              type: 'em',\n              raw: src.slice(0, cap[0].length),\n              text: src.slice(1, cap[0].length - 1)\n            };\n          }\n        }\n      }\n    };\n\n    _proto.codespan = function codespan(src) {\n      var cap = this.rules.inline.code.exec(src);\n\n      if (cap) {\n        var text = cap[2].replace(/\\n/g, ' ');\n        var hasNonSpaceChars = /[^ ]/.test(text);\n        var hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n\n        if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n          text = text.substring(1, text.length - 1);\n        }\n\n        text = _escape(text, true);\n        return {\n          type: 'codespan',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    _proto.br = function br(src) {\n      var cap = this.rules.inline.br.exec(src);\n\n      if (cap) {\n        return {\n          type: 'br',\n          raw: cap[0]\n        };\n      }\n    };\n\n    _proto.del = function del(src) {\n      var cap = this.rules.inline.del.exec(src);\n\n      if (cap) {\n        return {\n          type: 'del',\n          raw: cap[0],\n          text: cap[2]\n        };\n      }\n    };\n\n    _proto.autolink = function autolink(src, mangle) {\n      var cap = this.rules.inline.autolink.exec(src);\n\n      if (cap) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n          href = 'mailto:' + text;\n        } else {\n          text = _escape(cap[1]);\n          href = text;\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.url = function url(src, mangle) {\n      var cap;\n\n      if (cap = this.rules.inline.url.exec(src)) {\n        var text, href;\n\n        if (cap[2] === '@') {\n          text = _escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          var prevCapZero;\n\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n\n          text = _escape(cap[0]);\n\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n\n        return {\n          type: 'link',\n          raw: cap[0],\n          text: text,\n          href: href,\n          tokens: [{\n            type: 'text',\n            raw: text,\n            text: text\n          }]\n        };\n      }\n    };\n\n    _proto.inlineText = function inlineText(src, inRawBlock, smartypants) {\n      var cap = this.rules.inline.text.exec(src);\n\n      if (cap) {\n        var text;\n\n        if (inRawBlock) {\n          text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : _escape(cap[0]) : cap[0];\n        } else {\n          text = _escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n        }\n\n        return {\n          type: 'text',\n          raw: cap[0],\n          text: text\n        };\n      }\n    };\n\n    return Tokenizer;\n  }();\n\n  var noopTest$1 = helpers.noopTest,\n      edit$1 = helpers.edit,\n      merge$1 = helpers.merge;\n  /**\n   * Block-Level Grammar\n   */\n\n  var block = {\n    newline: /^(?: *(?:\\n|$))+/,\n    code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n    fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n    hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n    heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n    blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n    list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?! {0,3}bull )\\n*|\\s*$)/,\n    html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n    def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n    nptable: noopTest$1,\n    table: noopTest$1,\n    lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    // regex template, placeholders will be replaced according to different paragraph\n    // interruption rules of commonmark and the original markdown spec:\n    _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html| +\\n)[^\\n]+)*)/,\n    text: /^[^\\n]+/\n  };\n  block._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\n  block._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\n  block.def = edit$1(block.def).replace('label', block._label).replace('title', block._title).getRegex();\n  block.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\n  block.item = /^( *)(bull) ?[^\\n]*(?:\\n(?! *bull ?)[^\\n]*)*/;\n  block.item = edit$1(block.item, 'gm').replace(/bull/g, block.bullet).getRegex();\n  block.listItemStart = edit$1(/^( *)(bull)/).replace('bull', block.bullet).getRegex();\n  block.list = edit$1(block.list).replace(/bull/g, block.bullet).replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))').replace('def', '\\\\n+(?=' + block.def.source + ')').getRegex();\n  block._tag = 'address|article|aside|base|basefont|blockquote|body|caption' + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption' + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe' + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option' + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr' + '|track|ul';\n  block._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\n  block.html = edit$1(block.html, 'i').replace('comment', block._comment).replace('tag', block._tag).replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/).getRegex();\n  block.paragraph = edit$1(block._paragraph).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n  block.blockquote = edit$1(block.blockquote).replace('paragraph', block.paragraph).getRegex();\n  /**\n   * Normal Block Grammar\n   */\n\n  block.normal = merge$1({}, block);\n  /**\n   * GFM Block Grammar\n   */\n\n  block.gfm = merge$1({}, block.normal, {\n    nptable: '^ *([^|\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}([-:]+ *\\\\|[-| :]*)' // Align\n    + '(?:\\\\n((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)',\n    // Cells\n    table: '^ *\\\\|(.+)\\\\n' // Header\n    + ' {0,3}\\\\|?( *[-:]+[-| :]*)' // Align\n    + '(?:\\\\n *((?:(?!\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n\n  });\n  block.gfm.nptable = edit$1(block.gfm.nptable).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  block.gfm.table = edit$1(block.gfm.table).replace('hr', block.hr).replace('heading', ' {0,3}#{1,6} ').replace('blockquote', ' {0,3}>').replace('code', ' {4}[^\\\\n]').replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n').replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)').replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n  /**\n   * Pedantic grammar (original John Gruber's loose markdown specification)\n   */\n\n  block.pedantic = merge$1({}, block.normal, {\n    html: edit$1('^ *(?:comment *(?:\\\\n|\\\\s*$)' + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))').replace('comment', block._comment).replace(/tag/g, '(?!(?:' + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub' + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)' + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b').getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest$1,\n    // fences not supported\n    paragraph: edit$1(block.normal._paragraph).replace('hr', block.hr).replace('heading', ' *#{1,6} *[^\\n]').replace('lheading', block.lheading).replace('blockquote', ' {0,3}>').replace('|fences', '').replace('|list', '').replace('|html', '').getRegex()\n  });\n  /**\n   * Inline-Level Grammar\n   */\n\n  var inline = {\n    escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n    autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n    url: noopTest$1,\n    tag: '^comment' + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>',\n    // CDATA section\n    link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n    reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n    nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n    reflinkSearch: 'reflink|nolink(?!\\\\()',\n    strong: {\n      start: /^(?:(\\*\\*(?=[*punctuation]))|\\*\\*)(?![\\s])|__/,\n      // (1) returns if starts w/ punctuation\n      middle: /^\\*\\*(?:(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)|\\*(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)*?\\*)+?\\*\\*$|^__(?![\\s])((?:(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)*?_)+?)__$/,\n      endAst: /[^punctuation\\s]\\*\\*(?!\\*)|[punctuation]\\*\\*(?!\\*)(?:(?=[punctuation_\\s]|$))/,\n      // last char can't be punct, or final * must also be followed by punct (or endline)\n      endUnd: /[^\\s]__(?!_)(?:(?=[punctuation*\\s])|$)/ // last char can't be a space, and final _ must preceed punct or \\s (or endline)\n\n    },\n    em: {\n      start: /^(?:(\\*(?=[punctuation]))|\\*)(?![*\\s])|_/,\n      // (1) returns if starts w/ punctuation\n      middle: /^\\*(?:(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)|\\*(?:(?!overlapSkip)(?:[^*]|\\\\\\*)|overlapSkip)*?\\*)+?\\*$|^_(?![_\\s])(?:(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\\\_)|overlapSkip)*?_)+?_$/,\n      endAst: /[^punctuation\\s]\\*(?!\\*)|[punctuation]\\*(?!\\*)(?:(?=[punctuation_\\s]|$))/,\n      // last char can't be punct, or final * must also be followed by punct (or endline)\n      endUnd: /[^\\s]_(?!_)(?:(?=[punctuation*\\s])|$)/ // last char can't be a space, and final _ must preceed punct or \\s (or endline)\n\n    },\n    code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n    br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n    del: noopTest$1,\n    text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n    punctuation: /^([\\s*punctuation])/\n  }; // list of punctuation marks from common mark spec\n  // without * and _ to workaround cases with double emphasis\n\n  inline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\n  inline.punctuation = edit$1(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex(); // sequences em should skip over [title](link), `code`, <html>\n\n  inline._blockSkip = '\\\\[[^\\\\]]*?\\\\]\\\\([^\\\\)]*?\\\\)|`[^`]*?`|<[^>]*?>';\n  inline._overlapSkip = '__[^_]*?__|\\\\*\\\\*\\\\[^\\\\*\\\\]*?\\\\*\\\\*';\n  inline._comment = edit$1(block._comment).replace('(?:-->|$)', '-->').getRegex();\n  inline.em.start = edit$1(inline.em.start).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.em.middle = edit$1(inline.em.middle).replace(/punctuation/g, inline._punctuation).replace(/overlapSkip/g, inline._overlapSkip).getRegex();\n  inline.em.endAst = edit$1(inline.em.endAst, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.em.endUnd = edit$1(inline.em.endUnd, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.start = edit$1(inline.strong.start).replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.middle = edit$1(inline.strong.middle).replace(/punctuation/g, inline._punctuation).replace(/overlapSkip/g, inline._overlapSkip).getRegex();\n  inline.strong.endAst = edit$1(inline.strong.endAst, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.strong.endUnd = edit$1(inline.strong.endUnd, 'g').replace(/punctuation/g, inline._punctuation).getRegex();\n  inline.blockSkip = edit$1(inline._blockSkip, 'g').getRegex();\n  inline.overlapSkip = edit$1(inline._overlapSkip, 'g').getRegex();\n  inline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n  inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\n  inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\n  inline.autolink = edit$1(inline.autolink).replace('scheme', inline._scheme).replace('email', inline._email).getRegex();\n  inline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n  inline.tag = edit$1(inline.tag).replace('comment', inline._comment).replace('attribute', inline._attribute).getRegex();\n  inline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\n  inline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\n  inline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n  inline.link = edit$1(inline.link).replace('label', inline._label).replace('href', inline._href).replace('title', inline._title).getRegex();\n  inline.reflink = edit$1(inline.reflink).replace('label', inline._label).getRegex();\n  inline.reflinkSearch = edit$1(inline.reflinkSearch, 'g').replace('reflink', inline.reflink).replace('nolink', inline.nolink).getRegex();\n  /**\n   * Normal Inline Grammar\n   */\n\n  inline.normal = merge$1({}, inline);\n  /**\n   * Pedantic Inline Grammar\n   */\n\n  inline.pedantic = merge$1({}, inline.normal, {\n    strong: {\n      start: /^__|\\*\\*/,\n      middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n      endAst: /\\*\\*(?!\\*)/g,\n      endUnd: /__(?!_)/g\n    },\n    em: {\n      start: /^_|\\*/,\n      middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n      endAst: /\\*(?!\\*)/g,\n      endUnd: /_(?!_)/g\n    },\n    link: edit$1(/^!?\\[(label)\\]\\((.*?)\\)/).replace('label', inline._label).getRegex(),\n    reflink: edit$1(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/).replace('label', inline._label).getRegex()\n  });\n  /**\n   * GFM Inline Grammar\n   */\n\n  inline.gfm = merge$1({}, inline.normal, {\n    escape: edit$1(inline.escape).replace('])', '~|])').getRegex(),\n    _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n    url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n    _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n  });\n  inline.gfm.url = edit$1(inline.gfm.url, 'i').replace('email', inline.gfm._extended_email).getRegex();\n  /**\n   * GFM + Line Breaks Inline Grammar\n   */\n\n  inline.breaks = merge$1({}, inline.gfm, {\n    br: edit$1(inline.br).replace('{2,}', '*').getRegex(),\n    text: edit$1(inline.gfm.text).replace('\\\\b_', '\\\\b_| {2,}\\\\n').replace(/\\{2,\\}/g, '*').getRegex()\n  });\n  var rules = {\n    block: block,\n    inline: inline\n  };\n\n  var defaults$2 = defaults.defaults;\n  var block$1 = rules.block,\n      inline$1 = rules.inline;\n  var repeatString$1 = helpers.repeatString;\n  /**\n   * smartypants text replacement\n   */\n\n  function smartypants(text) {\n    return text // em-dashes\n    .replace(/---/g, \"\\u2014\") // en-dashes\n    .replace(/--/g, \"\\u2013\") // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, \"$1\\u2018\") // closing singles & apostrophes\n    .replace(/'/g, \"\\u2019\") // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, \"$1\\u201C\") // closing doubles\n    .replace(/\"/g, \"\\u201D\") // ellipses\n    .replace(/\\.{3}/g, \"\\u2026\");\n  }\n  /**\n   * mangle email addresses\n   */\n\n\n  function mangle(text) {\n    var out = '',\n        i,\n        ch;\n    var l = text.length;\n\n    for (i = 0; i < l; i++) {\n      ch = text.charCodeAt(i);\n\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n  /**\n   * Block Lexer\n   */\n\n\n  var Lexer_1 = /*#__PURE__*/function () {\n    function Lexer(options) {\n      this.tokens = [];\n      this.tokens.links = Object.create(null);\n      this.options = options || defaults$2;\n      this.options.tokenizer = this.options.tokenizer || new Tokenizer_1();\n      this.tokenizer = this.options.tokenizer;\n      this.tokenizer.options = this.options;\n      var rules = {\n        block: block$1.normal,\n        inline: inline$1.normal\n      };\n\n      if (this.options.pedantic) {\n        rules.block = block$1.pedantic;\n        rules.inline = inline$1.pedantic;\n      } else if (this.options.gfm) {\n        rules.block = block$1.gfm;\n\n        if (this.options.breaks) {\n          rules.inline = inline$1.breaks;\n        } else {\n          rules.inline = inline$1.gfm;\n        }\n      }\n\n      this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n\n\n    /**\n     * Static Lex Method\n     */\n    Lexer.lex = function lex(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    ;\n\n    Lexer.lexInline = function lexInline(src, options) {\n      var lexer = new Lexer(options);\n      return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    ;\n\n    var _proto = Lexer.prototype;\n\n    _proto.lex = function lex(src) {\n      src = src.replace(/\\r\\n|\\r/g, '\\n').replace(/\\t/g, '    ');\n      this.blockTokens(src, this.tokens, true);\n      this.inline(this.tokens);\n      return this.tokens;\n    }\n    /**\n     * Lexing\n     */\n    ;\n\n    _proto.blockTokens = function blockTokens(src, tokens, top) {\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (top === void 0) {\n        top = true;\n      }\n\n      if (this.options.pedantic) {\n        src = src.replace(/^ +$/gm, '');\n      }\n\n      var token, i, l, lastToken;\n\n      while (src) {\n        // newline\n        if (token = this.tokenizer.space(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          }\n\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.code(src, tokens)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          } else {\n            lastToken = tokens[tokens.length - 1];\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          }\n\n          continue;\n        } // fences\n\n\n        if (token = this.tokenizer.fences(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // heading\n\n\n        if (token = this.tokenizer.heading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // table no leading pipe (gfm)\n\n\n        if (token = this.tokenizer.nptable(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // hr\n\n\n        if (token = this.tokenizer.hr(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // blockquote\n\n\n        if (token = this.tokenizer.blockquote(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.blockTokens(token.text, [], top);\n          tokens.push(token);\n          continue;\n        } // list\n\n\n        if (token = this.tokenizer.list(src)) {\n          src = src.substring(token.raw.length);\n          l = token.items.length;\n\n          for (i = 0; i < l; i++) {\n            token.items[i].tokens = this.blockTokens(token.items[i].text, [], false);\n          }\n\n          tokens.push(token);\n          continue;\n        } // html\n\n\n        if (token = this.tokenizer.html(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // def\n\n\n        if (top && (token = this.tokenizer.def(src))) {\n          src = src.substring(token.raw.length);\n\n          if (!this.tokens.links[token.tag]) {\n            this.tokens.links[token.tag] = {\n              href: token.href,\n              title: token.title\n            };\n          }\n\n          continue;\n        } // table (gfm)\n\n\n        if (token = this.tokenizer.table(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // lheading\n\n\n        if (token = this.tokenizer.lheading(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // top-level paragraph\n\n\n        if (top && (token = this.tokenizer.paragraph(src))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.text(src, tokens)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type) {\n            tokens.push(token);\n          } else {\n            lastToken = tokens[tokens.length - 1];\n            lastToken.raw += '\\n' + token.raw;\n            lastToken.text += '\\n' + token.text;\n          }\n\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _proto.inline = function inline(tokens) {\n      var i, j, k, l2, row, token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'paragraph':\n          case 'text':\n          case 'heading':\n            {\n              token.tokens = [];\n              this.inlineTokens(token.text, token.tokens);\n              break;\n            }\n\n          case 'table':\n            {\n              token.tokens = {\n                header: [],\n                cells: []\n              }; // header\n\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                token.tokens.header[j] = [];\n                this.inlineTokens(token.header[j], token.tokens.header[j]);\n              } // cells\n\n\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.cells[j];\n                token.tokens.cells[j] = [];\n\n                for (k = 0; k < row.length; k++) {\n                  token.tokens.cells[j][k] = [];\n                  this.inlineTokens(row[k], token.tokens.cells[j][k]);\n                }\n              }\n\n              break;\n            }\n\n          case 'blockquote':\n            {\n              this.inline(token.tokens);\n              break;\n            }\n\n          case 'list':\n            {\n              l2 = token.items.length;\n\n              for (j = 0; j < l2; j++) {\n                this.inline(token.items[j].tokens);\n              }\n\n              break;\n            }\n        }\n      }\n\n      return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    ;\n\n    _proto.inlineTokens = function inlineTokens(src, tokens, inLink, inRawBlock) {\n      if (tokens === void 0) {\n        tokens = [];\n      }\n\n      if (inLink === void 0) {\n        inLink = false;\n      }\n\n      if (inRawBlock === void 0) {\n        inRawBlock = false;\n      }\n\n      var token; // String with links masked to avoid interference with em and strong\n\n      var maskedSrc = src;\n      var match;\n      var keepPrevChar, prevChar; // Mask out reflinks\n\n      if (this.tokens.links) {\n        var links = Object.keys(this.tokens.links);\n\n        if (links.length > 0) {\n          while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n            if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n              maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString$1('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n            }\n          }\n        }\n      } // Mask out other blocks\n\n\n      while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n        maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString$1('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n      }\n\n      while (src) {\n        if (!keepPrevChar) {\n          prevChar = '';\n        }\n\n        keepPrevChar = false; // escape\n\n        if (token = this.tokenizer.escape(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // tag\n\n\n        if (token = this.tokenizer.tag(src, inLink, inRawBlock)) {\n          src = src.substring(token.raw.length);\n          inLink = token.inLink;\n          inRawBlock = token.inRawBlock;\n          tokens.push(token);\n          continue;\n        } // link\n\n\n        if (token = this.tokenizer.link(src)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // reflink, nolink\n\n\n        if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n          src = src.substring(token.raw.length);\n\n          if (token.type === 'link') {\n            token.tokens = this.inlineTokens(token.text, [], true, inRawBlock);\n          }\n\n          tokens.push(token);\n          continue;\n        } // strong\n\n\n        if (token = this.tokenizer.strong(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // em\n\n\n        if (token = this.tokenizer.em(src, maskedSrc, prevChar)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // code\n\n\n        if (token = this.tokenizer.codespan(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // br\n\n\n        if (token = this.tokenizer.br(src)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // del (gfm)\n\n\n        if (token = this.tokenizer.del(src)) {\n          src = src.substring(token.raw.length);\n          token.tokens = this.inlineTokens(token.text, [], inLink, inRawBlock);\n          tokens.push(token);\n          continue;\n        } // autolink\n\n\n        if (token = this.tokenizer.autolink(src, mangle)) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // url (gfm)\n\n\n        if (!inLink && (token = this.tokenizer.url(src, mangle))) {\n          src = src.substring(token.raw.length);\n          tokens.push(token);\n          continue;\n        } // text\n\n\n        if (token = this.tokenizer.inlineText(src, inRawBlock, smartypants)) {\n          src = src.substring(token.raw.length);\n          prevChar = token.raw.slice(-1);\n          keepPrevChar = true;\n          tokens.push(token);\n          continue;\n        }\n\n        if (src) {\n          var errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n\n          if (this.options.silent) {\n            console.error(errMsg);\n            break;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n\n      return tokens;\n    };\n\n    _createClass(Lexer, null, [{\n      key: \"rules\",\n      get: function get() {\n        return {\n          block: block$1,\n          inline: inline$1\n        };\n      }\n    }]);\n\n    return Lexer;\n  }();\n\n  var defaults$3 = defaults.defaults;\n  var cleanUrl$1 = helpers.cleanUrl,\n      escape$1 = helpers.escape;\n  /**\n   * Renderer\n   */\n\n  var Renderer_1 = /*#__PURE__*/function () {\n    function Renderer(options) {\n      this.options = options || defaults$3;\n    }\n\n    var _proto = Renderer.prototype;\n\n    _proto.code = function code(_code, infostring, escaped) {\n      var lang = (infostring || '').match(/\\S*/)[0];\n\n      if (this.options.highlight) {\n        var out = this.options.highlight(_code, lang);\n\n        if (out != null && out !== _code) {\n          escaped = true;\n          _code = out;\n        }\n      }\n\n      _code = _code.replace(/\\n$/, '') + '\\n';\n\n      if (!lang) {\n        return '<pre><code>' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n      }\n\n      return '<pre><code class=\"' + this.options.langPrefix + escape$1(lang, true) + '\">' + (escaped ? _code : escape$1(_code, true)) + '</code></pre>\\n';\n    };\n\n    _proto.blockquote = function blockquote(quote) {\n      return '<blockquote>\\n' + quote + '</blockquote>\\n';\n    };\n\n    _proto.html = function html(_html) {\n      return _html;\n    };\n\n    _proto.heading = function heading(text, level, raw, slugger) {\n      if (this.options.headerIds) {\n        return '<h' + level + ' id=\"' + this.options.headerPrefix + slugger.slug(raw) + '\">' + text + '</h' + level + '>\\n';\n      } // ignore IDs\n\n\n      return '<h' + level + '>' + text + '</h' + level + '>\\n';\n    };\n\n    _proto.hr = function hr() {\n      return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n    };\n\n    _proto.list = function list(body, ordered, start) {\n      var type = ordered ? 'ol' : 'ul',\n          startatt = ordered && start !== 1 ? ' start=\"' + start + '\"' : '';\n      return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n    };\n\n    _proto.listitem = function listitem(text) {\n      return '<li>' + text + '</li>\\n';\n    };\n\n    _proto.checkbox = function checkbox(checked) {\n      return '<input ' + (checked ? 'checked=\"\" ' : '') + 'disabled=\"\" type=\"checkbox\"' + (this.options.xhtml ? ' /' : '') + '> ';\n    };\n\n    _proto.paragraph = function paragraph(text) {\n      return '<p>' + text + '</p>\\n';\n    };\n\n    _proto.table = function table(header, body) {\n      if (body) body = '<tbody>' + body + '</tbody>';\n      return '<table>\\n' + '<thead>\\n' + header + '</thead>\\n' + body + '</table>\\n';\n    };\n\n    _proto.tablerow = function tablerow(content) {\n      return '<tr>\\n' + content + '</tr>\\n';\n    };\n\n    _proto.tablecell = function tablecell(content, flags) {\n      var type = flags.header ? 'th' : 'td';\n      var tag = flags.align ? '<' + type + ' align=\"' + flags.align + '\">' : '<' + type + '>';\n      return tag + content + '</' + type + '>\\n';\n    } // span level renderer\n    ;\n\n    _proto.strong = function strong(text) {\n      return '<strong>' + text + '</strong>';\n    };\n\n    _proto.em = function em(text) {\n      return '<em>' + text + '</em>';\n    };\n\n    _proto.codespan = function codespan(text) {\n      return '<code>' + text + '</code>';\n    };\n\n    _proto.br = function br() {\n      return this.options.xhtml ? '<br/>' : '<br>';\n    };\n\n    _proto.del = function del(text) {\n      return '<del>' + text + '</del>';\n    };\n\n    _proto.link = function link(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<a href=\"' + escape$1(href) + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += '>' + text + '</a>';\n      return out;\n    };\n\n    _proto.image = function image(href, title, text) {\n      href = cleanUrl$1(this.options.sanitize, this.options.baseUrl, href);\n\n      if (href === null) {\n        return text;\n      }\n\n      var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n\n      if (title) {\n        out += ' title=\"' + title + '\"';\n      }\n\n      out += this.options.xhtml ? '/>' : '>';\n      return out;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    return Renderer;\n  }();\n\n  /**\n   * TextRenderer\n   * returns only the textual part of the token\n   */\n  var TextRenderer_1 = /*#__PURE__*/function () {\n    function TextRenderer() {}\n\n    var _proto = TextRenderer.prototype;\n\n    // no need for block level renderers\n    _proto.strong = function strong(text) {\n      return text;\n    };\n\n    _proto.em = function em(text) {\n      return text;\n    };\n\n    _proto.codespan = function codespan(text) {\n      return text;\n    };\n\n    _proto.del = function del(text) {\n      return text;\n    };\n\n    _proto.html = function html(text) {\n      return text;\n    };\n\n    _proto.text = function text(_text) {\n      return _text;\n    };\n\n    _proto.link = function link(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.image = function image(href, title, text) {\n      return '' + text;\n    };\n\n    _proto.br = function br() {\n      return '';\n    };\n\n    return TextRenderer;\n  }();\n\n  /**\n   * Slugger generates header id\n   */\n  var Slugger_1 = /*#__PURE__*/function () {\n    function Slugger() {\n      this.seen = {};\n    }\n\n    var _proto = Slugger.prototype;\n\n    _proto.serialize = function serialize(value) {\n      return value.toLowerCase().trim() // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '') // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '').replace(/\\s/g, '-');\n    }\n    /**\n     * Finds the next safe (unique) slug to use\n     */\n    ;\n\n    _proto.getNextSafeSlug = function getNextSafeSlug(originalSlug, isDryRun) {\n      var slug = originalSlug;\n      var occurenceAccumulator = 0;\n\n      if (this.seen.hasOwnProperty(slug)) {\n        occurenceAccumulator = this.seen[originalSlug];\n\n        do {\n          occurenceAccumulator++;\n          slug = originalSlug + '-' + occurenceAccumulator;\n        } while (this.seen.hasOwnProperty(slug));\n      }\n\n      if (!isDryRun) {\n        this.seen[originalSlug] = occurenceAccumulator;\n        this.seen[slug] = 0;\n      }\n\n      return slug;\n    }\n    /**\n     * Convert string to unique id\n     * @param {object} options\n     * @param {boolean} options.dryrun Generates the next unique slug without updating the internal accumulator.\n     */\n    ;\n\n    _proto.slug = function slug(value, options) {\n      if (options === void 0) {\n        options = {};\n      }\n\n      var slug = this.serialize(value);\n      return this.getNextSafeSlug(slug, options.dryrun);\n    };\n\n    return Slugger;\n  }();\n\n  var defaults$4 = defaults.defaults;\n  var unescape$1 = helpers.unescape;\n  /**\n   * Parsing & Compiling\n   */\n\n  var Parser_1 = /*#__PURE__*/function () {\n    function Parser(options) {\n      this.options = options || defaults$4;\n      this.options.renderer = this.options.renderer || new Renderer_1();\n      this.renderer = this.options.renderer;\n      this.renderer.options = this.options;\n      this.textRenderer = new TextRenderer_1();\n      this.slugger = new Slugger_1();\n    }\n    /**\n     * Static Parse Method\n     */\n\n\n    Parser.parse = function parse(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    ;\n\n    Parser.parseInline = function parseInline(tokens, options) {\n      var parser = new Parser(options);\n      return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    ;\n\n    var _proto = Parser.prototype;\n\n    _proto.parse = function parse(tokens, top) {\n      if (top === void 0) {\n        top = true;\n      }\n\n      var out = '',\n          i,\n          j,\n          k,\n          l2,\n          l3,\n          row,\n          cell,\n          header,\n          body,\n          token,\n          ordered,\n          start,\n          loose,\n          itemBody,\n          item,\n          checked,\n          task,\n          checkbox;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'space':\n            {\n              continue;\n            }\n\n          case 'hr':\n            {\n              out += this.renderer.hr();\n              continue;\n            }\n\n          case 'heading':\n            {\n              out += this.renderer.heading(this.parseInline(token.tokens), token.depth, unescape$1(this.parseInline(token.tokens, this.textRenderer)), this.slugger);\n              continue;\n            }\n\n          case 'code':\n            {\n              out += this.renderer.code(token.text, token.lang, token.escaped);\n              continue;\n            }\n\n          case 'table':\n            {\n              header = ''; // header\n\n              cell = '';\n              l2 = token.header.length;\n\n              for (j = 0; j < l2; j++) {\n                cell += this.renderer.tablecell(this.parseInline(token.tokens.header[j]), {\n                  header: true,\n                  align: token.align[j]\n                });\n              }\n\n              header += this.renderer.tablerow(cell);\n              body = '';\n              l2 = token.cells.length;\n\n              for (j = 0; j < l2; j++) {\n                row = token.tokens.cells[j];\n                cell = '';\n                l3 = row.length;\n\n                for (k = 0; k < l3; k++) {\n                  cell += this.renderer.tablecell(this.parseInline(row[k]), {\n                    header: false,\n                    align: token.align[k]\n                  });\n                }\n\n                body += this.renderer.tablerow(cell);\n              }\n\n              out += this.renderer.table(header, body);\n              continue;\n            }\n\n          case 'blockquote':\n            {\n              body = this.parse(token.tokens);\n              out += this.renderer.blockquote(body);\n              continue;\n            }\n\n          case 'list':\n            {\n              ordered = token.ordered;\n              start = token.start;\n              loose = token.loose;\n              l2 = token.items.length;\n              body = '';\n\n              for (j = 0; j < l2; j++) {\n                item = token.items[j];\n                checked = item.checked;\n                task = item.task;\n                itemBody = '';\n\n                if (item.task) {\n                  checkbox = this.renderer.checkbox(checked);\n\n                  if (loose) {\n                    if (item.tokens.length > 0 && item.tokens[0].type === 'text') {\n                      item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n\n                      if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                      }\n                    } else {\n                      item.tokens.unshift({\n                        type: 'text',\n                        text: checkbox\n                      });\n                    }\n                  } else {\n                    itemBody += checkbox;\n                  }\n                }\n\n                itemBody += this.parse(item.tokens, loose);\n                body += this.renderer.listitem(itemBody, task, checked);\n              }\n\n              out += this.renderer.list(body, ordered, start);\n              continue;\n            }\n\n          case 'html':\n            {\n              // TODO parse inline content if parameter markdown=1\n              out += this.renderer.html(token.text);\n              continue;\n            }\n\n          case 'paragraph':\n            {\n              out += this.renderer.paragraph(this.parseInline(token.tokens));\n              continue;\n            }\n\n          case 'text':\n            {\n              body = token.tokens ? this.parseInline(token.tokens) : token.text;\n\n              while (i + 1 < l && tokens[i + 1].type === 'text') {\n                token = tokens[++i];\n                body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n              }\n\n              out += top ? this.renderer.paragraph(body) : body;\n              continue;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    ;\n\n    _proto.parseInline = function parseInline(tokens, renderer) {\n      renderer = renderer || this.renderer;\n      var out = '',\n          i,\n          token;\n      var l = tokens.length;\n\n      for (i = 0; i < l; i++) {\n        token = tokens[i];\n\n        switch (token.type) {\n          case 'escape':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          case 'html':\n            {\n              out += renderer.html(token.text);\n              break;\n            }\n\n          case 'link':\n            {\n              out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'image':\n            {\n              out += renderer.image(token.href, token.title, token.text);\n              break;\n            }\n\n          case 'strong':\n            {\n              out += renderer.strong(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'em':\n            {\n              out += renderer.em(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'codespan':\n            {\n              out += renderer.codespan(token.text);\n              break;\n            }\n\n          case 'br':\n            {\n              out += renderer.br();\n              break;\n            }\n\n          case 'del':\n            {\n              out += renderer.del(this.parseInline(token.tokens, renderer));\n              break;\n            }\n\n          case 'text':\n            {\n              out += renderer.text(token.text);\n              break;\n            }\n\n          default:\n            {\n              var errMsg = 'Token with \"' + token.type + '\" type was not found.';\n\n              if (this.options.silent) {\n                console.error(errMsg);\n                return;\n              } else {\n                throw new Error(errMsg);\n              }\n            }\n        }\n      }\n\n      return out;\n    };\n\n    return Parser;\n  }();\n\n  var merge$2 = helpers.merge,\n      checkSanitizeDeprecation$1 = helpers.checkSanitizeDeprecation,\n      escape$2 = helpers.escape;\n  var getDefaults = defaults.getDefaults,\n      changeDefaults = defaults.changeDefaults,\n      defaults$5 = defaults.defaults;\n  /**\n   * Marked\n   */\n\n  function marked(src, opt, callback) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    if (typeof opt === 'function') {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    if (callback) {\n      var highlight = opt.highlight;\n      var tokens;\n\n      try {\n        tokens = Lexer_1.lex(src, opt);\n      } catch (e) {\n        return callback(e);\n      }\n\n      var done = function done(err) {\n        var out;\n\n        if (!err) {\n          try {\n            out = Parser_1.parse(tokens, opt);\n          } catch (e) {\n            err = e;\n          }\n        }\n\n        opt.highlight = highlight;\n        return err ? callback(err) : callback(null, out);\n      };\n\n      if (!highlight || highlight.length < 3) {\n        return done();\n      }\n\n      delete opt.highlight;\n      if (!tokens.length) return done();\n      var pending = 0;\n      marked.walkTokens(tokens, function (token) {\n        if (token.type === 'code') {\n          pending++;\n          setTimeout(function () {\n            highlight(token.text, token.lang, function (err, code) {\n              if (err) {\n                return done(err);\n              }\n\n              if (code != null && code !== token.text) {\n                token.text = code;\n                token.escaped = true;\n              }\n\n              pending--;\n\n              if (pending === 0) {\n                done();\n              }\n            });\n          }, 0);\n        }\n      });\n\n      if (pending === 0) {\n        done();\n      }\n\n      return;\n    }\n\n    try {\n      var _tokens = Lexer_1.lex(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(_tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parse(_tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  }\n  /**\n   * Options\n   */\n\n\n  marked.options = marked.setOptions = function (opt) {\n    merge$2(marked.defaults, opt);\n    changeDefaults(marked.defaults);\n    return marked;\n  };\n\n  marked.getDefaults = getDefaults;\n  marked.defaults = defaults$5;\n  /**\n   * Use Extension\n   */\n\n  marked.use = function (extension) {\n    var opts = merge$2({}, extension);\n\n    if (extension.renderer) {\n      (function () {\n        var renderer = marked.defaults.renderer || new Renderer_1();\n\n        var _loop = function _loop(prop) {\n          var prevRenderer = renderer[prop];\n\n          renderer[prop] = function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n\n            var ret = extension.renderer[prop].apply(renderer, args);\n\n            if (ret === false) {\n              ret = prevRenderer.apply(renderer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.renderer) {\n          _loop(prop);\n        }\n\n        opts.renderer = renderer;\n      })();\n    }\n\n    if (extension.tokenizer) {\n      (function () {\n        var tokenizer = marked.defaults.tokenizer || new Tokenizer_1();\n\n        var _loop2 = function _loop2(prop) {\n          var prevTokenizer = tokenizer[prop];\n\n          tokenizer[prop] = function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n\n            var ret = extension.tokenizer[prop].apply(tokenizer, args);\n\n            if (ret === false) {\n              ret = prevTokenizer.apply(tokenizer, args);\n            }\n\n            return ret;\n          };\n        };\n\n        for (var prop in extension.tokenizer) {\n          _loop2(prop);\n        }\n\n        opts.tokenizer = tokenizer;\n      })();\n    }\n\n    if (extension.walkTokens) {\n      var walkTokens = marked.defaults.walkTokens;\n\n      opts.walkTokens = function (token) {\n        extension.walkTokens(token);\n\n        if (walkTokens) {\n          walkTokens(token);\n        }\n      };\n    }\n\n    marked.setOptions(opts);\n  };\n  /**\n   * Run callback for every token\n   */\n\n\n  marked.walkTokens = function (tokens, callback) {\n    for (var _iterator = _createForOfIteratorHelperLoose(tokens), _step; !(_step = _iterator()).done;) {\n      var token = _step.value;\n      callback(token);\n\n      switch (token.type) {\n        case 'table':\n          {\n            for (var _iterator2 = _createForOfIteratorHelperLoose(token.tokens.header), _step2; !(_step2 = _iterator2()).done;) {\n              var cell = _step2.value;\n              marked.walkTokens(cell, callback);\n            }\n\n            for (var _iterator3 = _createForOfIteratorHelperLoose(token.tokens.cells), _step3; !(_step3 = _iterator3()).done;) {\n              var row = _step3.value;\n\n              for (var _iterator4 = _createForOfIteratorHelperLoose(row), _step4; !(_step4 = _iterator4()).done;) {\n                var _cell = _step4.value;\n                marked.walkTokens(_cell, callback);\n              }\n            }\n\n            break;\n          }\n\n        case 'list':\n          {\n            marked.walkTokens(token.items, callback);\n            break;\n          }\n\n        default:\n          {\n            if (token.tokens) {\n              marked.walkTokens(token.tokens, callback);\n            }\n          }\n      }\n    }\n  };\n  /**\n   * Parse Inline\n   */\n\n\n  marked.parseInline = function (src, opt) {\n    // throw error in case of non string input\n    if (typeof src === 'undefined' || src === null) {\n      throw new Error('marked.parseInline(): input parameter is undefined or null');\n    }\n\n    if (typeof src !== 'string') {\n      throw new Error('marked.parseInline(): input parameter is of type ' + Object.prototype.toString.call(src) + ', string expected');\n    }\n\n    opt = merge$2({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation$1(opt);\n\n    try {\n      var tokens = Lexer_1.lexInline(src, opt);\n\n      if (opt.walkTokens) {\n        marked.walkTokens(tokens, opt.walkTokens);\n      }\n\n      return Parser_1.parseInline(tokens, opt);\n    } catch (e) {\n      e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n\n      if (opt.silent) {\n        return '<p>An error occurred:</p><pre>' + escape$2(e.message + '', true) + '</pre>';\n      }\n\n      throw e;\n    }\n  };\n  /**\n   * Expose\n   */\n\n\n  marked.Parser = Parser_1;\n  marked.parser = Parser_1.parse;\n  marked.Renderer = Renderer_1;\n  marked.TextRenderer = TextRenderer_1;\n  marked.Lexer = Lexer_1;\n  marked.lexer = Lexer_1.lex;\n  marked.Tokenizer = Tokenizer_1;\n  marked.Slugger = Slugger_1;\n  marked.parse = marked;\n  var marked_1 = marked;\n\n  return marked_1;\n\n})));\n","import {Command, Session} from \"../session\";\r\n\r\n\r\nexport interface CommandHandler {\r\n    accept_command: string[],\r\n\r\n    handle_message(msg: Command): void\r\n}\r\n\r\nexport class SessionCtrlHandler implements CommandHandler {\r\n    accept_command: string[] = ['close_session', 'set_session_id'];\r\n\r\n    constructor(readonly session: Session) {\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        if (msg.command == 'close_session')\r\n            this.session.close_session();\r\n        else if (msg.command == 'set_session_id')\r\n            this.session.webio_session_id = msg.spec;\r\n    }\r\n}\r\n\r\nexport class CommandDispatcher {\r\n    command2handler: { [cmd: string]: CommandHandler } = {};\r\n\r\n    constructor(...handlers: CommandHandler[]) {\r\n        for (let h of handlers) {\r\n            for (let cmd of h.accept_command) {\r\n                if (cmd in this.command2handler)\r\n                    throw  new Error(`Conflict command handler: both ${this.command2handler[cmd]} and ${h} accepts '${cmd}' command`);\r\n                this.command2handler[cmd] = h;\r\n            }\r\n        }\r\n    }\r\n\r\n    dispatch_message(msg: Command): boolean {\r\n        if (msg.command in this.command2handler) {\r\n            this.command2handler[msg.command].handle_message(msg);\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n}","import {Command} from \"../session\";\r\nimport {CommandHandler} from \"./base\";\r\nimport {b64toBlob} from \"../utils\";\r\n\r\nexport class DownloadHandler implements CommandHandler {\r\n    accept_command: string[] = ['download'];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        let blob = b64toBlob(msg.spec.content);\r\n        saveAs(blob, msg.spec.name, {}, false);\r\n    }\r\n}","import {Command, HttpSession} from \"../session\";\r\nimport {CommandHandler} from \"./base\";\r\nimport {config, state} from \"../state\";\r\n\r\nexport class EnvSettingHandler implements CommandHandler {\r\n    accept_command: string[] = ['set_env'];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        let spec = msg.spec;\r\n        if (spec.title !== undefined) {\r\n            document.title = spec.title;\r\n        }\r\n\r\n        if (spec.auto_scroll_bottom !== undefined)\r\n            state.AutoScrollBottom = spec.auto_scroll_bottom;\r\n\r\n        if (spec.output_animation !== undefined) {\r\n            config.outputAnimation = spec.output_animation;\r\n            if(!spec.output_animation){\r\n                document.body.classList.add('no-animation');\r\n            }else{\r\n                document.body.classList.remove('no-animation');\r\n            }\r\n        }\r\n\r\n        if (spec.http_pull_interval !== undefined) {\r\n            if (state.CurrentSession instanceof HttpSession)\r\n                state.CurrentSession.change_pull_interval(spec.http_pull_interval);\r\n        }\r\n\r\n        if (spec.input_panel_min_height !== undefined) {\r\n            state.InputPanelMinHeight = spec.input_panel_min_height;\r\n        }\r\n\r\n        if (spec.input_panel_init_height !== undefined) {\r\n            state.InputPanelInitHeight = spec.input_panel_init_height;\r\n        }\r\n\r\n        if (spec.input_panel_fixed !== undefined) {\r\n            state.FixedInputPanel = spec.input_panel_fixed;\r\n        }\r\n\r\n        if (spec.input_auto_focus !== undefined) {\r\n            state.AutoFocusOnInput = spec.input_auto_focus;\r\n        }\r\n\r\n        if (spec.output_max_width !== undefined) {\r\n            $('#output-container').css('max-width', spec.output_max_width);\r\n        }\r\n    }\r\n}","import {Command, Session} from \"../session\";\r\nimport {error_alert, LRUMap, make_set, serialize_json, serialize_file} from \"../utils\";\r\nimport {InputItem} from \"../models/input/base\"\r\nimport {state} from '../state'\r\nimport {all_input_items} from \"../models/input\"\r\nimport {CommandHandler} from \"./base\"\r\nimport {close_input, show_input} from \"../ui\";\r\nimport {t} from \"../i18n\";\r\n\r\n/*\r\n* 整个输入区域的控制类\r\n* 管理当前活跃和非活跃的表单\r\n* */\r\nexport class InputHandler implements CommandHandler {\r\n    accept_command: string[] = ['input', 'input_group', 'update_input', 'destroy_form'];\r\n\r\n    session: Session;\r\n    private form_ctrls: LRUMap; // task_id -> stack of FormGroupController\r\n    private readonly container_elem: JQuery;\r\n\r\n    constructor(session: Session, container_elem: JQuery) {\r\n        this.session = session;\r\n        this.container_elem = container_elem;\r\n        this.form_ctrls = new LRUMap(); // task_id -> stack of FormGroupController\r\n    }\r\n\r\n    private _after_show_form() {\r\n        // 解决表单显示后动态添加内容，表单宽高不变的问题\r\n        setTimeout(() => {\r\n            let curr_card = $('#input-cards > .card')[0];\r\n            curr_card.style.height = \"unset\";\r\n            curr_card.style.width = \"unset\";\r\n        }, 50);\r\n\r\n        show_input();\r\n\r\n        let old_ctrls = this.form_ctrls.get_top();\r\n        if (old_ctrls)\r\n            old_ctrls[old_ctrls.length - 1].after_show();\r\n\r\n        if (state.AutoFocusOnInput)\r\n            $('[auto_focus=\"true\"]').focus();\r\n    };\r\n\r\n    // hide old_ctrls显示的表单，激活 task_id 对应的表单\r\n    // 需要保证 task_id 对应有表单\r\n    private _activate_form(task_id: string, old_ctrl: InputItem) {\r\n        let ctrls = this.form_ctrls.get_value(task_id);\r\n        let ctrl = ctrls[ctrls.length - 1];\r\n        if (ctrl === old_ctrl || old_ctrl === undefined) {\r\n            return ctrl.element.show(state.ShowDuration, () => {\r\n                this._after_show_form()\r\n            });\r\n        }\r\n        this.form_ctrls.move_to_top(task_id);\r\n        old_ctrl.element.hide(100, () => {\r\n            // ctrl.element.show(100);\r\n            // 需要在回调中重新获取当前前置表单元素，因为100ms内可能有变化\r\n            let t = this.form_ctrls.get_top();\r\n            if (t) t[t.length - 1].element.show(state.ShowDuration, () => {\r\n                this._after_show_form()\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    /*\r\n    * 每次函数调用返回后，this.form_ctrls.get_top()的栈顶对应的表单为当前活跃表单\r\n    * */\r\n    handle_message(msg: Command) {\r\n        let old_ctrls = this.form_ctrls.get_top();\r\n        let old_ctrl = old_ctrls && old_ctrls[old_ctrls.length - 1];\r\n        let target_ctrls = this.form_ctrls.get_value(msg.task_id);\r\n        if (target_ctrls === undefined) {\r\n            this.form_ctrls.push(msg.task_id, []);\r\n            target_ctrls = this.form_ctrls.get_value(msg.task_id);\r\n        }\r\n\r\n        // 创建表单\r\n        if (msg.command in make_set(['input', 'input_group'])) {\r\n            let ctrl = new FormController(this.session, msg.task_id, msg.spec);\r\n            target_ctrls.push(ctrl);\r\n            this.container_elem.append(ctrl.create_element());\r\n            ctrl.after_add_to_dom();\r\n            this._activate_form(msg.task_id, old_ctrl);\r\n        } else if (msg.command in make_set(['update_input'])) {\r\n            // 更新表单\r\n            if (target_ctrls.length === 0) {\r\n                return console.error('No form to current message. task_id:%s', msg.task_id);\r\n            }\r\n            target_ctrls[target_ctrls.length - 1].dispatch_ctrl_message(msg.spec);\r\n            // 表单前置 removed\r\n            // this._activate_form(msg.task_id, old_ctrl);\r\n        } else if (msg.command === 'destroy_form') {\r\n            if (target_ctrls.length === 0) {\r\n                return console.error('No form to current message. task_id:%s', msg.task_id);\r\n            }\r\n            let deleted = target_ctrls.pop() as FormController;\r\n            if (target_ctrls.length === 0)\r\n                this.form_ctrls.remove(msg.task_id);\r\n\r\n            // 销毁的是当前显示的form\r\n            if (old_ctrls === target_ctrls) {\r\n                deleted.element.hide(100, () => {\r\n                    deleted.element.remove();\r\n                    close_input();\r\n\r\n                    let t = this.form_ctrls.get_top();\r\n                    if (t) t[t.length - 1].element.show(state.ShowDuration, () => {\r\n                        this._after_show_form()\r\n                    });\r\n                });\r\n            } else {\r\n                deleted.element.remove();\r\n                close_input();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/*\r\n* 表单控制器\r\n* */\r\nclass FormController {\r\n    static input_items: { [input_type: string]: typeof InputItem } = {};\r\n\r\n    session: Session;\r\n\r\n    element: JQuery = null;\r\n\r\n    private task_id: string;\r\n    private spec: any;\r\n    // name -> input_controller\r\n    private name2input: { [i: string]: InputItem } = {};\r\n    private show_count: number = 0;\r\n\r\n    public static register_inputitem(cls: typeof InputItem) {\r\n        for (let type of cls.accept_input_types) {\r\n            if (type in this.input_items)\r\n                throw new Error(`duplicated accept_input_types:[${type}] in ${cls} and ${this.input_items[type]}`);\r\n            this.input_items[type] = cls;\r\n        }\r\n    }\r\n\r\n    constructor(session: Session, task_id: string, spec: any) {\r\n        this.session = session;\r\n        this.task_id = task_id;\r\n        this.spec = spec;\r\n\r\n        // this.create_element();\r\n    }\r\n\r\n\r\n    create_element(): JQuery {\r\n        let tpl = `\r\n            <div class=\"card\" style=\"display: none\">\r\n                <h5 class=\"card-header\">{{label}}</h5>\r\n                <div class=\"card-body\">\r\n                    <form>\r\n                        <div class=\"input-container\"></div>\r\n                        <div class=\"ws-form-submit-btns\">\r\n                            <button type=\"submit\" class=\"btn btn-primary\">${t(\"submit\")}</button>\r\n                            <button type=\"reset\" class=\"btn btn-warning\">${t(\"reset\")}</button>\r\n                            {{#cancelable}}<button type=\"button\" class=\"pywebio_cancel_btn btn btn-danger\">${t(\"cancel\")}</button>{{/cancelable}}\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>`;\r\n        let that = this;\r\n\r\n        const html = Mustache.render(tpl, {label: this.spec.label, cancelable: this.spec.cancelable});\r\n        let element = $(html);\r\n\r\n        element.find('.pywebio_cancel_btn').on('click', function (e) {\r\n            element.find('button').prop(\"disabled\", true);\r\n            that.session.send_message({\r\n                event: \"from_cancel\",\r\n                task_id: that.task_id,\r\n                data: null\r\n            });\r\n        });\r\n\r\n        // 隐藏默认的\"提交\"/\"重置\"按钮\r\n        if (this.spec.inputs.length && this.spec.inputs[this.spec.inputs.length - 1].type === 'actions') {\r\n            for (let btn of this.spec.inputs[this.spec.inputs.length - 1].buttons) {\r\n                if (btn.type === 'submit') {\r\n                    element.find('.ws-form-submit-btns').hide();\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // 输入控件创建\r\n        let body = element.find('.input-container');\r\n        for (let idx in this.spec.inputs) {\r\n            let input_spec = this.spec.inputs[idx];\r\n            if (!(input_spec.type in FormController.input_items))\r\n                throw new Error(`Unknown input type '${input_spec.type}'`);\r\n            let item_class = FormController.input_items[input_spec.type];\r\n            let item = new item_class(input_spec, this.task_id, (event, input_item) => {\r\n                this.session.send_message({\r\n                    event: \"input_event\",\r\n                    task_id: this.task_id,\r\n                    data: {\r\n                        event_name: event,\r\n                        name: input_spec.name,\r\n                        value: input_item.get_value()\r\n                    }\r\n                });\r\n            });\r\n            this.name2input[input_spec.name] = item;\r\n\r\n            body.append(item.create_element());\r\n        }\r\n\r\n        element.on('reset', 'form', function (e) {\r\n            for (let name in that.name2input) {\r\n                that.name2input[name].on_reset(e);\r\n            }\r\n        });\r\n\r\n        // submit event\r\n        element.on('submit', 'form', function (e) {\r\n            e.preventDefault(); // avoid to execute the actual submit of the form.\r\n\r\n            element.find('button').prop(\"disabled\", true);\r\n\r\n            for (let name in that.name2input) {\r\n                if (!that.name2input[name].check_valid()) {\r\n                    element.find('button').prop(\"disabled\", false);\r\n                    return error_alert(t(\"error_in_input\"));\r\n                }\r\n            }\r\n\r\n\r\n            let input_names: string[] = [];\r\n            let input_values: any[] = [];\r\n            $.each(that.name2input, (name, ctrl) => {\r\n                input_names.push(name as string);\r\n                input_values.push(ctrl.get_value());\r\n            });\r\n\r\n            let on_process = (loaded: number, total: number) => {\r\n            };\r\n            // show process bar when there is a file input field\r\n            for (let item of that.spec.inputs) {\r\n                if (item.type == 'file') {\r\n                    on_process = that.make_progress();\r\n                    break;\r\n                }\r\n            }\r\n            Promise.all(input_values).then((values) => {\r\n                let input_data: { [i: string]: any } = {};\r\n                let files: Blob[] = [];\r\n                for (let idx in input_names) {\r\n                    let name = input_names[idx], value = values[idx];\r\n                    input_data[name] = value;\r\n                    if (that.spec.inputs[idx].type == 'file') {\r\n                        input_data[name] = value.multiple ? [] : null;\r\n                        value.files.forEach((file: File) => {\r\n                            files.push(serialize_file(file, name))\r\n                        });\r\n                    }\r\n                }\r\n                let msg = {\r\n                    event: \"from_submit\",\r\n                    task_id: that.task_id,\r\n                    data: input_data\r\n                };\r\n                if (files.length) {\r\n                    // see also: `py:pywebio.platform.utils.deserialize_binary_event()`\r\n                    that.session.send_buffer(new Blob([serialize_json(msg), ...files], {type: 'application/octet-stream'}), on_process);\r\n                } else {\r\n                    that.session.send_message(msg, on_process);\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        this.element = element;\r\n        return element;\r\n    };\r\n\r\n    // 显示提交进度条，返回进度更新函数\r\n    make_progress() {\r\n        let html = `<div class=\"progress\" style=\"margin-top: 4px;\">\r\n                        <div class=\"progress-bar bg-info progress-bar-striped progress-bar-animated\" role=\"progressbar\"\r\n                             style=\"width: 0%;\" aria-valuenow=\"0\" aria-valuemin=\"0\" aria-valuemax=\"100\">0%\r\n                        </div>\r\n                    </div>`;\r\n        let elem = $(html);\r\n        this.element.find('.card-body').append(elem);\r\n\r\n        let bar = elem.find('.progress-bar');\r\n        return function (loaded: number, total: number) {\r\n            let progress = \"\" + (100.0 * loaded / total).toFixed(1);\r\n            bar[0].style.width = progress + \"%\";\r\n            bar.attr(\"aria-valuenow\", progress);\r\n            bar.text(progress + \"%\");\r\n        }\r\n    };\r\n\r\n    dispatch_ctrl_message(spec: any) {\r\n        // 恢复原本可点击的按钮\r\n        this.element.find('button:not([data-pywebio-disabled])').prop(\"disabled\", false);\r\n        // 移除上传进度条\r\n        this.element.find('.progress').remove();\r\n\r\n        if (!(spec.target_name in this.name2input)) {\r\n            return console.error('Can\\'t find input[name=%s] element in curr form!', spec.target_name);\r\n        }\r\n\r\n        this.name2input[spec.target_name].update_input(spec);\r\n    };\r\n\r\n    // 在表单加入DOM树后，触发输入项的on_add_to_dom回调\r\n    after_add_to_dom() {\r\n        for (let name in this.name2input) {\r\n            this.name2input[name].after_add_to_dom();\r\n        }\r\n    }\r\n\r\n    // 在表单被显示后，触发输入项的after_show回调\r\n    after_show() {\r\n        for (let name in this.name2input) {\r\n            this.name2input[name].after_show(this.show_count === 0);\r\n        }\r\n        this.show_count += 1;\r\n    }\r\n}\r\n\r\nfor (let item of all_input_items)\r\n    FormController.register_inputitem(item);","import {Command, Session} from \"../session\";\r\nimport {config, state} from '../state'\r\nimport {body_scroll_to} from \"../utils\";\r\n\r\nimport {getWidgetElement} from \"../models/output\"\r\nimport {CommandHandler} from \"./base\";\r\n\r\nconst DISPLAY_NONE_TAGS = ['script', 'style'];\r\n\r\nlet after_show_callbacks: (() => void) [] = [];\r\n\r\n// register a callback to execute after the current output widget showing\r\nexport function AfterCurrentOutputWidgetShow(callback: () => void) {\r\n    after_show_callbacks.push(callback);\r\n}\r\n\r\nexport function trigger_output_widget_show_event() {\r\n    for (let cb of after_show_callbacks) {\r\n        try {\r\n            cb.call(this);\r\n        } catch (e) {\r\n            console.error('Error in callback of pin widget show event.');\r\n        }\r\n    }\r\n    after_show_callbacks = [];\r\n}\r\n\r\nexport class OutputHandler implements CommandHandler {\r\n    session: Session;\r\n\r\n    accept_command = ['output', 'output_ctl'];\r\n\r\n    private readonly container_parent: JQuery;\r\n    private readonly container_elem: JQuery;\r\n\r\n    constructor(session: Session, container_elem: JQuery) {\r\n        this.session = session;\r\n        this.container_elem = container_elem;\r\n        this.container_parent = this.container_elem.parent();\r\n    }\r\n\r\n    scroll_bottom() {\r\n        body_scroll_to($('.pywebio'), 'bottom', null, 15);\r\n    };\r\n\r\n    is_elem_visible(elem: JQuery) {\r\n        try {\r\n            return DISPLAY_NONE_TAGS.indexOf(elem[0].tagName.toLowerCase()) == -1;\r\n        } catch (e) {\r\n        }\r\n        return false;\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        let output_to_root = false;\r\n        if (msg.command === 'output') {\r\n            let elem;\r\n            try {\r\n                elem = getWidgetElement(msg.spec);\r\n            } catch (e) {\r\n                return console.error(`Handle command error: \"${e}\"\\nCommand:\\n${JSON.stringify(msg)}`);\r\n            }\r\n\r\n            let container_elem = $(msg.spec.scope);\r\n\r\n            if (config.outputAnimation && this.is_elem_visible(elem) && container_elem.length == 1) elem.hide();\r\n\r\n            if (container_elem.length === 0)\r\n                return console.error(`Scope '${msg.spec.scope}' not found`);\r\n\r\n            if (!msg.spec.scope || msg.spec.scope === '#pywebio-scope-ROOT') output_to_root = true;\r\n\r\n            if (msg.spec.position === 0)\r\n                container_elem.prepend(elem);\r\n            else if (msg.spec.position === -1)\r\n                container_elem.append(elem);\r\n            else {\r\n                for (let con of container_elem) {\r\n                    let pos = $(con.children).eq(msg.spec.position);\r\n                    if (msg.spec.position >= 0)\r\n                        elem.insertBefore(pos);\r\n                    else\r\n                        elem.insertAfter(pos);\r\n                }\r\n            }\r\n\r\n            // to avoid widget width exceeding page width\r\n            // show horizon scroll bar when content too wide\r\n            if (elem.width() > this.container_elem.width())\r\n                elem.wrap($(document.createElement('div')).css('overflow', 'auto'));\r\n\r\n            if (this.is_elem_visible(elem) && container_elem.length == 1) {  // 输出内容为可见标签且输出目的scope唯一\r\n                if (config.outputAnimation)\r\n                    elem.fadeIn({\r\n                        complete: () => {\r\n                            // 当设置了AutoScrollBottom、并且当前输出输出到页面末尾时，滚动到底部\r\n                            if (state.AutoScrollBottom && output_to_root)\r\n                                this.scroll_bottom();\r\n                        }\r\n                    });\r\n                else if (state.AutoScrollBottom && output_to_root)\r\n                    this.scroll_bottom();\r\n            }\r\n            trigger_output_widget_show_event();\r\n        } else if (msg.command === 'output_ctl') {\r\n            this.handle_output_ctl(msg);\r\n        }\r\n    };\r\n\r\n    handle_output_ctl(msg: Command) {\r\n        if (msg.spec.set_scope !== undefined) {\r\n            let spec = msg.spec as {\r\n                set_scope: string, // scope名\r\n                container: string, // 此scope的父scope\r\n                position: number, // 在父scope中创建此scope的位置 0 -> 在父scope的顶部创建, -1 -> 在父scope的尾部创建\r\n                if_exist: string // 已经存在 ``name`` scope 时如何操作:  `'remove'` 表示先移除旧scope再创建新scope, `'clear'` 表示将旧scope的内容清除，不创建新scope，null/不指定时表示立即返回不进行任何操作\r\n            };\r\n\r\n            let container_elem = $(`${spec.container}`);\r\n            if (container_elem.length === 0)\r\n                return console.error(`Scope '${msg.spec.scope}' not found`);\r\n\r\n            let old = $(`#${spec.set_scope}`);\r\n            if (old.length) {\r\n                if (spec.if_exist == 'remove')\r\n                    old.remove();\r\n                else if (spec.if_exist == 'clear') {\r\n                    old.empty();\r\n                    return;\r\n                } else if (spec.if_exist == 'blank') { // Clear the contents of the old scope and keep the height\r\n                    let scope_css: any = {'min-height': old.height()};\r\n                    let prev = old.prev(), next = old.next();\r\n                    if (prev.length)\r\n                        scope_css['margin-top'] = old[0].getBoundingClientRect().top - prev[0].getBoundingClientRect().bottom;\r\n                    if (next.length)\r\n                        scope_css['margin-bottom'] = next[0].getBoundingClientRect().top - old[0].getBoundingClientRect().bottom;\r\n                    old.css(scope_css);\r\n                    old.empty();\r\n                    return;\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n            let html = `<div id=\"${spec.set_scope}\"></div>`;\r\n            if (spec.position === 0)\r\n                container_elem.prepend(html);\r\n            else if (spec.position === -1)\r\n                container_elem.append(html);\r\n            else {\r\n                if (spec.position >= 0)\r\n                    $(`${spec.container} > *`).eq(spec.position).insertBefore(html);\r\n                else\r\n                    $(`${spec.container} > *`).eq(spec.position).insertAfter(html);\r\n            }\r\n        }\r\n        if (msg.spec.loose !== undefined) { // revoke the effect of ``set_scope(if_exist='blank')``\r\n            $(msg.spec.loose).css({'min-height': '', 'margin-top': '', 'margin-bottom': ''});\r\n        }\r\n        if (msg.spec.clear !== undefined) {\r\n            $(msg.spec.clear).empty();\r\n        }\r\n        if (msg.spec.clear_before !== undefined)\r\n            $(`${msg.spec.clear_before}`).prevAll().remove();\r\n        if (msg.spec.clear_after !== undefined)\r\n            $(`${msg.spec.clear_after} ~ *`).remove();\r\n        if (msg.spec.scroll_to !== undefined) {\r\n            let target = $(`${msg.spec.scroll_to}`);\r\n            if (!target.length) {\r\n                console.error(`Scope ${msg.spec.scroll_to} not found`);\r\n            } else {\r\n                body_scroll_to(target, msg.spec.position);\r\n            }\r\n        }\r\n        if (msg.spec.clear_range !== undefined) {\r\n            if ($(`${msg.spec.clear_range[0]}`).length &&\r\n                $(`${msg.spec.clear_range[1]}`).length) {\r\n                let removed: HTMLElement[] = [];\r\n                let valid = false;\r\n                $(`${msg.spec.clear_range[0]} ~ *`).each(function () {\r\n                    if (this.id === msg.spec.clear_range[1]) {\r\n                        valid = true;\r\n                        return false;\r\n                    }\r\n                    removed.push(this);\r\n                    // $(this).remove();\r\n                });\r\n                if (valid)\r\n                    $(removed).remove();\r\n                else\r\n                    console.warn(`clear_range not valid: can't find ${msg.spec.clear_range[1]} after ${msg.spec.clear_range[0]}`);\r\n            }\r\n        }\r\n        if (msg.spec.remove !== undefined)\r\n            $(`${msg.spec.remove}`).remove();\r\n    };\r\n\r\n}\r\n","import {ClientEvent, Command, Session} from \"../session\";\r\nimport {CommandHandler} from \"./base\";\r\nimport {GetPinValue, PinChangeCallback, PinUpdate, WaitChange, IsFileInput} from \"../models/pin\";\r\nimport {state} from \"../state\";\r\nimport {serialize_file, serialize_json} from \"../utils\";\r\nimport {t} from \"../i18n\";\r\n\r\n\r\nexport class PinHandler implements CommandHandler {\r\n    session: Session;\r\n\r\n    accept_command = ['pin_value', 'pin_update', 'pin_wait', 'pin_onchange'];\r\n\r\n    constructor(session: Session) {\r\n        this.session = session;\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        if (msg.command === 'pin_value') {\r\n            let val = GetPinValue(msg.spec.name);  // undefined or value\r\n            let send_msg = {\r\n                event: \"js_yield\", task_id: msg.task_id,\r\n                data: val === undefined ? null : {value: val}\r\n            };\r\n            this.submit(send_msg, IsFileInput(msg.spec.name));\r\n        } else if (msg.command === 'pin_update') {\r\n            PinUpdate(msg.spec.name, msg.spec.attributes);\r\n        } else if (msg.command === 'pin_wait') {\r\n            let p = WaitChange(msg.spec.names, msg.spec.timeout);\r\n            Promise.resolve(p).then((change_info: (null | { name: string, value: any })) => {\r\n                // change_info: null or {'name': name, 'value': value}\r\n                let send_msg = {event: \"js_yield\", task_id: msg.task_id, data: change_info}\r\n                this.submit(send_msg, IsFileInput(change_info.name));\r\n            }).catch((error) => {\r\n                console.error('error in `pin_wait`: %s', error);\r\n                this.submit({event: \"js_yield\", task_id: msg.task_id, data: null});\r\n            });\r\n        } else if (msg.command === 'pin_onchange') {\r\n            let onchange = (val: any) => {\r\n                let send_msg = {\r\n                    event: \"callback\",\r\n                    task_id: msg.spec.callback_id,\r\n                    data: {value: val}\r\n                }\r\n                this.submit(send_msg, IsFileInput(msg.spec.name));\r\n            }\r\n            PinChangeCallback(msg.spec.name, msg.spec.callback_id ? onchange : null, msg.spec.clear);\r\n        }\r\n    }\r\n\r\n    /*\r\n    * Send pin value to server.\r\n    * `msg.data` may be null, or {value: any, ...}\r\n    * `msg.data.value` stores the value of the pin.\r\n    * when submit files, `msg.data.value` is {multiple: bool, files: File[] }\r\n    * */\r\n    submit(msg: ClientEvent, is_file: boolean = false) {\r\n        if (is_file && msg.data !== null) {\r\n            // msg.data.value: {multiple: bool, files: File[]}\r\n            let {multiple, files} = msg.data.value;\r\n            msg.data.value = multiple ? [] : null; // replace file value with initial value\r\n\r\n            let toast = Toastify({\r\n                text: `⏳${t(\"file_uploading\")} 0%`,\r\n                duration: -1,\r\n                gravity: \"top\",\r\n                position: 'center',\r\n                backgroundColor: '#1565c0',\r\n            });\r\n            if (files.length > 0) toast.showToast();\r\n            state.CurrentSession.send_buffer(\r\n                new Blob([\r\n                    serialize_json(msg),\r\n                    ...files.map((file: File) => serialize_file(file, 'value'))\r\n                ], {type: 'application/octet-stream'}),\r\n                (loaded: number, total: number) => {\r\n                    toast.toastElement.innerText = `⏳${t(\"file_uploading\")} ${(loaded / total).toFixed(2)}%`;\r\n                    if (total - loaded < 100) toast.hideToast();\r\n                }\r\n            );\r\n\r\n        } else {\r\n            state.CurrentSession.send_message(msg);\r\n        }\r\n    }\r\n}","import {Command, Session} from \"../session\";\r\n\r\nimport {render_tpl} from \"../models/output\"\r\nimport {CommandHandler} from \"./base\";\r\nimport {trigger_output_widget_show_event} from \"./output\";\r\n\r\n\r\nexport class PopupHandler implements CommandHandler {\r\n    session: Session;\r\n\r\n    accept_command = ['popup', 'close_popup'];\r\n\r\n    private body = $('body');\r\n\r\n    constructor(session: Session) {\r\n        this.session = session;\r\n    }\r\n\r\n    static current_elem: JQuery<JQuery.Node> = null;  // 当前正在处于显示中的弹窗元素，表示页面的期望状态\r\n\r\n    handle_message(msg: Command) {\r\n        if (PopupHandler.current_elem) {\r\n            // @ts-ignore\r\n            PopupHandler.current_elem.modal('hide');\r\n            PopupHandler.current_elem = null;\r\n        }\r\n\r\n        if (msg.command == 'popup') {\r\n            // 显示弹窗前，先关闭其他弹窗\r\n            // @ts-ignore\r\n            $('.modal').modal('hide');\r\n\r\n            let elem = PopupHandler.get_element(msg.spec);\r\n            this.body.append(elem);\r\n            trigger_output_widget_show_event();\r\n\r\n            // 弹窗关闭后就立即销毁\r\n            elem.on('hidden.bs.modal', function (e) {\r\n                elem.remove();\r\n            });\r\n\r\n            elem.on('shown.bs.modal', function (e) {\r\n                // 弹窗显示后，有新弹窗出现或当前弹窗被关闭，则立即关闭当前弹窗\r\n                if (elem != PopupHandler.current_elem || !PopupHandler.current_elem) {\r\n                    // @ts-ignore\r\n                    elem.modal('hide');\r\n                }\r\n            });\r\n\r\n            // @ts-ignore\r\n            elem.modal('show');\r\n            PopupHandler.current_elem = elem;\r\n        } else if (msg.command == 'close_popup') {\r\n            // @ts-ignore\r\n            $('.modal').modal('hide');\r\n            PopupHandler.current_elem = null;\r\n        }\r\n    }\r\n\r\n    static get_element(spec: { title: string, content: any[], closable: boolean, implicit_close: boolean, size: string }) {\r\n        // https://v4.bootcss.com/docs/components/modal/#options\r\n        const tpl = `<div class=\"modal fade\" {{^implicit_close}}data-backdrop=\"static\"{{/implicit_close}} aria-labelledby=\"model-id-{{ dom_id }}\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\r\n          <div class=\"modal-dialog {{#large}}modal-lg{{/large}} {{#small}}modal-sm{{/small}}\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"model-id-{{ mid }}\">{{ title }}</h5>\r\n                {{#closable}}\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n                {{/closable}}\r\n              </div>\r\n              <div class=\"modal-body markdown-body\" id=\"{{ dom_id }}\">\r\n                {{#content}}\r\n                    {{& pywebio_output_parse}}\r\n                {{/content}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>`;\r\n\r\n        if (!spec.closable)\r\n            spec.implicit_close = false;\r\n\r\n        return render_tpl(tpl, {\r\n            ...spec,  // 字段： content, title, size, implicit_close, closable, dom_id\r\n            large: spec.size == 'large',\r\n            small: spec.size == 'small',\r\n        });\r\n    }\r\n\r\n}","import {Command, Session} from \"../session\";\r\nimport {CommandHandler} from \"./base\";\r\nimport {state} from \"../state\";\r\n\r\n\r\nexport class ScriptHandler implements CommandHandler {\r\n    session: Session;\r\n\r\n    accept_command = ['run_script'];\r\n\r\n    constructor(session: Session) {\r\n        this.session = session;\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        let script = msg.spec.code as string;\r\n        let args = msg.spec.args as { [i: string]: any };\r\n\r\n        let arg_names: string[] = [];\r\n        let arg_vals: any[] = [];\r\n\r\n        for (let key in args) {\r\n            arg_names.push(key);\r\n            arg_vals.push(args[key]);\r\n        }\r\n\r\n        let res = null;\r\n        script = `return eval(${JSON.stringify(script)})`;  // lgtm [js/bad-code-sanitization]\r\n        try {\r\n            const script_func = new Function(...arg_names, script);\r\n            res = script_func(...arg_vals);\r\n        } catch (e) {\r\n            console.log('Exception occurred in user code of `run_script` command: \\n%s', e);\r\n        }\r\n        if (msg.spec.eval) {\r\n            // credit: https://stackoverflow.com/questions/27746304/how-do-i-tell-if-an-object-is-a-promise\r\n            Promise.resolve(res).then(function (value) {\r\n                state.CurrentSession.send_message({\r\n                    event: \"js_yield\",\r\n                    task_id: msg.task_id,\r\n                    data: value === undefined ? null : value\r\n                });\r\n            }).catch((error) => {\r\n                console.log('Exception occurred in user code of `run_script` command: \\n%s', error);\r\n                state.CurrentSession.send_message({event: \"js_yield\", task_id: msg.task_id, data: null});\r\n            });\r\n        }\r\n    }\r\n}","import {Command} from \"../session\";\r\nimport {CommandHandler} from \"./base\";\r\nimport {state} from \"../state\";\r\n\r\nexport class ToastHandler implements CommandHandler {\r\n    accept_command: string[] = ['toast'];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    handle_message(msg: Command) {\r\n        let spec = msg.spec;\r\n        let toast = Toastify({\r\n            text: Mustache.escape(spec.content),\r\n            duration: spec.duration === 0 ? -1 : spec.duration,  // -1 for permanent toast\r\n            close: spec.duration === 0,//To show the close icon or not\r\n            gravity: \"top\", // `top` or `bottom`\r\n            position: spec.position, // `left`, `center` or `right`\r\n            backgroundColor: spec.color,\r\n            stopOnFocus: true, // Prevents dismissing of toast on hover\r\n            onClick: function () {\r\n                if (!spec.callback_id)\r\n                    return;\r\n\r\n                if (state.CurrentSession === null)\r\n                    return console.error(\"Error: WebIOController is not instantiated\");\r\n                state.CurrentSession.send_message({\r\n                    event: \"callback\",\r\n                    task_id: spec.callback_id,\r\n                    data: null\r\n                });\r\n                toast.hideToast();\r\n            }\r\n        });\r\n        toast.showToast();\r\n    }\r\n}","// @ts-ignore\r\nconst userLangCode: string = (navigator.language || navigator.userLanguage || 'en').toLowerCase();\r\n\r\nconst langPrefix: string = userLangCode.split('-')[0];\r\n\r\nexport let customMessage: { [msgid: string]: string } = {};\r\n\r\nconst translations: { [lang: string]: { [msgid: string]: string } } = {\r\n    \"en\": {\r\n        \"disconnected_with_server\": \"Disconnected from the server, please refresh the page\",\r\n        \"connect_fail\": \"Failed to connect to server!\",\r\n        \"error_in_input\": \"There is an error with the input, please fix the error first\",\r\n        \"file_size_exceed\": 'File \"%1\" size exceeds limit: the size of a single file must not exceed %2',\r\n        \"file_total_size_exceed\": \"The total file size exceeds the limit: the total file size must not exceed %1\",\r\n        \"submit\": \"Submit\",\r\n        \"reset\": \"Reset\",\r\n        \"cancel\": \"Cancel\",\r\n        \"duplicated_pin_name\": \"This pin widget has expired (due to the output of a new pin widget with the same name).\",\r\n        \"browse_file\": \"Browse\",\r\n        \"duplicated_scope_name\": \"Error: The name of this scope is duplicated with the previous one!\",\r\n        \"file_uploading\": \"File Uploading...\",\r\n    },\r\n    \"zh\": {\r\n        \"disconnected_with_server\": \"与服务器连接已断开，请刷新页面重新操作\",\r\n        \"connect_fail\": \"连接服务器失败!\",\r\n        \"error_in_input\": \"输入项存在错误，请消除错误后再提交\",\r\n        \"file_size_exceed\": '文件\"%1\"大小超过限制: 单个文件大小不超过%2',\r\n        \"file_total_size_exceed\": \"文件总大小超过限制: 文件总大小不超过%1\",\r\n        \"submit\": \"提交\",\r\n        \"reset\": \"重置\",\r\n        \"cancel\": \"取消\",\r\n        \"duplicated_pin_name\": \"该 Pin widget 已失效（由于输出了新的同名 pin widget）\",\r\n        \"browse_file\": \"浏览文件\",\r\n        \"duplicated_scope_name\": \"错误: 此scope与已有scope重复!\",\r\n        \"file_uploading\": \"文件上传中\",\r\n    },\r\n    \"ru\": {\r\n        \"disconnected_with_server\": \"Соединение с сервером потеряно, пожалуйста перезагрузите страницу\",\r\n        \"connect_fail\": \"Ошибка подключения к серверу!\",\r\n        \"error_in_input\": \"Пожалуйста, сначала исправьте ошибку\",\r\n        \"file_size_exceed\": 'Файл \"%1\" весит слишком много: максимально допустимый размер файла - %2',\r\n        \"file_total_size_exceed\": \"Общий размер файлов превышен: максимально допустимый объем - %1\",\r\n        \"submit\": \"Отправить\",\r\n        \"reset\": \"Сброс\",\r\n        \"cancel\": \"Отмена\",\r\n        \"duplicated_pin_name\": \"Этот закреп виджет устарел (виджет с таким же именем был выведен).\",\r\n        \"browse_file\": \"Обзор\",\r\n\r\n    },\r\n    \"de\": {\r\n        \"disconnected_with_server\": \"Verbindung zum Server unterbrochen. Bitte laden Sie die Seite neu.\",\r\n        \"connect_fail\": \"Verbindung zum Server nicht möglich!\",\r\n        \"error_in_input\": \"Die Eingabe ist fehlerhaft. Bitte beheben Sie zuerst den Fehler.\",\r\n        \"file_size_exceed\": 'Die Größe der Datei \"%1\" überschreitet das zulässige Maximum: eine einzelne Datei darf nicht größer sein als %2.',\r\n        \"file_total_size_exceed\": \"Die Gesamtdateigröße überschreitet das zulässige Maximum: alle Dateien zusammen dürfen nicht größer sein als %1.\",\r\n        \"submit\": \"Übermitteln\",\r\n        \"reset\": \"Zurücksetzen\",\r\n        \"cancel\": \"Abbrechen\",\r\n        \"duplicated_pin_name\": \"Dieses Pin-Widget ist nicht mehr gültig (Grund: Der Output enthält ein neues Pin-Widget mit dem gleichen Namen).\",\r\n        \"browse_file\": \"Durchsuchen\",\r\n        \"duplicated_scope_name\": \"Fehler: Der Name dieses Scopes ist mit dem vorhergehenden identisch!\",\r\n    },\r\n    \"fa\": {\r\n        \"disconnected_with_server\": \"اتصال به سرور قطع شده است، لطفا صفحه را رفرش کنید\",\r\n        \"connect_fail\": \"ناموفق در اتصال به سرور!\",\r\n        \"error_in_input\": \"یک خطا با ورودی وجود دارد، لطفا ابتدا خطا را برطرف کنید\",\r\n        \"file_size_exceed\": 'اندازه فایل \"%1\" از حد مجاز بیشتر است: اندازه یک فایل تکی نباید از %2 بیشتر باشد',\r\n        \"file_total_size_exceed\": \"اندازه کلی فایل از حد مجاز بیشتر است: اندازه کلی فایل نباید از %1 بیشتر باشد\",\r\n        \"submit\": \"ارسال\",\r\n        \"reset\": \"بازنشانی\",\r\n        \"cancel\": \"لغو\",\r\n        \"duplicated_pin_name\": \"این Pin Widget منقضی شده است (به دلیل خروجی یک Pin Widget جدید با نام یکسان)\",\r\n        \"browse_file\": \"مرور\",\r\n        \"duplicated_scope_name\": \"خطا: نام این Scope با نام قبلی تکراری است!\",\r\n    },\r\n    \"uz\": {\r\n        \"disconnected_with_server\": \"Server aloqasi uzildi, sahifani qayta yuklang\",\r\n        \"connect_fail\": \"Serverga ulanib bo‘lmadi!\",\r\n        \"error_in_input\": \"Iltimos, avval ma‘lumotlarni kiritish bilan bog‘liq xatoni tuzating\",\r\n        \"file_size_exceed\": '“%1” fayl hajmi cheklamadan oshib ketdi: ruxsat etilgan maksimal fayl hajmi - %2',\r\n        \"file_total_size_exceed\": \"Umumiy fayllar hajmi cheklamadan oshib ketdi: umumiy fayllar hajmi %1 dan oshmasligi kerak\",\r\n        \"submit\": \"Yuborish\",\r\n        \"reset\": \"Qaytadan\",\r\n        \"cancel\": \"Bekor qilish\",\r\n        \"duplicated_pin_name\": \"Bu pin widget muddati tugagan (xuddi shu nomdagi yangi pin widget chiqishi tufayli).\",\r\n        \"browse_file\": \"Fayl yuklash\",\r\n        \"duplicated_scope_name\": \"Xatolik: Ushbu Scope nomi avvalgisi bilan takrorlangan!\",\r\n    },\r\n};\r\n\r\ntranslations['custom'] = customMessage // use to customize the message text.\r\n\r\n// sprintf equivalent, takes a string and some arguments to make a computed string\r\n// eg: strfmt(\"%1 dogs are in %2\", 7, \"the kitchen\"); => \"7 dogs are in the kitchen\"\r\n// eg: strfmt(\"I like %1, bananas and %1\", \"apples\"); => \"I like apples, bananas and apples\"\r\nfunction strfmt(fmt: string) {\r\n    let args = arguments;\r\n\r\n    return fmt\r\n        // put space after double % to prevent placeholder replacement of such matches\r\n        .replace(/%%/g, '%% ')\r\n        // replace placeholders\r\n        .replace(/%(\\d+)/g, function (str, p1) {\r\n            return args[p1];\r\n        })\r\n        // replace double % and space with single %\r\n        .replace(/%% /g, '%')\r\n}\r\n\r\nexport function t(msgid: string, ...args: string[]): string {\r\n    let fmt = null;\r\n    for (let lang of ['custom', userLangCode, langPrefix, 'en']) {\r\n        if (translations[lang] && translations[lang][msgid]) {\r\n            fmt = translations[lang][msgid];\r\n            break;\r\n        }\r\n    }\r\n    if (fmt === null)\r\n        throw Error(`No translation for \"${msgid}\" in \"${userLangCode}\"`);\r\n\r\n    return strfmt.apply(null, [fmt, ...args]);\r\n}\r\n","import {config as appConfig, state} from \"./state\";\r\nimport {Command, HttpSession, is_http_backend, Session, WebSocketSession, pushData} from \"./session\";\r\nimport {InputHandler} from \"./handlers/input\"\r\nimport {OutputHandler} from \"./handlers/output\"\r\nimport {CommandDispatcher, SessionCtrlHandler} from \"./handlers/base\"\r\nimport {PopupHandler} from \"./handlers/popup\";\r\nimport {openApp} from \"./utils\";\r\nimport {ScriptHandler} from \"./handlers/script\";\r\nimport {DownloadHandler} from \"./handlers/download\";\r\nimport {ToastHandler} from \"./handlers/toast\";\r\nimport {EnvSettingHandler} from \"./handlers/env\";\r\nimport {PinHandler} from \"./handlers/pin\";\r\nimport {customMessage} from \"./i18n\"\r\n\r\n// 获取后端API的绝对地址\r\nfunction backend_absaddr(addr: string) {\r\n    return new URL(addr, window.location.href).href;\r\n}\r\n\r\n// 初始化Handler和Session\r\nfunction set_up_session(webio_session: Session, output_container_elem: JQuery, input_container_elem: JQuery) {\r\n    state.CurrentSession = webio_session;\r\n    $('#pywebio-loading').show();\r\n    webio_session.on_session_create(function () {\r\n        $('#pywebio-loading').hide();\r\n        $('#favicon32').attr('href', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAwklEQVQ4T63TvU5CQRCG4WcwMfEuqOgNtQ2Nd4CxV2LHtVhJ0N7AHdjQUBtrrLwLA4ks2Rx+/Qucw3Y78807M7sz4ft5dq6mI7RQX7o/JCNzfdfetkNifRk6k9wLN9jYdxMkyZPQ1faZXYUwB/OCix8V/W4Y4zJDCsBAX7jdM7iQJY+udELu+cTrP2X/xU2+NMPAg3B3UPaVOOmFoQkapQC8Z8AUpyUBs6MAKrZQ+RErf2PlQTrKKK8gpZdpewgOXOcFTTxEjYwMoIkAAAAASUVORK5CYII=');\r\n        $('#favicon16').attr('href', 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABmUlEQVRYR82XK0wDQRCGv21TUUUJGBwGDBggGCSGBIcAWnBAgsNAgkKhSMDgCA8HtEXgSDBIDC9DDRgcpoSiKo52yea49DiutMttsz27M/98N7s7OyNo9tujgxSTwDiCIaAXSH27l4AXJA/AFSUuWOajGWnR0ChLP3HWkWSAZEN716CM4JQKW6R5+sunPkCeJJJNBCtAosnAQTMHyS6CDWYoh2mEAxzTR4JzYOCfgYNuBRymmOc5uPAbIMswMS6BbkPBPZkiVSZIc+/X/Qng/vl1C4LXIBzG/JmoAag9hxuDaa+XwAIw6p2JGkCObQSrhtMeLifZYZY1tegCqKsW4zHCadfldqgyqK6oC3DGIZIFXZVI9oIjplkUqArXyatGkYkU1+dc5p0eQY4MghNTqlo6kjkFsI9gScvRlLHkQJDnFhgxpampc6cAikCXpqMp8zcF8AnETSlq6lTaAsD6Flg+hNavofVCZL0UW3+M2uI5VhBWGxIFYL0lUxBWm1KviFttyz0Iq4OJB2F1NPO/qdaG0+DD3qLx/AuMVJFhmC8dSgAAAABJRU5ErkJggg==');\r\n    });\r\n    webio_session.on_session_close(function () {\r\n        $('#favicon32').attr('href', 'data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAByElEQVRYR82XLUzDUBDH/9emYoouYHAYMGCAYJAYEhxiW2EOSOYwkKBQKBIwuIUPN2g7gSPBIDF8GWbA4DAjG2qitEfesi6lbGxlXd5q393/fr333t07QpdfPp8f0nV9CcACEU0DGAOgN9yrAN6Y+QnATbVavcrlcp/dSFMnI9M0J1RV3WHmFQCJTvaN9RoRXbiuu28YxstfPm0BbNtOMPMeEW0C0LoMHDZzmPmIiHbT6XStlUZLgEKhMK5p2iWAyX8GDruVHMdZzmazr+GFXwCmac4oinINYCSm4L5M2fO8RcMwHoO6PwAaf37bh+BNCMdx5oOZaAKIPQdwF2Pa2yWwBGDOPxNNAMuyDohoK+a0t5Rj5sNMJrMtFusA4qopivLcw2mPyu14njclrmgdoFgsnjLzWlSVXuyJ6CyVSq2TqHDJZPI9QpHpJW7Qt1apVEbJsqwVIjqPSzWKDjOvCoBjItqI4hiXLTOfkG3b9wBm4xKNqPMgAMoAhiM6xmX+IQC+AKhxKUbUcQcCQPoWyD2E0q+h9EIkvRRLb0YD0Y4FhNQHiQCQ/iQTEFIfpX4Nl/os9yGkDiY+hNTRLNhSpQ2n4b7er/H8G7N6BRSbHvW5AAAAAElFTkSuQmCC');\r\n        $('#favicon16').attr('href', 'data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA0ElEQVQ4T62TPQrCQBCF30tA8BZW9mJtY+MNEtKr2HkWK0Xtw+4NbGysxVorbyEKyZMNRiSgmJ/tZufNNzO7M0ThxHHc8zxvSnIIoPNyXyXt0zRdR1F0+gxhblhr25IWJMcA3vcFviRtSc6DILg5XyZ0wQB2AAbFir7YBwAjB8kAxpg1ycmfwZlM0iYMwyldz77vH3+U/Y2rJEn6NMYsSc7KZM+1kla01p4BdKsAAFwc4A6gVRHwaARQr4Xaj1j7G2sPUiOjnEMqL9PnDJRd5ycpJXsd2f2NIAAAAABJRU5ErkJggg==');\r\n    });\r\n\r\n    let output_ctrl = new OutputHandler(webio_session, output_container_elem);\r\n    let input_ctrl = new InputHandler(webio_session, input_container_elem);\r\n    let popup_ctrl = new PopupHandler(webio_session);\r\n    let session_ctrl = new SessionCtrlHandler(webio_session);\r\n    let script_ctrl = new ScriptHandler(webio_session);\r\n    let pin_ctrl = new PinHandler(webio_session);\r\n    let download_ctrl = new DownloadHandler();\r\n    let toast_ctrl = new ToastHandler();\r\n    let env_ctrl = new EnvSettingHandler();\r\n\r\n    let dispatcher = new CommandDispatcher(output_ctrl, input_ctrl, popup_ctrl, session_ctrl,\r\n        script_ctrl, download_ctrl, toast_ctrl, env_ctrl, pin_ctrl);\r\n\r\n    webio_session.on_server_message((msg: Command) => {\r\n        try {\r\n            let ok = dispatcher.dispatch_message(msg);\r\n            if (!ok) console.error('Unknown command:%s', msg.command);\r\n        } catch (e) {\r\n            console.error('Error(%s) in dispatch command: %s', e, msg.command);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction startWebIOClient(options: {\r\n    output_container_elem: JQuery,\r\n    input_container_elem: JQuery,\r\n    backend_address: string,\r\n    app_name: string,\r\n    protocol: string, // 'http', 'ws', 'auto'\r\n    runtime_config: { [name: string]: any }\r\n}) {\r\n    for (let key in options.runtime_config) {\r\n        // @ts-ignore\r\n        appConfig[key] = options.runtime_config[key];\r\n    }\r\n    const backend_addr = backend_absaddr(options.backend_address);\r\n\r\n    let start_session = (is_http: boolean) => {\r\n        let session;\r\n        if (is_http)\r\n            session = new HttpSession(backend_addr, options.app_name, appConfig.httpPullInterval);\r\n        else\r\n            session = new WebSocketSession(backend_addr, options.app_name);\r\n        set_up_session(session, options.output_container_elem, options.input_container_elem);\r\n        session.start_session(appConfig.debug);\r\n    };\r\n    if (options.protocol == 'auto')\r\n        is_http_backend(backend_addr).then(start_session);\r\n    else\r\n        start_session(options.protocol == 'http')\r\n}\r\n\r\n\r\n// @ts-ignore\r\nwindow.WebIO = {\r\n    '_state': state,\r\n    'startWebIOClient': startWebIOClient,\r\n    'openApp': openApp,\r\n    'message_tpl': customMessage,\r\n    'pushData': pushData,\r\n};","import {pushData} from \"../session\";\r\n\r\nconst tpl = `<div class=\"webio-datatable\">\r\n<div class=\"ag-theme-{{theme}} ag-grid\" style=\"width: 100%; height: {{height}}\">\r\n    <div class=\"grid-loading\">⌛️ Loading Datatable...</div>\r\n</div>\r\n<div class=\"ag-grid-cell-bar\"></div>\r\n<div class=\"ag-grid-tools\">\r\n    <div class=\"grid-status\">\r\n        <div class=\"select-count\">Selected <span class=\"ag-grid-row-count\">0</span> <span\r\n                class=\"ag-grid-row-unit\">row</span></div>\r\n        <div class=\"grid-unselect\" style=\"display: flex;align-items: center;\">\r\n            <div class=\"sep\"></div>\r\n            <div class=\"act-btn\">Unselect</div>\r\n        </div>\r\n    </div>\r\n    <div class=\"grid-actions\"></div>\r\n</div>\r\n</div>`\r\n\r\nfunction path2field(path: string[]) {\r\n    return [\r\n        path.join(''),\r\n        path.map((p) => p.length).join('_'),\r\n        path.length\r\n    ].join('_');\r\n}\r\n\r\nfunction field2path(field: string) {\r\n    let parts = field.split('_');\r\n    let level = parseInt(parts[parts.length - 1]);\r\n    let path = [];\r\n    let start = 0;\r\n    for (let i = 0; i < level; i++) {\r\n        let len = parseInt(parts[parts.length - 1 - level + i]);\r\n        path.push(field.substring(start, start + len));\r\n        start += len;\r\n    }\r\n    return path;\r\n}\r\n\r\nfunction flatten_row_and_extract_column(\r\n    row: { [field: string]: any },  // origin row\r\n    current_columns: { [field: string]: any },  // used to receive column struct\r\n    row_data: { [field: string]: any }, // used to receive flatten row\r\n    path: string[]\r\n) {\r\n    if (!row) return;\r\n    let keys: string[] = [];\r\n    try {\r\n        keys = Object.keys(row);\r\n    } catch (e) {\r\n    }\r\n    keys.forEach((key: any) => {\r\n        let val = row[key];\r\n        path.push(key);\r\n        if (!(key in current_columns))\r\n            current_columns[key] = {};\r\n        if (val && typeof val == \"object\" && !Array.isArray(val)) {\r\n            flatten_row_and_extract_column(val, current_columns[key], row_data, path);\r\n        } else {\r\n            row_data[path2field(path)] = val;\r\n        }\r\n        path.pop();\r\n    });\r\n}\r\n\r\nfunction flatten_row(row: { [field: string]: any }) {\r\n    let current_columns = {}, row_data = {}, path: string[] = [];\r\n    flatten_row_and_extract_column(row, current_columns, row_data, path);\r\n    return row_data;\r\n}\r\n\r\n/*\r\n* field_args: key -> column_def\r\n* path_args: [(path, column_def), ...]\r\n* */\r\nfunction row_data_and_column_def(\r\n    data: any[],\r\n    field_args: { [field: string]: any },\r\n    path_args: any[][],\r\n    column_order: { [field: string]: any },\r\n) {\r\n    function capitalizeFirstLetter(s: string) {\r\n        return s.charAt(0).toUpperCase() + s.slice(1);\r\n    }\r\n\r\n\r\n    function gen_columns_def(\r\n        current_columns: { [field: string]: any },  // all leaf node is {}\r\n        path: string[],\r\n        field_args: { [field: string]: any },\r\n        path_field_args: { [field: string]: any },\r\n        args_from_parent: { [field: string]: any }\r\n    ) {\r\n        let column_def: any[] = [];\r\n        Object.keys(current_columns).forEach((key) => {\r\n            let val = current_columns[key];\r\n            path.push(key);\r\n            let path_field = path2field(path);\r\n            if (Object.keys(val).length > 0) {\r\n                let extra_args = {\r\n                    ...args_from_parent,\r\n                    ...(path_field_args[path_field] || {}),\r\n                };\r\n                column_def.push({\r\n                    headerName: capitalizeFirstLetter(key.replace(/_/g, \" \")),\r\n                    children: gen_columns_def(val, path, field_args, path_field_args, extra_args)\r\n                });\r\n            } else {\r\n                let column = {\r\n                    headerName: capitalizeFirstLetter(key.replace(/_/g, \" \")),\r\n                    field: path_field,\r\n                    ...args_from_parent,\r\n                    ...(field_args[key] || {}),\r\n                    ...(path_field_args[path_field] || {}),\r\n                };\r\n                column_def.push(column);\r\n            }\r\n            path.pop();\r\n        })\r\n        return column_def;\r\n    }\r\n\r\n    let columns = {};\r\n    let rows = [];\r\n    for (let row of data) {\r\n        let row_data = {};\r\n        flatten_row_and_extract_column(row, columns, row_data, []);\r\n        rows.push(row_data);\r\n    }\r\n    let path_field_args: { [field: string]: any } = {};\r\n    path_args.map(([path, column_def]) => {\r\n        path_field_args[path2field(path)] = column_def\r\n    })\r\n\r\n    if (column_order) {\r\n        // replace all leaf node in column_order to {}\r\n        columns = JSON.parse(\r\n            JSON.stringify(column_order),\r\n            (key, val) => (val && typeof val == \"object\" && !Array.isArray(val)) ? val : {}\r\n        );\r\n\r\n    }\r\n    let column_defs = gen_columns_def(columns, [], field_args, path_field_args, {});\r\n    return {\r\n        rowData: rows,\r\n        columnDefs: column_defs,\r\n    }\r\n}\r\n\r\nfunction parse_js_func(object: any, js_func_key: string) {\r\n    return JSON.parse(JSON.stringify(object), (key, value) => {\r\n        if (\r\n            typeof value === 'object' &&\r\n            value.__pywebio_js_function__ === js_func_key &&\r\n            'params' in value && 'body' in value\r\n        ) {\r\n            try {\r\n                return new Function(...value.params, value.body);\r\n            } catch (e) {\r\n                console.error(\"Parse js function error: %s\", e);\r\n                return null;\r\n            }\r\n        }\r\n        return value;\r\n    })\r\n}\r\n\r\nfunction safe_run(func_name: string, func: any, ...args: any[]) {\r\n    try {\r\n        if (typeof func === 'function')\r\n            func.bind(this)(...args);\r\n    } catch (e) {\r\n        console.error(\"Error on %s function:\\n\", func_name, e);\r\n    }\r\n}\r\n\r\nconst gridDefaultOptions = {\r\n    //https://www.ag-grid.com/javascript-data-grid/row-selection/\r\n    rowMultiSelectWithClick: true,\r\n    groupSelectsChildren: true,\r\n    groupSelectsFiltered: true,\r\n\r\n    // https://www.ag-grid.com/javascript-data-grid/selection-overview/\r\n    enableCellTextSelection: true,\r\n    ensureDomOrder: true,\r\n\r\n    autoGroupColumnDef: {\r\n        pinned: 'left',//force pinned left. Does not work in columnDef\r\n    },\r\n\r\n    // some enterprise config\r\n    enableCharts: true,\r\n    enableRangeSelection: true,\r\n    // animateRows: true, // have rows animate to new positions when sorted\r\n    sideBar: {\r\n        toolPanels: [\r\n            {\r\n                id: 'columns',\r\n                labelDefault: 'Columns',\r\n                labelKey: 'columns',\r\n                iconKey: 'columns',\r\n                toolPanel: 'agColumnsToolPanel',\r\n                minWidth: 225,\r\n                width: 290,\r\n                maxWidth: 400,\r\n            },\r\n            {\r\n                id: 'filters',\r\n                labelDefault: 'Filters',\r\n                labelKey: 'filters',\r\n                iconKey: 'filter',\r\n                toolPanel: 'agFiltersToolPanel',\r\n                minWidth: 180,\r\n                maxWidth: 400,\r\n                width: 250,\r\n            },\r\n        ],\r\n        position: 'right',\r\n    },\r\n};\r\n\r\nconst gridDefaultColDef = {\r\n    //https://www.ag-grid.com/javascript-data-grid/row-height/#text-wrapping\r\n    //wrapText: true,     // <-- HERE\r\n    //autoHeight: true,   // <-- & HERE\r\n\r\n    // suppressMenu: true,\r\n    wrapHeaderText: true,\r\n    autoHeaderHeight: true,\r\n\r\n    sortable: true,\r\n    filter: true,\r\n    // flex: 1,\r\n    // minWidth: 90,\r\n    resizable: true,\r\n\r\n    // allow every column to be aggregated\r\n    enableValue: true,\r\n    // allow every column to be grouped\r\n    enableRowGroup: true,\r\n    // allow every column to be pivoted\r\n    enablePivot: true,\r\n    // sizeColumnsToFit:true,\r\n    defaultAggFunc: 'avg',\r\n}\r\n\r\n\r\nexport let Datatable = {\r\n    handle_type: 'datatable',\r\n    get_element: function (spec: any): JQuery {\r\n        let html = Mustache.render(tpl, spec);\r\n        let elem = $(html);\r\n\r\n        spec.field_args = parse_js_func(spec.field_args, spec.js_func_key);\r\n        spec.path_args = parse_js_func(spec.path_args, spec.js_func_key);\r\n        spec.grid_args = parse_js_func(spec.grid_args, spec.js_func_key);\r\n        let auto_height = spec.height == 'auto';\r\n\r\n        let options = row_data_and_column_def(spec.records, spec.field_args, spec.path_args, spec.column_order);\r\n\r\n        if (spec.actions.length === 0) {\r\n            elem.find('.ag-grid-tools').hide();\r\n        } else {\r\n            // not show actions at beginning\r\n            elem.find('.ag-grid-tools .grid-unselect, .ag-grid-tools .grid-actions').hide();\r\n        }\r\n\r\n        let getRowId = undefined;\r\n        if (spec.id_field) {\r\n            getRowId = (params: any) => params.data[path2field(spec.id_field)]\r\n        }\r\n\r\n        let grid_resolve: (opts: any) => void = null;\r\n        let gridPromise = new Promise((resolve, reject) => {\r\n            grid_resolve = resolve;\r\n        });\r\n        if (spec.instance_id)\r\n            // @ts-ignore\r\n            window[`ag_grid_${spec.instance_id}_promise`] = gridPromise;\r\n\r\n        const gridOptions: any = {\r\n            ...gridDefaultOptions,\r\n            ...spec.grid_args,\r\n\r\n            path2field, field2path, spec, flatten_row,\r\n\r\n            // https://www.ag-grid.com/javascript-data-grid/row-ids/\r\n            getRowId: getRowId,\r\n\r\n            rowData: options.rowData,\r\n            columnDefs: options.columnDefs,\r\n\r\n            //https://www.ag-grid.com/javascript-data-grid/row-selection/\r\n            rowSelection: (spec.actions.length > 0) && (spec.multiple_select ? 'multiple' : 'single'),\r\n\r\n            defaultColDef: {\r\n                ...gridDefaultColDef,\r\n                ...(spec.grid_args.defaultColDef || {}),\r\n            },\r\n            getSelectedRowIDs: function () {\r\n                const selectedRows = gridOptions.api.getSelectedNodes();\r\n                let selected_row_ids = [];\r\n                for (let r of selectedRows) {\r\n                    if (!r.group)\r\n                        selected_row_ids.push(r.id);\r\n                }\r\n                if (!spec.id_field)\r\n                    selected_row_ids = selected_row_ids.map((rid: any) => parseInt(rid));\r\n                return selected_row_ids;\r\n            },\r\n            onGridReady: (param: any) => {\r\n                grid_resolve(gridOptions);\r\n                if (auto_height) {\r\n                    gridOptions.api.setDomLayout('autoHeight');\r\n                }\r\n\r\n                let grid_elem = elem.find(\".ag-grid\")[0];\r\n                let on_grid_show = Promise.resolve();\r\n                if (grid_elem.clientWidth === 0) {  // the grid is hidden via `display: none`, wait for it to show\r\n                    on_grid_show = new Promise((resolve) => {\r\n                        // @ts-ignore\r\n                        let observer = new ResizeObserver((entries, observer) => {\r\n                            if (grid_elem.clientWidth > 0) {\r\n                                observer.disconnect();\r\n                                resolve();\r\n                            }\r\n                        });\r\n                        observer.observe(grid_elem);\r\n                    });\r\n                }\r\n                on_grid_show.then(() => {\r\n                    gridOptions.columnApi.autoSizeAllColumns();\r\n                    let content_width = 0;\r\n                    gridOptions.columnApi.getColumns().forEach((column: any) => {\r\n                        if (!column.getColDef().hide)\r\n                            content_width += column.getActualWidth();\r\n                    });\r\n                    if (content_width < grid_elem.clientWidth) {\r\n                        // the content is smaller than the grid, so we set columns to adjust in size to fit the grid horizontally\r\n                        gridOptions.api.sizeColumnsToFit();\r\n                    }\r\n                })\r\n\r\n                if (spec.actions.length > 0) {\r\n                    elem.find('.ag-grid-tools').css('opacity', 1);\r\n                }\r\n                elem.find('.grid-unselect .act-btn').on('click', () => gridOptions.api.deselectAll());\r\n                for (let btn_idx in spec.actions) {\r\n                    let label = spec.actions[btn_idx];\r\n                    if (label === null) {\r\n                        elem.find('.grid-actions').append('<div class=\"sep\"></div>');\r\n                    } else {\r\n                        let btn = $(`<div class=\"act-btn\">${label}</div>`);\r\n                        btn.on('click', () => {\r\n                            pushData({\r\n                                btn: parseInt(btn_idx),\r\n                                rows: gridOptions.getSelectedRowIDs()\r\n                            }, spec.callback_id)\r\n                        });\r\n                        elem.find('.grid-actions').append(btn);\r\n                    }\r\n                }\r\n\r\n                safe_run('agGrid.onGridReady()', spec.grid_args.onGridReady, param);\r\n            },\r\n            onCellFocused: (params: any) => {\r\n                var row = gridOptions.api.getDisplayedRowAtIndex(params.rowIndex);\r\n                var cellValue = gridOptions.api.getValue(params.column, row)\r\n                if (cellValue === undefined)\r\n                    cellValue = ''\r\n                document.querySelector('.ag-grid-cell-bar').innerHTML = cellValue;\r\n\r\n                if (spec.cell_content_bar) {\r\n                    let bar = elem.find('.ag-grid-cell-bar');\r\n                    bar.show();\r\n                }\r\n\r\n                safe_run('agGrid.onCellFocused()', spec.grid_args.onCellFocused, params);\r\n            },\r\n\r\n            onSelectionChanged: (param: any) => {\r\n                const selectedRows = gridOptions.getSelectedRowIDs();\r\n                if (spec.on_select && selectedRows.length > 0) {\r\n                    pushData({\r\n                        rows: selectedRows\r\n                    }, spec.callback_id)\r\n                }\r\n\r\n                elem.find(\".ag-grid-row-count\").text(selectedRows.length);\r\n                elem.find(\".ag-grid-row-unit\").text(selectedRows.length > 1 ? 'rows' : 'row');\r\n                if (selectedRows.length === 0) {\r\n                    elem.find('.ag-grid-tools .grid-unselect, .ag-grid-tools .grid-actions').hide();\r\n                }\r\n                if (selectedRows.length >= 1) {\r\n                    elem.find('.ag-grid-tools .grid-unselect, .ag-grid-tools .grid-actions').fadeIn(200);\r\n                }\r\n\r\n                safe_run('agGrid.onSelectionChanged()', spec.grid_args.onSelectionChanged, param);\r\n            }\r\n        };\r\n\r\n        let ag_version = spec.enterprise_key ? 'ag-grid-enterprise' : 'ag-grid';\r\n        // @ts-ignore\r\n        requirejs([ag_version], function (agGrid) {\r\n            elem.find('.grid-loading').remove();\r\n            new agGrid.Grid(elem.find(\".ag-grid\")[0], gridOptions);\r\n            if (spec.instance_id) {\r\n                // @ts-ignore\r\n                window[`ag_grid_${spec.instance_id}`] = gridOptions;\r\n            }\r\n        });\r\n\r\n        return elem;\r\n    }\r\n};","import {InputItem} from \"./base\";\r\nimport {state} from \"../../state\";\r\n\r\nconst buttons_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label>{{label}}</label>  <br> {{/label}} \r\n    {{#buttons}}\r\n    <button type=\"{{btn_type}}\" data-type=\"{{type}}\" aria-describedby=\"{{name}}_help\" {{#disabled}}disabled data-pywebio-disabled{{/disabled}} class=\"btn btn-{{color}}\">{{label}}</button>\r\n    {{/buttons}}\r\n    <div class=\"invalid-feedback\">{{invalid_feedback}}</div>  <!-- input 添加 is-invalid 类 -->\r\n    <div class=\"valid-feedback\">{{valid_feedback}}</div> <!-- input 添加 is-valid 类 -->\r\n    <small id=\"{{name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\nexport class Actions extends InputItem {\r\n    static accept_input_types: string[] = [\"actions\"];\r\n\r\n    submit_value: string = null; // 提交表单时按钮组的value\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        for (let b of this.spec.buttons) b['btn_type'] = b.type === \"submit\" ? \"submit\" : \"button\";\r\n\r\n        this.spec.color = \"primary\";  // default button color\r\n        const html = Mustache.render(buttons_tpl, this.spec);\r\n        this.element = $(html);\r\n        let btns = this.element.find('button');\r\n        for (let idx = 0; idx < this.spec.buttons.length; idx++)\r\n            btns.eq(idx).val(JSON.stringify(this.spec.buttons[idx].value));\r\n\r\n        let that = this;\r\n        this.element.find('button').on('click', function (e) {\r\n            let btn = $(this);\r\n            if (btn.data('type') === 'submit') {\r\n                // 不可以使用 btn.parents('form').submit()， 会导致input 的required属性失效\r\n                that.submit_value = JSON.parse(btn.val() as string);\r\n                if(that.spec.onchange)  // the `onchange` of spec will be only set in pin widget\r\n                    that.on_input_event(\"change\", that);\r\n            } else if (btn.data('type') === 'reset') {\r\n                btn.parents('form').trigger(\"reset\");\r\n            } else if (btn.data('type') === 'cancel') {\r\n                state.CurrentSession.send_message({\r\n                    event: \"from_cancel\",\r\n                    task_id: that.task_id,\r\n                    data: null\r\n                });\r\n            } else {\r\n                console.error(\"`actions` input: unknown button type '%s'\", btn.data('type'));\r\n            }\r\n        });\r\n\r\n        return this.element;\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n        let idx = -1;\r\n        if ('target_value' in spec) {\r\n            this.element.find('button').each(function (index) {\r\n                if (JSON.parse($(this).val() as string) === spec.target_value) {\r\n                    idx = index;\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n        this.update_input_helper(idx, attributes);\r\n    }\r\n\r\n    get_value(): any {\r\n        return this.submit_value;\r\n    }\r\n}\r\n\r\n\r\n\r\n","export class InputItem {\r\n    static accept_input_types: string[] = [];\r\n\r\n\r\n    on_input_event: (event_name: string, input_item: InputItem) => void;\r\n    spec: any;\r\n    task_id: string;\r\n\r\n    element: JQuery = null; // 在 create_element() 时赋值\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        this.spec = spec;\r\n        this.task_id = task_id;\r\n        this.on_input_event = on_input_event;\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        throw new Error(\"Not implement!\");\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        throw new Error(\"Not implement!\");\r\n    }\r\n\r\n    // return a value or promise\r\n    get_value(): any {\r\n        throw new Error(\"Not implement!\");\r\n    }\r\n\r\n    // 检查输入项的有效性，在表单提交时调用\r\n    check_valid(): boolean {\r\n        this.update_input_helper(-1, {\r\n            'valid_status': 0, // remove the valid status\r\n        });\r\n        return true;\r\n    }\r\n\r\n    //在表单加入DOM树后触发\r\n    after_add_to_dom(): any {\r\n\r\n    }\r\n\r\n    //在表单被显示后触发\r\n    after_show(first_show: boolean): any {\r\n\r\n    }\r\n\r\n    // invoked when the form is reset\r\n    on_reset(e: any) {\r\n    }\r\n\r\n    /*\r\n    * input_idx: 更新作用对象input标签的索引, -1 为不指定对象\r\n    * attributes：更新值字典\r\n    * */\r\n    protected update_input_helper(input_idx: number, attributes: { [i: string]: any }) {\r\n        let attr2selector: { [i: string]: string } = {\r\n            'invalid_feedback': 'div.invalid-feedback',\r\n            'valid_feedback': 'div.valid-feedback',\r\n            'help_text': 'small.text-muted',\r\n            'label': '>label',\r\n        };\r\n        for (let attribute in attr2selector) {\r\n            if (attribute in attributes) {\r\n                this.element.find(attr2selector[attribute]).text(attributes[attribute]);\r\n                delete attributes[attribute];\r\n            }\r\n        }\r\n        let input_elem = this.element.find('input,select,textarea');\r\n        if (input_idx >= 0)\r\n            input_elem = input_elem.eq(input_idx);\r\n\r\n        if ('valid_status' in attributes) {\r\n            let class_name = attributes.valid_status ? 'is-valid' : 'is-invalid';\r\n            // valid_status为0/null时，表示清空valid_status标志\r\n            if (attributes.valid_status === 0 || attributes.valid_status === null) class_name = '';\r\n            input_elem.removeClass('is-valid is-invalid').addClass(class_name);\r\n            delete attributes.valid_status;\r\n        }\r\n        input_elem.prop(attributes);\r\n    }\r\n}\r\n\r\n\r\n\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy} from \"../../utils\"\r\n\r\nconst options_tpl = `\r\n{{#options}}\r\n<div class=\"form-check {{#inline}}form-check-inline{{/inline}}\">\r\n    <label class=\"form-check-label\" for=\"{{id_name_prefix}}-{{idx}}\">\r\n        <input type=\"{{type}}\" id=\"{{id_name_prefix}}-{{idx}}\" name=\"{{name}}\" {{#selected}}checked{{/selected}} {{#disabled}}disabled{{/disabled}} class=\"form-check-input\">\r\n        {{label}}\r\n    </label>\r\n</div>\r\n{{/options}}\r\n`;\r\n\r\nconst checkbox_radio_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label>{{label}}</label>{{#inline}}<br>{{/inline}} {{/label}}\r\n    ${options_tpl}\r\n    <div class=\"invalid-feedback\">{{invalid_feedback}}</div> \r\n    <div class=\"valid-feedback\">{{valid_feedback}}</div>\r\n    <small id=\"{{id_name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\nexport class CheckboxRadio extends InputItem {\r\n    static accept_input_types: string[] = [\"checkbox\", \"radio\"];\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        let spec = this.setup_spec();\r\n        const html = Mustache.render(checkbox_radio_tpl, spec);\r\n        let elem = $(html);\r\n        this.setup_input_options(elem, spec.options);\r\n        this.element = elem;\r\n        return this.element;\r\n    }\r\n\r\n    setup_spec() {\r\n        let spec = deep_copy(this.spec);\r\n        const id_name_prefix = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n        spec['id_name_prefix'] = id_name_prefix;\r\n        for (let idx in spec.options) {\r\n            spec.options[idx]['idx'] = idx;\r\n        }\r\n        return spec;\r\n    }\r\n\r\n    setup_input_options(elem: JQuery, options: any) {\r\n        let inputs = elem.find('input');\r\n        for (let idx = 0; idx < options.length; idx++) {\r\n            let input_elem = inputs.eq(idx);\r\n            if(this.spec.onblur) {\r\n                input_elem.on(\"blur\", (e) => {\r\n                    this.on_input_event(\"blur\", this);\r\n                });\r\n            }\r\n            if(this.spec.onchange){\r\n                input_elem.on(\"change\", (e) => {\r\n                    this.on_input_event(\"change\", this);\r\n                });\r\n            }\r\n            input_elem.val(JSON.stringify(options[idx].value));\r\n            // 将额外的html参数加到input标签上\r\n            for (let key in options[idx]) {\r\n                if (key in {'value': '', 'label': '', 'selected': ''}) continue;\r\n                input_elem.attr(key, options[idx][key]);\r\n            }\r\n        }\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n        let idx = -1;\r\n        if ('target_value' in spec) {\r\n            this.element.find('input').each(function (index) {\r\n                if (JSON.parse($(this).val() as string) === spec.target_value) {\r\n                    idx = index;\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n\r\n        if ('value' in attributes) {\r\n            this.element.find('input:checked').prop('checked', false);\r\n            let values: any[] = attributes.value;\r\n            if (this.spec.type === 'radio') {\r\n                values = [attributes.value];\r\n            }\r\n            this.element.find('input').each(function (index) {\r\n                let item_val = JSON.parse($(this).val() as string);\r\n                if (values.indexOf(item_val) != -1) {\r\n                    $(this).prop('checked', true);\r\n                }\r\n            });\r\n            delete attributes['value'];\r\n        }\r\n\r\n        if ('options' in attributes) {\r\n            this.spec.options = attributes.options;\r\n            let spec = this.setup_spec();\r\n            const html = Mustache.render(options_tpl, spec);\r\n            this.element.find('.form-check').remove();\r\n            this.element.find('.invalid-feedback').before(html);\r\n            this.setup_input_options(this.element, spec.options);\r\n            delete attributes['options'];\r\n        }\r\n\r\n        if ('valid_status' in attributes) {\r\n            this.element.find('.invalid-feedback,.valid-feedback').hide();\r\n            if (attributes.valid_status === true)\r\n                this.element.find('.valid-feedback').show();\r\n            else if (attributes.valid_status === false)\r\n                this.element.find('.invalid-feedback').show();\r\n        }\r\n        this.update_input_helper(idx, attributes);\r\n    }\r\n\r\n    get_value(): any {\r\n        if (this.spec.type === 'radio') {\r\n            let raw_val = this.element.find('input:checked').val() || 'null';\r\n            return JSON.parse(raw_val as string);\r\n        } else {\r\n            let value_arr = this.element.find('input').serializeArray();\r\n            let res: any[] = [];\r\n            let that = this;\r\n            $.each(value_arr, function (idx, val) {\r\n                if (val.name === that.spec.name)\r\n                    res.push(JSON.parse(val.value as string));\r\n            });\r\n            return res;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy} from \"../../utils\";\r\nimport {t} from \"../../i18n\";\r\n\r\nconst file_input_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label for=\"{{id_name}}\">{{label}}</label>{{/label}}\r\n    <div class=\"custom-file\">\r\n        <input type=\"file\" name=\"{{name}}\" class=\"custom-file-input\" id=\"{{id_name}}\" aria-describedby=\"{{id_name}}_help\">\r\n        <label class=\"custom-file-label\" for=\"{{id_name}}\" data-browse=\"{{browse_file}}\"><span>{{placeholder}}</span></label>\r\n        <div class=\"invalid-feedback\">{{invalid_feedback}}</div>  <!-- input 添加 is-invalid 类 -->\r\n        <div class=\"valid-feedback\">{{valid_feedback}}</div> <!-- input 添加 is-valid 类 -->\r\n        <small id=\"{{id_name}}_help\"  class=\"form-text text-muted\">{{help_text}}</small>\r\n    </div>\r\n</div>`;\r\n\r\nexport class FileUpload extends InputItem {\r\n    static accept_input_types: string[] = [\"file\"];\r\n\r\n    files: File[] = []; // Files to be uploaded\r\n    valid = true;\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        let spec = deep_copy(this.spec);\r\n        const id_name = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n        spec['id_name'] = id_name;\r\n\r\n        const html = Mustache.render(file_input_tpl, {...spec, browse_file: t('browse_file')});\r\n        this.element = $(html);\r\n        let input_elem = this.element.find('input[type=\"file\"]');\r\n\r\n        const ignore_keys = {\r\n            'label': '',\r\n            'invalid_feedback': '',\r\n            'valid_feedback': '',\r\n            'help_text': '',\r\n            'placeholder': ''\r\n        };\r\n        for (let key in this.spec) {\r\n            if (key in ignore_keys) continue;\r\n            input_elem.attr(key, this.spec[key]);\r\n        }\r\n\r\n        // 文件选中后先不通知后端\r\n        let that = this;\r\n        input_elem.on('change', function () {\r\n            that.files = [];\r\n            let total_size = 0;\r\n            that.valid = true;\r\n            let file = (input_elem[0] as HTMLInputElement).files;\r\n            for (let f of file) {\r\n                total_size += f.size;\r\n\r\n                if (that.spec.max_size && f.size > that.spec.max_size) {\r\n                    that.valid = false;\r\n                    that.update_input_helper(-1, {\r\n                        'valid_status': false,\r\n                        'invalid_feedback': t(\"file_size_exceed\", f.name, that._formate_size(that.spec.max_size)),\r\n                    });\r\n                } else if (that.spec.max_total_size && total_size > that.spec.max_total_size) {\r\n                    that.valid = false;\r\n                    that.update_input_helper(-1, {\r\n                        'valid_status': false,\r\n                        'invalid_feedback': t(\"file_total_size_exceed\", that._formate_size(that.spec.max_total_size))\r\n                    });\r\n                    return;\r\n                }\r\n                if (!that.valid) return;\r\n                that.update_input_helper(-1, {'valid_status': 0});\r\n\r\n                that.files.push(f);\r\n            }\r\n\r\n            if (spec.onchange) {\r\n                that.on_input_event(\"change\", that);\r\n            }\r\n        });\r\n\r\n        return this.element;\r\n    }\r\n\r\n    _formate_size(size: number): string {\r\n        for (let s of ['Byte', 'Kb', 'Mb']) {\r\n            if (size / 1024 < 1)\r\n                return size.toFixed(2) + s;\r\n            size = size / 1024;\r\n        }\r\n        return size.toFixed(2) + 'Gb';\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n        this.update_input_helper(-1, attributes);\r\n    }\r\n\r\n    check_valid(): boolean {\r\n        return this.valid;\r\n    }\r\n\r\n    get_value(): any {\r\n        return {\r\n            multiple: this.spec.multiple,\r\n            files: this.files\r\n        }\r\n    }\r\n\r\n    after_add_to_dom(): any {\r\n        bsCustomFileInput.init();\r\n    }\r\n}\r\n\r\n\r\n\r\n","import {Input} from \"./input\"\r\nimport {Actions} from \"./actions\"\r\nimport {CheckboxRadio} from \"./checkbox_radio\"\r\nimport {Textarea} from \"./textarea\"\r\nimport {FileUpload} from \"./file\"\r\nimport {Select} from \"./select\"\r\nimport {Slider} from \"./slider\"\r\nimport {InputItem} from \"./base\";\r\n\r\n\r\nexport const all_input_items = [Input, Actions, CheckboxRadio, Textarea, FileUpload, Select, Slider];\r\n\r\nexport function get_input_item_from_type(type: string) {\r\n    return type2item[type];\r\n}\r\n\r\nlet type2item: { [t: string]: typeof InputItem } = {}\r\nfor (let item of all_input_items) {\r\n    for (let t of item.accept_input_types)\r\n        type2item[t] = item;\r\n}\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy, make_set} from \"../../utils\"\r\nimport {state} from \"../../state\";\r\n\r\nconst datalist_tpl = `\r\n{{#datalist}} \r\n<option>{{.}}</option> \r\n{{/datalist}}`;\r\n\r\nconst common_input_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label for=\"{{id_name}}\">{{label}}</label>{{/label}}\r\n    {{#action}}<div class=\"input-group\">{{/action}} \r\n        <input type=\"{{type}}\" id=\"{{id_name}}\" aria-describedby=\"{{id_name}}_action_btn\" list=\"{{id_name}}-list\" class=\"form-control\" >\r\n        <datalist id=\"{{id_name}}-list\">\r\n            ${datalist_tpl}\r\n        </datalist>\r\n        {{#action}} \r\n        <div class=\"input-group-append\">\r\n            <button class=\"btn btn-outline-secondary single-input-action-btn\" type=\"button\" id=\"{{id_name}}_action_btn\" data-callbackid=\"{{callback_id}}\">{{label}}</button>\r\n        </div>\r\n        {{/action}} \r\n        <div class=\"invalid-feedback\">{{invalid_feedback}}</div>\r\n        <div class=\"valid-feedback\">{{valid_feedback}}</div>\r\n    {{#action}}</div>{{/action}} \r\n    <small id=\"{{id_name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\n\r\nexport class Input extends InputItem {\r\n    static accept_input_types: string[] = [\"text\", \"password\", \"number\", \"float\", \"color\", \"date\", \"range\", \"time\", \"email\", \"url\", \"datetime-local\"];\r\n    previous_value = '';\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        let spec = deep_copy(this.spec);\r\n        const id_name = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n        spec['id_name'] = id_name;\r\n        if (spec['type'] == 'float') spec['type'] = 'text';\r\n\r\n        let html = Mustache.render(common_input_tpl, spec);\r\n\r\n        this.element = $(html);\r\n\r\n        this.element.find(`#${id_name}_action_btn`).on('click', function (e) {\r\n            let btn = $(this);\r\n            state.CurrentSession.send_message({\r\n                event: \"callback\",\r\n                task_id: btn.data('callbackid') as string,\r\n                data: null\r\n            });\r\n        });\r\n\r\n        let input_elem = this.element.find('input');\r\n        if (spec.onblur) {\r\n            // blur事件时，发送当前值到服务器\r\n            input_elem.on(\"blur\", (e) => {\r\n                if (this.get_value())\r\n                    this.on_input_event(\"blur\", this);\r\n            });\r\n        }\r\n\r\n        input_elem.on(\"input\", (e) => {\r\n            this.rectify_input()\r\n            if (spec.onchange) {\r\n                this.on_input_event(\"change\", this);\r\n            }\r\n        });\r\n\r\n        // 将额外的html参数加到input标签上\r\n        const ignore_keys = make_set(['action', 'type', 'label', 'invalid_feedback', 'valid_feedback', 'help_text',\r\n            'options', 'datalist', 'multiple', 'onchange', 'onblur']);\r\n        for (let key in this.spec) {\r\n            if (key in ignore_keys) continue;\r\n            input_elem.attr(key, this.spec[key]);\r\n        }\r\n\r\n        return this.element;\r\n    }\r\n\r\n    rectify_input() {\r\n        let val = '' + this.element.find('input').val() as string;\r\n        let re;\r\n        if (this.spec['type'] == 'number') {\r\n            re = /^[+-]?\\d*$/;\r\n        } else if (this.spec['type'] == 'float') {\r\n            re = /^[+-]?\\d*\\.?\\d*$/;\r\n        }\r\n        if (re && !re.test(val)) {\r\n            this.element.find('input').val(this.previous_value);\r\n        } else {\r\n            this.previous_value = val;\r\n        }\r\n    }\r\n\r\n    // 检查输入项的有效性，在表单提交时调用\r\n    check_valid(): boolean {\r\n        let valid = !Number.isNaN(this.get_value()) || this.element.find('input').val() === '';\r\n        if (!valid) {\r\n            this.update_input_helper(-1, {\r\n                'valid_status': false\r\n            });\r\n        } else {\r\n            this.update_input_helper(-1, {\r\n                'valid_status': 0, // remove the valid status\r\n            });\r\n        }\r\n        return valid;\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n        if ('datalist' in attributes) {\r\n            const datalist_html = Mustache.render(datalist_tpl, {datalist: attributes.datalist});\r\n            this.element.find('datalist').empty().append(datalist_html);\r\n            delete attributes['datalist'];\r\n        }\r\n\r\n        this.update_input_helper(-1, attributes);\r\n    }\r\n\r\n    get_value(): any {\r\n        this.rectify_input()\r\n        let val = this.element.find('input').val();\r\n        if (this.spec['type'] == 'number')\r\n            val = parseInt(val as string);\r\n        else if (this.spec['type'] == 'float')\r\n            val = parseFloat(val as string);\r\n        return val;\r\n    }\r\n}\r\n\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy, is_mobile, make_set} from \"../../utils\"\r\n\r\nconst options_tpl = `\r\n{{#options}}\r\n<option {{#selected}}selected{{/selected}} {{#disabled}}disabled{{/disabled}}>{{label}}</option>\r\n{{/options}}\r\n`;\r\nconst select_input_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label for=\"{{id_name}}\">{{label}}</label>{{/label}}\r\n    <select id=\"{{id_name}}\" aria-describedby=\"{{id_name}}_help\" class=\"form-control\" {{#multiple}}multiple{{/multiple}}>\r\n        ${options_tpl}\r\n    </select>\r\n    <div class=\"invalid-feedback\">{{invalid_feedback}}</div>\r\n    <div class=\"valid-feedback\">{{valid_feedback}}</div>\r\n    <small id=\"{{id_name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\n// @ts-ignore\r\n$.fn.selectpicker.Constructor.BootstrapVersion = '4';\r\n\r\nexport class Select extends InputItem {\r\n    static accept_input_types: string[] = [\"select\"];\r\n\r\n    use_bootstrap_select: boolean = false;\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n        if (spec.native === false || (spec.native === undefined && spec.multiple && !is_mobile())) {\r\n            this.use_bootstrap_select = true;\r\n        }\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        let spec = deep_copy(this.spec);\r\n        const id_name = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n        spec['id_name'] = id_name;\r\n\r\n        let html = Mustache.render(select_input_tpl, spec);\r\n        this.element = $(html);\r\n        this.setup_select_options(this.element, spec.options);\r\n\r\n        if (this.use_bootstrap_select) {\r\n            // @ts-ignore\r\n            this.element.find('select').selectpicker();\r\n        }\r\n\r\n        if (spec.onblur) {\r\n            // blur事件时，发送当前值到服务器\r\n            this.element.find('select').on(\"blur\", (e) => {\r\n                this.on_input_event(\"blur\", this);\r\n            });\r\n        }\r\n        if (spec.onchange) {\r\n            this.element.find('select').on(\"change\", (e) => {\r\n                this.on_input_event(\"change\", this);\r\n            });\r\n        }\r\n        return this.element;\r\n    }\r\n\r\n    setup_select_options(elem: JQuery, options: any) {\r\n        let input_elem = elem.find('select');\r\n        let opts = input_elem.find('option');\r\n        for (let idx = 0; idx < options.length; idx++)\r\n            opts.eq(idx).val(JSON.stringify(options[idx].value));\r\n\r\n        // 将额外的html参数加到input标签上\r\n        const ignore_keys = make_set(['type', 'label', 'invalid_feedback', 'valid_feedback', 'help_text',\r\n            'options', 'datalist', 'multiple', 'onchange', 'onblur'])\r\n\r\n        for (let key in this.spec) {\r\n            if (key in ignore_keys) continue;\r\n            input_elem.attr(key, this.spec[key]);\r\n        }\r\n\r\n        if (this.use_bootstrap_select) {\r\n            // @ts-ignore\r\n            input_elem.selectpicker('refresh');\r\n        }\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n\r\n        if ('options' in attributes) {\r\n            const opts_html = Mustache.render(options_tpl, {options: attributes.options});\r\n            this.element.find('select').empty().append(opts_html);\r\n            this.setup_select_options(this.element, attributes.options);\r\n            delete attributes['options'];\r\n        }\r\n\r\n        if ('value' in attributes) {\r\n            this.element.find('option').prop('selected', false);\r\n            let values: any[] = attributes.value;\r\n            if (!this.spec.multiple) {\r\n                values = [attributes.value];\r\n            }\r\n            this.element.find('option').each(function (index) {\r\n                let item_val = JSON.parse($(this).val() as string);\r\n                if (values.indexOf(item_val) != -1) {\r\n                    $(this).prop('selected', true);\r\n                }\r\n            });\r\n            if (this.use_bootstrap_select) {\r\n                // @ts-ignore\r\n                this.element.find('select').selectpicker('render');\r\n            }\r\n            delete attributes['value'];\r\n        }\r\n\r\n        this.update_input_helper(-1, attributes);\r\n    }\r\n\r\n    on_reset(e: any) {\r\n        // need to wait some time to get the select element be reset, and then update `selectpicker`\r\n        if (this.use_bootstrap_select)\r\n            setTimeout(() => {\r\n                // @ts-ignore\r\n                this.element.find('select').selectpicker('render');\r\n            }, 100)\r\n    }\r\n\r\n    get_value(): any {\r\n        let raw_val = this.element.find('select').val();\r\n        if (this.spec.multiple) {\r\n            let res: any[] = [];\r\n            for (let i of (raw_val as string[]))\r\n                res.push(JSON.parse(i));\r\n            return res;\r\n        } else {\r\n            return JSON.parse(raw_val as string);\r\n        }\r\n    }\r\n}\r\n\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy, make_set} from \"../../utils\";\r\n\r\nconst slider_input_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label for=\"{{id_name}}\">{{label}}</label>{{/label}}\r\n    <input type=\"range\" class=\"form-control-range\" name=\"{{name}}\" min=\"{{min_value}}\" max=\"{{max_value}}\" value=\"{{value}}\" id=\"{{id_name}}\" step=\"{{step}}\">\r\n    <small class=\"form-control-range-value\"></small>\r\n    <div class=\"invalid-feedback\">{{invalid_feedback}}</div>\r\n    <div class=\"valid-feedback\">{{valid_feedback}}</div>\r\n    <small id=\"{{id_name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\nexport class Slider extends InputItem {\r\n    static accept_input_types: string[] = [\"slider\"];\r\n\r\n    files: Blob[] = []; // Files to be uploaded\r\n    valid = true;\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element(): JQuery {\r\n        let spec = deep_copy(this.spec);\r\n        spec['id_name'] = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n\r\n        const html = Mustache.render(slider_input_tpl, spec);\r\n        this.element = $(html);\r\n        let input_elem = this.element.find('input[type=\"range\"]');\r\n\r\n        const ignore_keys = make_set(['value', 'step', 'type', 'label', 'invalid_feedback', 'valid_feedback',\r\n            'help_text', 'min_value', 'max_value', 'id_name', 'name', 'float', 'onchange', 'onblur']);\r\n        for (let key in this.spec) {\r\n            if (key in ignore_keys) continue;\r\n            input_elem.attr(key, this.spec[key]);\r\n        }\r\n\r\n        let range_value = this.element.find('.form-control-range-value');\r\n        range_value.text(\r\n            this.spec['float'] ? this.get_value().toFixed(2) : this.get_value()\r\n        );\r\n        input_elem.on(\"input\", (e) => {\r\n            range_value.text(\r\n                this.spec['float'] ? this.get_value().toFixed(2) : this.get_value()\r\n            );\r\n        });\r\n\r\n\r\n        if (spec.onblur) {\r\n            // blur事件时，发送当前值到服务器\r\n            input_elem.on(\"blur\", (e) => {\r\n                this.on_input_event(\"blur\", this);\r\n            });\r\n        }\r\n        if (spec.onchange) {\r\n            input_elem.on(\"change\", (e) => {\r\n                this.on_input_event(\"change\", this);\r\n            });\r\n        }\r\n\r\n        return this.element;\r\n    }\r\n\r\n    update_input(spec: any): any {\r\n        let attributes = spec.attributes;\r\n        if ('value' in attributes) {\r\n            let range_value = this.element.find('.form-control-range-value');\r\n            range_value.text(\r\n                this.spec['float'] ? this.get_value().toFixed(2) : attributes.value\r\n            );\r\n        }\r\n        this.update_input_helper(-1, attributes);\r\n    }\r\n\r\n    get_value(): any {\r\n        let val = this.element.find('input[type=\"range\"]').val();\r\n        if (this.spec['float'])\r\n            val = parseFloat(val as string);\r\n        else\r\n            val = parseInt(val as string);\r\n        return val;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n","import {InputItem} from \"./base\";\r\nimport {deep_copy, make_set} from \"../../utils\"\r\nimport {config as appConfig} from \"../../state\";\r\n\r\n\r\nconst textarea_input_tpl = `\r\n<div class=\"form-group\">\r\n    {{#label}}<label for=\"{{id_name}}\">{{label}}</label>{{/label}}\r\n    <textarea id=\"{{id_name}}\" aria-describedby=\"{{id_name}}_help\" rows=\"{{rows}}\" class=\"form-control\" >{{value}}</textarea>\r\n    <div class=\"invalid-feedback\">{{invalid_feedback}}</div>  <!-- input 添加 is-invalid 类 -->\r\n    <div class=\"valid-feedback\">{{valid_feedback}}</div> <!-- input 添加 is-valid 类 -->\r\n    <small id=\"{{id_name}}_help\" class=\"form-text text-muted\">{{help_text}}</small>\r\n</div>`;\r\n\r\n\r\nexport class Textarea extends InputItem {\r\n    static accept_input_types: string[] = [\"textarea\"];\r\n\r\n    private code_mirror: any = null;\r\n    private code_mirror_config: { [name: string]: any } = {\r\n        'lineNumbers': true,  // 显示行数\r\n        'indentUnit': 4,  //缩进单位为4\r\n        'styleActiveLine': true,  // 当前行背景高亮\r\n        'matchBrackets': true,  //括号匹配\r\n        'lineWrapping': true,  //自动换行\r\n        'autoRefresh': true,  // https://codemirror.net/doc/manual.html#addon_autorefresh\r\n        'extraKeys': {\r\n            // Full Screen Editing, https://codemirror.net/demo/fullscreen.html\r\n            \"F11\": function (cm: any) {\r\n                cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\r\n            },\r\n            \"Esc\": function (cm: any) {\r\n                cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\r\n            }\r\n        }\r\n    };\r\n\r\n    constructor(spec: any, task_id: string, on_input_event: (event_name: string, input_item: InputItem) => void) {\r\n        super(spec, task_id, on_input_event);\r\n    }\r\n\r\n    create_element() {\r\n        let that = this;\r\n\r\n        let spec = deep_copy(this.spec);\r\n        spec['id_name'] = spec.name + '-' + Math.floor(Math.random() * Math.floor(9999));\r\n        let html = Mustache.render(textarea_input_tpl, spec);\r\n        this.element = $(html);\r\n        let input_elem = this.element.find('textarea');\r\n\r\n        // blur事件时，发送当前值到服务器\r\n        // input_elem.on('blur', this.send_value_listener);\r\n        if (spec.onchange) {\r\n            input_elem.on(\"input\", (e) => {\r\n                this.on_input_event(\"change\", this);\r\n            });\r\n        }\r\n\r\n        // 将额外的html参数加到input标签上\r\n        let ignore_keys = make_set(['value', 'type', 'label', 'invalid_feedback', 'valid_feedback',\r\n            'help_text', 'rows', 'code', 'onchange']);\r\n        if (spec.code && spec.required) {\r\n            ignore_keys['required'] = '';\r\n        }\r\n        for (let key in this.spec) {\r\n            if (key in ignore_keys) continue;\r\n            input_elem.attr(key, this.spec[key]);\r\n        }\r\n        if (spec.code) {\r\n            if (spec.code === true) spec.code = {mode: 'text/plain'};\r\n            CodeMirror.modeURL = appConfig.codeMirrorModeURL;\r\n\r\n            for (let k in that.spec.code)\r\n                this.code_mirror_config[k] = that.spec.code[k];\r\n\r\n            // Get mode name by extension or MIME\r\n            let origin_mode = spec.code.mode || 'text/plain';\r\n            let mode_info = CodeMirror.findModeByExtension(origin_mode) || CodeMirror.findModeByMIME(origin_mode);\r\n            if (mode_info)\r\n                this.code_mirror_config.mode = mode_info.mode;\r\n\r\n            if (that.spec.readonly || that.spec.disabled)\r\n                this.code_mirror_config['readOnly'] = \"nocursor\";\r\n\r\n            if (this.code_mirror_config.theme && this.code_mirror_config.theme !== 'base16-light')\r\n                Textarea.load_codemirror_theme(this.code_mirror_config.theme);\r\n        }\r\n\r\n        return this.element;\r\n    };\r\n\r\n    update_input(spec: any) {\r\n        let attributes = spec.attributes;\r\n        if (this.code_mirror && 'value' in attributes) {\r\n            this.code_mirror.setValue(attributes['value']);\r\n            delete attributes['value'];\r\n        }\r\n\r\n        this.update_input_helper.call(this, -1, attributes);\r\n    };\r\n\r\n    get_value() {\r\n        if (this.code_mirror)\r\n            return this.code_mirror.getValue();\r\n\r\n        return this.element.find('textarea').val();\r\n    };\r\n\r\n    check_valid(): boolean {\r\n        if (this.code_mirror && this.spec.required && !this.get_value()) {\r\n            this.update_input_helper(-1, {\r\n                'valid_status': false,\r\n                'invalid_feedback': \"Please fill out this field.\",\r\n            });\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    after_show(first_show: boolean): any {\r\n        if (first_show && this.spec.code) {\r\n            this.code_mirror = CodeMirror.fromTextArea(this.element.find('textarea')[0], this.code_mirror_config);\r\n            if (CodeMirror.autoLoadMode) {\r\n                try {\r\n                    CodeMirror.autoLoadMode(this.code_mirror, this.code_mirror_config.mode);\r\n                } catch (e) {\r\n                    console.error('CodeMirror load mode `%s` error: %s', this.code_mirror_config.mode, e);\r\n                }\r\n            }\r\n            if (this.spec.onchange)\r\n                this.code_mirror.on('change', (instance: object, changeObj: any) => {\r\n                    if (changeObj.origin !== 'setValue')  // https://github.com/pywebio/PyWebIO/issues/459\r\n                        this.on_input_event(\"change\", this);\r\n                })\r\n            this.code_mirror.setSize(null, 20 * this.spec.rows);\r\n        }\r\n    };\r\n\r\n    static load_codemirror_theme(theme: string, url_tpl = appConfig.codeMirrorThemeURL) {\r\n        let cssId = 'codemirror_theme_' + theme;  // you could encode the css path itself to generate id..\r\n        if (!document.getElementById(cssId)) {\r\n            let head = document.getElementsByTagName('head')[0];\r\n            let link = document.createElement('link');\r\n            link.id = cssId;\r\n            link.rel = 'stylesheet';\r\n            link.type = 'text/css';\r\n            link.href = url_tpl.replace('%N', theme);\r\n            link.media = 'all';\r\n            head.appendChild(link);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n","import {b64toBlob, randomid} from \"../utils\";\r\nimport * as marked from 'marked';\r\nimport {pushData} from \"../session\";\r\nimport {PinWidget} from \"./pin\";\r\nimport {t} from \"../i18n\";\r\nimport {AfterCurrentOutputWidgetShow} from \"../handlers/output\";\r\nimport {Datatable} from \"./datatable\";\r\n\r\nexport interface Widget {\r\n    handle_type: string;\r\n\r\n    get_element(spec: any): JQuery;  // The length of element must equal 1\r\n}\r\n\r\nlet Text = {\r\n    handle_type: 'text',\r\n    get_element: function (spec: any): JQuery {\r\n        let elem = spec.inline ? $('<span></span>') : $('<p></p>');\r\n        elem.attr('style', 'white-space: pre-wrap;');\r\n        elem.append(document.createTextNode(spec.content));\r\n        return elem;\r\n    }\r\n};\r\n\r\nmarked.setOptions({\r\n    breaks: true, //可行尾不加两空格直接换行\r\n    smartLists: true,\r\n    smartypants: false,\r\n    mangle: false,\r\n    highlight: function (code, lang, callback) {\r\n        if (Prism.languages[lang]) {\r\n            try {\r\n                code = Prism.highlight(code, Prism.languages[lang]);\r\n            } catch (e) {\r\n                console.error('Prism highlight error:' + e)\r\n            }\r\n        }\r\n        if (callback)\r\n            return callback(null, code);\r\n        else\r\n            return code;\r\n    },\r\n});\r\n\r\nlet Markdown = {\r\n    handle_type: 'markdown',\r\n    get_element: function (spec: any) {\r\n        // spec.options, see also https://marked.js.org/using_advanced#options\r\n        let html_str = marked(spec.content, spec.options);\r\n        if (spec.sanitize)\r\n            try {\r\n                html_str = DOMPurify.sanitize(html_str);\r\n            } catch (e) {\r\n                console.log('Sanitize html failed: %s\\nHTML: \\n%s', e, html_str);\r\n            }\r\n        return $(html_str);\r\n    }\r\n};\r\n\r\n// 将html字符串解析成jQuery对象\r\nfunction parseHtml(html_str: string) {\r\n    let nodes = $.parseHTML(html_str.trim(), null, true);\r\n    let elem;\r\n    if (nodes.length != 1)\r\n        elem = $(document.createElement('div')).append(nodes);\r\n    else\r\n        elem = $(nodes[0]);\r\n    return elem;\r\n}\r\n\r\nlet Html = {\r\n    handle_type: 'html',\r\n    get_element: function (spec: any) {\r\n        let html_str = spec.content;\r\n        if (spec.sanitize)\r\n            try {\r\n                html_str = DOMPurify.sanitize(html_str);\r\n            } catch (e) {\r\n                console.log('Sanitize html failed: %s\\nHTML: \\n%s', e, html_str);\r\n            }\r\n        return parseHtml(html_str);\r\n    }\r\n};\r\n\r\nlet Buttons = {\r\n    handle_type: 'buttons',\r\n    get_element: function (spec: any) {\r\n        const btns_tpl = `<div{{#group}} class=\"btn-group\" role=\"group\"{{/group}}>{{#buttons}} \r\n                                <button class=\"btn {{#color}}btn-{{#outline}}outline-{{/outline}}{{color}}{{/color}}{{#small}} btn-sm{{/small}}\" {{#disabled}}disabled{{/disabled}}>{{label}}</button> \r\n                          {{/buttons}}</div>`;\r\n        spec.color = \"primary\";  // fallback color\r\n        if (spec.link) {\r\n            spec.outline = false;\r\n            for (let btn of spec.buttons)\r\n                btn.color = 'link';\r\n        }\r\n\r\n        let html = Mustache.render(btns_tpl, spec);\r\n        let elem = $(html);\r\n\r\n        let btns = elem.find('button');\r\n        for (let idx = 0; idx < spec.buttons.length; idx++) {\r\n            btns.eq(idx).on('click', (e) => {\r\n                pushData(spec.buttons[idx].value, spec.callback_id);\r\n            });\r\n        }\r\n\r\n        return elem;\r\n    }\r\n};\r\n\r\n// 已废弃。为了向下兼容而保留\r\nlet File = {\r\n    handle_type: 'file',\r\n    get_element: function (spec: any) {\r\n        const html = `<div><button type=\"button\" class=\"btn btn-link\">${spec.name}</button></div>`;\r\n        let element = $(html);\r\n        let blob = b64toBlob(spec.content);\r\n        element.on('click', 'button', function (e) {\r\n            saveAs(blob, spec.name, {}, false);\r\n        });\r\n\r\n        return element;\r\n    }\r\n};\r\n\r\n\r\nlet Table = {\r\n    handle_type: 'table',\r\n    get_element: function (spec: { data: any[][], span: { [i: string]: { col: number, row: number } } }) {\r\n        const table_tpl = `\r\n<table>\r\n    <tr>\r\n        {{#header}} \r\n        <th{{#col}} colspan=\"{{col}}\"{{/col}}{{#row}} rowspan=\"{{row}}\"{{/row}}>{{#content}}{{& pywebio_output_parse}}{{/content}}</th> \r\n        {{/header}}\r\n    </tr>\r\n      {{#tdata}} \r\n      <tr>\r\n        {{# . }} \r\n        <td{{#col}} colspan=\"{{col}}\"{{/col}}{{#row}} rowspan=\"{{row}}\"{{/row}}>{{#content}}{{& pywebio_output_parse}}{{/content}}</td> \r\n        {{/ . }} \r\n      </tr>\r\n      {{/tdata}}\r\n    \r\n</table>`;\r\n\r\n        interface itemType {\r\n            content: any, // spec of sub-output\r\n            col?: number,\r\n            row?: number\r\n        }\r\n\r\n        // 将spec转化成模版引擎的输入\r\n        let table_data: itemType[][] = [];\r\n        for (let row_id in spec.data) {\r\n            table_data.push([]);\r\n            let row = spec.data[row_id];\r\n            for (let col_id in row) {\r\n                let data = spec.data[row_id][col_id];\r\n\r\n                // 处理简单类型单元格，即单元格不是output命令的spec\r\n                if (typeof data !== 'object') {\r\n                    data = {type: 'text', content: data, inline: true};\r\n                }\r\n\r\n                table_data[row_id].push({\r\n                    content: data,\r\n                    ...(spec.span[row_id + ',' + col_id] || {})\r\n                });\r\n            }\r\n        }\r\n\r\n        let header: itemType[], data: itemType[][];\r\n        [header, ...data] = table_data;\r\n        return render_tpl(table_tpl, {header: header, tdata: data});\r\n    }\r\n};\r\n\r\nconst TABS_TPL = `<div class=\"webio-tabs\">\r\n{{#tabs}}\r\n    <input type=\"radio\" class=\"toggle\" name=\"{{#uniqueid}}name{{/uniqueid}}\" id=\"{{#uniqueid}}name{{/uniqueid}}{{index}}\" {{#checked}}checked{{/checked}}>\r\n    <label for=\"{{#uniqueid}}name{{/uniqueid}}{{index}}\">{{title}}</label>\r\n    <div class=\"webio-tabs-content\">\r\n    {{#content}}\r\n        {{& pywebio_output_parse}}\r\n    {{/content}}\r\n    </div>\r\n{{/tabs}}\r\n</div>`;\r\n\r\nlet TabsWidget = {\r\n    handle_type: 'tabs',\r\n    get_element: function (spec: { tabs: { title: string, content: any, index: number, checked: boolean }[] }) {\r\n        spec.tabs[0]['checked'] = true;\r\n        for (let idx = 0; idx < spec.tabs.length; idx++) {\r\n            spec.tabs[idx]['index'] = idx;\r\n        }\r\n\r\n        return render_tpl(TABS_TPL, spec);\r\n    }\r\n};\r\n\r\nconst SCROLLABLE_TPL = `<div>\r\n<div class=\"webio-scrollable{{#border}} scrollable-border{{/border}}\" {{#keep_bottom}}tabindex=\"0\"{{/keep_bottom}} \r\n    style=\"{{#min_height}}min-height: {{min_height}}px;{{/min_height}} {{#max_height}}max-height: {{max_height}}px;{{/max_height}}\">\r\n    {{#contents}}\r\n        {{& pywebio_output_parse}}\r\n    {{/contents}}\r\n</div>\r\n</div>`;\r\n\r\nlet ScrollableWidget = {\r\n    handle_type: 'scrollable',\r\n    get_element: function (spec: {\r\n        contents: any, min_height: string, max_height: string, keep_bottom: boolean, border: boolean\r\n    }) {\r\n        let elem = render_tpl(SCROLLABLE_TPL, spec);\r\n        let container = elem.find('> div');\r\n        if (spec.keep_bottom) {\r\n            let stop = false;\r\n            container.on('focusin mouseenter', function (e) {\r\n                stop = true\r\n            }).on('focusout mouseleave', function (e) {\r\n                stop = false\r\n            });\r\n            new MutationObserver(function (mutations, observe) {\r\n                if (!stop) container.stop().animate({scrollTop: container.prop(\"scrollHeight\")}, 200);\r\n            }).observe(container[0], {childList: true, subtree: true});\r\n        }\r\n        return elem;\r\n    }\r\n};\r\n\r\n\r\nconst SCOPE_TPL = `<div>\r\n    {{#contents}}\r\n        {{& pywebio_output_parse}}\r\n    {{/contents}}\r\n</div>`;\r\nlet ScopeWidget = {\r\n    handle_type: 'scope',\r\n    get_element: function (spec: { dom_id: string, contents: any[] }) {\r\n        let elem = render_tpl(SCOPE_TPL, spec);\r\n        // need to check the duplicate id after current output widget shown.\r\n        // because the current widget may have multiple sub-widget which have same dom id.\r\n        AfterCurrentOutputWidgetShow(() => {\r\n            if ($(`#${spec.dom_id}`).length !== 0) {\r\n                let tip = `<p style=\"color: grey; border:1px solid #ced4da; padding: .375rem .75rem;\">${t(\"duplicated_scope_name\")}</p>`;\r\n                elem.empty().html(tip);\r\n            } else {\r\n                elem.attr('id', spec.dom_id);\r\n            }\r\n        })\r\n        return elem;\r\n    }\r\n};\r\n\r\n\r\nlet CustomWidget = {\r\n    handle_type: 'custom_widget',\r\n    get_element: function (spec: { template: string, data: { [i: string]: any } }) {\r\n        return render_tpl(spec.template, spec.data);\r\n    }\r\n};\r\n\r\nlet all_widgets: Widget[] = [Text, Markdown, Html, Buttons, File, Table, CustomWidget, TabsWidget, PinWidget,\r\n    ScopeWidget, ScrollableWidget, Datatable];\r\n\r\n\r\nlet type2widget: { [i: string]: Widget } = {};\r\nfor (let w of all_widgets)\r\n    type2widget[w.handle_type] = w;\r\n\r\nexport function getWidgetElement(spec: any) {\r\n    if (!(spec.type in type2widget))\r\n        throw Error(\"Unknown type in getWidgetElement() :\" + spec.type);\r\n\r\n    let elem = type2widget[spec.type].get_element(spec);\r\n    if (elem.length != 1)\r\n        elem = $(document.createElement('div')).append(elem);\r\n\r\n    if (spec.style) {\r\n        // add style attribute\r\n        let old_style = elem.attr('style') || '';\r\n        elem.attr({\"style\": old_style + ';' + spec.style});\r\n    }\r\n    if (spec.click_callback_id) {\r\n        elem.on('click', (e) => {\r\n            pushData(null, spec.click_callback_id);\r\n        });\r\n        elem.addClass('pywebio-clickable');\r\n    }\r\n    if (spec.container_dom_id) {\r\n        if (spec.container_selector)\r\n            elem.find(spec.container_selector).attr('id', spec.container_dom_id);\r\n        else\r\n            elem.attr('id', spec.container_dom_id);\r\n    }\r\n    return elem;\r\n}\r\n\r\n\r\nexport function render_tpl(tpl: string, data: { [i: string]: any }) {\r\n    let placeholder2spec: { [name: string]: any } = {};\r\n\r\n    // {{#content}}{{& pywebio_output_parse}}{{/content}}\r\n    data['pywebio_output_parse'] = function () {\r\n        if (!this.type)\r\n            return getWidgetElement({type: 'text', content: this, inline: true})[0].outerHTML;\r\n        let dom_id = 'ph-' + randomid(10);\r\n        placeholder2spec[dom_id] = this;\r\n        return `<div id=\"${dom_id}\"></div>`;\r\n    };\r\n\r\n    // {{#uniqueid}}name{{/uniqueid}}\r\n    // {{uniqueid}}\r\n    let names2id: { [name: string]: any } = {};\r\n    data['uniqueid'] = function () {\r\n        return function (name: string) {\r\n            if (name) {\r\n                if (!(name in names2id))\r\n                    names2id[name] = 'webio-' + randomid(10);\r\n\r\n                return names2id[name];\r\n            } else {\r\n                return 'webio-' + randomid(10);\r\n            }\r\n        };\r\n    };\r\n\r\n    // count the function call number\r\n    // {{index}}\r\n    let cnt = 0;\r\n    data['index'] = function () {\r\n        cnt += 1;\r\n        return cnt;\r\n    };\r\n\r\n    let html = Mustache.render(tpl, data);\r\n    let elem = parseHtml(html);\r\n    for (let dom_id in placeholder2spec) {\r\n        let spec = placeholder2spec[dom_id];\r\n        try {\r\n            let sub_elem = getWidgetElement(spec);\r\n            elem.find(`#${dom_id}`).replaceWith(sub_elem);\r\n        } catch (e) {\r\n            console.error('Error when render widget: \\n%s\\nSPEC:%s', e, JSON.stringify(spec));\r\n        }\r\n    }\r\n    return elem;\r\n}","import {get_input_item_from_type} from \"./input/index\"\r\nimport {InputItem} from \"./input/base\";\r\nimport {t} from \"../i18n\";\r\nimport {AfterCurrentOutputWidgetShow} from \"../handlers/output\";\r\nimport {randomid} from \"../utils\";\r\nimport {pushData} from \"../session\";\r\n\r\n\r\nlet name2input: { [k: string]: InputItem } = {};\r\n\r\nexport function IsFileInput(name: string): boolean {\r\n    return name2input[name] !== undefined && name2input[name].spec.type == \"file\";\r\n}\r\n\r\nexport function GetPinValue(name: string) {\r\n    if (name2input[name] == undefined || !document.contains(name2input[name].element[0]))\r\n        return undefined;\r\n    return name2input[name].get_value();\r\n}\r\n\r\nexport function PinUpdate(name: string, attributes: { [k: string]: any }) {\r\n    name2input[name].update_input({attributes: attributes});\r\n}\r\n\r\nlet disposable_onchange_callbacks: { [name: string]: { [callback_id: string]: ((val: any) => void) } } = {}; // name->{callback_id->callback}\r\nlet resident_onchange_callbacks: { [name: string]: ((val: any) => void)[] } = {}; // name->[]\r\n\r\nexport function WaitChange(names: string[], timeout: number) {\r\n    let promises = [];\r\n    let callback_ids: { [name: string]: string } = {};\r\n    for (let name of names) {\r\n        promises.push(new Promise(resolve => {\r\n            callback_ids[name] = register_on_change(name, value => {\r\n                resolve({'name': name, 'value': value})\r\n            });\r\n        }));\r\n    }\r\n    if (timeout) {\r\n        promises.push(new Promise(resolve => {\r\n            setTimeout(() => {\r\n                resolve(null);\r\n            }, timeout * 1000);\r\n        }));\r\n    }\r\n    return Promise.race(promises).then((val) => {\r\n        for (let name of names) {\r\n            let callback_id = callback_ids[name];\r\n            delete disposable_onchange_callbacks[name][callback_id];\r\n        }\r\n        return val;\r\n    });\r\n}\r\n\r\nexport function PinChangeCallback(name: string, callback: null | ((val: any) => void), clear: boolean) {\r\n    if (!(name in resident_onchange_callbacks) || clear)\r\n        resident_onchange_callbacks[name] = [];\r\n\r\n    if (callback) {\r\n        resident_onchange_callbacks[name].push(callback)\r\n    }\r\n}\r\n\r\nfunction register_on_change(name: string, callback: (val: any) => void): string {\r\n    let callback_id = randomid(10);\r\n    if (!(name in disposable_onchange_callbacks))\r\n        disposable_onchange_callbacks[name] = {};\r\n    disposable_onchange_callbacks[name][callback_id] = callback;\r\n    return callback_id;\r\n}\r\n\r\nfunction trigger_onchange_event(name: string, value: any) {\r\n    let resolve_list = disposable_onchange_callbacks[name] || {};\r\n    Object.keys(resolve_list).forEach(callback_id => {\r\n        let resolve = resolve_list[callback_id];\r\n        resolve(value);\r\n    })\r\n    for (let resolve of (resident_onchange_callbacks[name] || [])) {\r\n        resolve(value);\r\n    }\r\n}\r\n\r\nexport let PinWidget = {\r\n    handle_type: 'pin',\r\n    get_element: function (spec: any) {\r\n        let input_spec = spec.input;\r\n        if (input_spec.name in name2input) {\r\n            let tip = `<p style=\"color: grey; border:1px solid #ced4da; padding: .375rem .75rem;\">${t(\"duplicated_pin_name\")}</p>`;\r\n            name2input[input_spec.name].element.replaceWith(tip);\r\n        }\r\n\r\n        input_spec.onchange = true;\r\n        input_spec.onblur = true;\r\n        let InputClass = get_input_item_from_type(input_spec.type);\r\n        let input_item = new InputClass(input_spec, null, (event, input_item) => {\r\n            if (event == 'change')\r\n                trigger_onchange_event(input_spec.name, input_item.get_value());\r\n        });\r\n\r\n        name2input[input_spec.name] = input_item;\r\n\r\n        AfterCurrentOutputWidgetShow(() => {\r\n            input_item.after_add_to_dom();\r\n            input_item.after_show(true);\r\n        });\r\n\r\n        return input_item.create_element();\r\n    }\r\n};\r\n\r\n\r\n","import {error_alert, randomid, ReliableSender} from \"./utils\";\r\nimport {state} from \"./state\";\r\nimport {t} from \"./i18n\";\r\n\r\nexport interface Command {\r\n    command: string\r\n    task_id: string\r\n    spec: any\r\n}\r\n\r\nexport interface ClientEvent {\r\n    event: string,\r\n    task_id: string,\r\n    data: any\r\n}\r\n\r\n\r\n/*\r\n* 会话\r\n* 向外暴露的事件：on_session_create、on_session_close、on_server_message\r\n* 提供的函数：start_session、send_message、close_session\r\n* */\r\nexport interface Session {\r\n    webio_session_id: string;\r\n\r\n    on_session_create(callback: () => void): void;\r\n\r\n    on_session_close(callback: () => void): void;\r\n\r\n    on_server_message(callback: (msg: Command) => void): void;\r\n\r\n    start_session(debug: boolean): void;\r\n\r\n    send_message(msg: ClientEvent, onprogress?: (loaded: number, total: number) => void): void;\r\n\r\n    send_buffer(data: Blob, onprogress?: (loaded: number, total: number) => void): void;\r\n\r\n    close_session(): void;\r\n\r\n    closed(): boolean;\r\n}\r\n\r\nfunction safe_poprun_callbacks(callbacks: (() => void)[], name = 'callback') {\r\n    while (callbacks.length)\r\n        try {\r\n            callbacks.pop().call(this);\r\n        } catch (e) {\r\n            console.log('Error in %s: %s', name, e);\r\n        }\r\n}\r\n\r\nexport class WebSocketSession implements Session {\r\n    ws: WebSocket;\r\n    debug: boolean;\r\n    webio_session_id: string = 'NEW';\r\n    private _closed: boolean; // session logic closed (by `close_session` command)\r\n    private _session_create_ts = 0;\r\n    private _session_create_callbacks: (() => void)[] = [];\r\n    private _session_close_callbacks: (() => void)[] = [];\r\n    private _on_server_message: (msg: Command) => any = () => {\r\n    };\r\n\r\n    constructor(public ws_api: string, public app_name: string = 'index') {\r\n        this.ws = null;\r\n        this.debug = false;\r\n        this._closed = false;\r\n    }\r\n\r\n    set_ws_api() {\r\n        let url = new URL(this.ws_api);\r\n        if (url.protocol !== 'wss:' && url.protocol !== 'ws:') {\r\n            let protocol = url.protocol || window.location.protocol;\r\n            url.protocol = protocol.replace('https', 'wss').replace('http', 'ws');\r\n        }\r\n        url.search = `?app=${this.app_name}&session=${this.webio_session_id}`;\r\n        this.ws_api = url.href;\r\n    }\r\n\r\n    on_session_create(callback: () => any): void {\r\n        this._session_create_callbacks.push(callback);\r\n    };\r\n\r\n    on_session_close(callback: () => any): void {\r\n        this._session_close_callbacks.push(callback);\r\n    }\r\n\r\n    on_server_message(callback: (msg: Command) => any): void {\r\n        this._on_server_message = callback;\r\n    }\r\n\r\n    start_session(debug: boolean = false): void {\r\n        let that = this;\r\n\r\n        this.set_ws_api();\r\n\r\n        this._session_create_ts = Date.now();\r\n        this.debug = debug;\r\n        this.ws = new WebSocket(this.ws_api);\r\n        this.ws.onopen = () => {\r\n            safe_poprun_callbacks(this._session_create_callbacks, 'session_create_callback');\r\n        };\r\n\r\n        this.ws.onclose = function (evt) {\r\n            if (!that._closed && that.webio_session_id != 'NEW') {  // not receive `close_session` command && enabled reconnection\r\n                const session_create_interval = 5000;\r\n                if (Date.now() - that._session_create_ts > session_create_interval)\r\n                    that.start_session(that.debug);\r\n                else\r\n                    setTimeout(() => {\r\n                        that.start_session(that.debug);\r\n                    }, session_create_interval - Date.now() + that._session_create_ts);\r\n            } else {\r\n                that.close_session();\r\n            }\r\n        };\r\n        this.ws.onmessage = function (evt) {\r\n            let msg: Command = JSON.parse(evt.data);\r\n            if (debug) console.info('>>>', JSON.parse(evt.data));\r\n            that._on_server_message(msg);\r\n        };\r\n    }\r\n\r\n    start_onprogress(onprogress?: (loaded: number, total: number) => void): void {\r\n        let total = this.ws.bufferedAmount;\r\n        let onprogressID = setInterval(() => {\r\n            let loaded = total - this.ws.bufferedAmount;\r\n            onprogress(loaded, total);\r\n            if (this.ws.bufferedAmount == 0)\r\n                clearInterval(onprogressID);\r\n        }, 200);\r\n    }\r\n\r\n    send_message(msg: ClientEvent, onprogress?: (loaded: number, total: number) => void): void {\r\n        if (this.closed())\r\n            return error_alert(t(\"disconnected_with_server\"));\r\n\r\n        if (this.ws === null)\r\n            return console.error('WebSocketWebIOSession.ws is null when invoke WebSocketWebIOSession.send_message. ' +\r\n                'Please call WebSocketWebIOSession.start_session first');\r\n        this.ws.send(JSON.stringify(msg));\r\n\r\n        if (onprogress)\r\n            this.start_onprogress(onprogress);\r\n\r\n        if (this.debug) console.info('<<<', msg);\r\n    }\r\n\r\n    send_buffer(data: Blob, onprogress?: (loaded: number, total: number) => void): void {\r\n        if (this.closed())\r\n            return error_alert(t(\"disconnected_with_server\"));\r\n\r\n        if (this.ws === null)\r\n            return console.error('WebSocketWebIOSession.ws is null when invoke WebSocketWebIOSession.send_message. ' +\r\n                'Please call WebSocketWebIOSession.start_session first');\r\n\r\n        this.ws.send(data);\r\n\r\n        if (onprogress)\r\n            this.start_onprogress(onprogress);\r\n\r\n        if (this.debug) console.info('<<< Blob data...');\r\n    }\r\n\r\n    close_session(): void {\r\n        this._closed = true;\r\n        safe_poprun_callbacks(this._session_close_callbacks, 'session_close_callback');\r\n        try {\r\n            this.ws.close();\r\n        } catch (e) {\r\n        }\r\n    }\r\n\r\n    closed(): boolean {\r\n        return this._closed || this.ws.readyState === WebSocket.CLOSED || this.ws.readyState === WebSocket.CLOSING;\r\n    }\r\n}\r\n\r\n\r\nexport class HttpSession implements Session {\r\n    interval_pull_id: number = null;\r\n    webio_session_id: string = '';\r\n    debug = false;\r\n\r\n    private sender: ReliableSender = null;\r\n    private _executed_command_msg_id = -1;\r\n    private _closed = false;\r\n    private _session_create_callbacks: (() => void)[] = [];\r\n    private _session_close_callbacks: (() => void)[] = [];\r\n    private _on_server_message: (msg: Command) => void = () => {\r\n    };\r\n\r\n\r\n    constructor(public api_url: string, app_name = 'index', public pull_interval_ms = 1000) {\r\n        let url = new URL(api_url, window.location.href);\r\n        url.search = \"?app=\" + app_name;\r\n        this.api_url = url.href;\r\n        this.sender = new ReliableSender(this._send.bind(this));\r\n    }\r\n\r\n    on_session_create(callback: () => void): void {\r\n        this._session_create_callbacks.push(callback);\r\n    }\r\n\r\n    on_session_close(callback: () => void): void {\r\n        this._session_close_callbacks.push(callback);\r\n    }\r\n\r\n    on_server_message(callback: (msg: Command) => void): void {\r\n        this._on_server_message = callback;\r\n    }\r\n\r\n    start_session(debug: boolean = false): void {\r\n        this.debug = debug;\r\n        this.webio_session_id = \"NEW-\" + randomid(24);\r\n        this.pull();\r\n        this.interval_pull_id = setInterval(() => {\r\n            this.pull()\r\n        }, this.pull_interval_ms);\r\n    }\r\n\r\n    pull() {\r\n        let that = this;\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: `${this.api_url}&ack=${this._executed_command_msg_id}`,\r\n            contentType: \"application/json; charset=utf-8\",\r\n            dataType: \"json\",\r\n            headers: {\"webio-session-id\": this.webio_session_id},\r\n            success: function (data: { commands: Command[][], seq: number, event: number, ack: number },\r\n                               textStatus: string, jqXHR: JQuery.jqXHR) {\r\n                safe_poprun_callbacks(that._session_create_callbacks, 'session_create_callback');\r\n                that._on_request_success(data, textStatus, jqXHR);\r\n                if (that.webio_session_id.startsWith(\"NEW-\")) {\r\n                    that.webio_session_id = that.webio_session_id.substring(4);\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    private _on_request_success(data: { commands: Command[][], seq: number, ack: number },\r\n                                textStatus: string, jqXHR: JQuery.jqXHR) {\r\n        this.sender.ack(data.ack);\r\n\r\n        let msg_start_idx = this._executed_command_msg_id - data.seq + 1;\r\n        if (data.commands.length <= msg_start_idx)\r\n            return;\r\n        this._executed_command_msg_id = data.seq + data.commands.length - 1;\r\n\r\n        let sid = jqXHR.getResponseHeader('webio-session-id');\r\n        if (sid)\r\n            this.webio_session_id = sid;\r\n\r\n        for (let msgs of data.commands.slice(msg_start_idx)) {\r\n            for (let msg of msgs) {\r\n                if (this.debug) console.info('>>>', msg);\r\n                this._on_server_message(msg);\r\n            }\r\n        }\r\n    };\r\n\r\n    send_message(msg: ClientEvent, onprogress?: (loaded: number, total: number) => void): void {\r\n        if (this.debug) console.info('<<<', msg);\r\n        this.sender.add_send_task({\r\n            data: msg,\r\n            json: true,\r\n            onprogress: onprogress,\r\n        })\r\n    }\r\n\r\n    send_buffer(data: Blob, onprogress?: (loaded: number, total: number) => void): void {\r\n        if (this.debug) console.info('<<< Blob data...');\r\n        this.sender.add_send_task({\r\n            data: data,\r\n            json: false,\r\n            onprogress: onprogress,\r\n        }, false)\r\n    }\r\n\r\n    _send(params: { [key: string]: any; }[], seq: number): Promise<void> {\r\n        if (this.closed()) {\r\n            this.sender.stop();\r\n            error_alert(t(\"disconnected_with_server\"));\r\n            return Promise.reject();\r\n        }\r\n        let data: any, ajax_options: any;\r\n        let json = params.some(p => p.json);\r\n        if (json) {\r\n            data = JSON.stringify(params.map(p => p.data));\r\n            ajax_options = {\r\n                contentType: \"application/json; charset=utf-8\",\r\n            }\r\n        } else {\r\n            data = params[0].data;\r\n            ajax_options = {\r\n                cache: false,\r\n                processData: false,\r\n                contentType: 'application/octet-stream',\r\n            }\r\n        }\r\n        return new Promise((resolve, reject) => {\r\n            $.ajax({\r\n                data: data,\r\n                ...ajax_options,\r\n                type: \"POST\",\r\n                url: `${this.api_url}&ack=${this._executed_command_msg_id}&seq=${seq}`,\r\n                dataType: \"json\",\r\n                headers: {\"webio-session-id\": this.webio_session_id},\r\n                success: this._on_request_success.bind(this),\r\n                xhr: function () {\r\n                    let xhr = new window.XMLHttpRequest();\r\n                    // Upload progress\r\n                    xhr.upload.addEventListener(\"progress\", function (evt) {\r\n                        if (evt.lengthComputable) {\r\n                            params.forEach(p => {\r\n                                if (p.onprogress) // only the first one\r\n                                    p.onprogress(evt.loaded, evt.total);\r\n                                p.onprogress = null;\r\n                            });\r\n                        }\r\n                    }, false);\r\n                    return xhr;\r\n                },\r\n                error: function () {\r\n                    console.error('Http push event failed, will retry');\r\n                }\r\n            }).always(() => resolve());\r\n        });\r\n    }\r\n\r\n    close_session(): void {\r\n        this._closed = true;\r\n        safe_poprun_callbacks(this._session_close_callbacks, 'session_close_callback');\r\n        clearInterval(this.interval_pull_id);\r\n        this.sender.stop();\r\n    }\r\n\r\n    closed(): boolean {\r\n        return this._closed;\r\n    }\r\n\r\n    change_pull_interval(new_interval: number): void {\r\n        clearInterval(this.interval_pull_id);\r\n        this.pull_interval_ms = new_interval;\r\n        this.interval_pull_id = setInterval(() => {\r\n            this.pull()\r\n        }, this.pull_interval_ms);\r\n    }\r\n}\r\n\r\n/*\r\n* Check given `backend_addr` is a http backend\r\n* Usage:\r\n*   // `http_backend` is a boolean to present whether or not a http_backend the given `backend_addr` is\r\n*   is_http_backend('http://localhost:8080/io').then(function(http_backend){ });\r\n* */\r\nexport function is_http_backend(backend_addr: string) {\r\n    let url = new URL(backend_addr);\r\n    let protocol = url.protocol || window.location.protocol;\r\n    url.protocol = protocol.replace('wss', 'https').replace('ws', 'http');\r\n    backend_addr = url.href;\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        $.get(backend_addr, {test: 1}, undefined, 'html').done(function (data: string) {\r\n            resolve(data === 'ok');\r\n        }).fail(function (e: JQuery.jqXHR) {\r\n            resolve(false);\r\n        });\r\n    });\r\n}\r\n\r\n\r\n// Send data to backend\r\nexport function pushData(data: any, callback_id: string) {\r\n    if (state.CurrentSession === null)\r\n        return console.error(\"can't invoke PushData when WebIOController is not instantiated\");\r\n\r\n    state.CurrentSession.send_message({\r\n        event: \"callback\",\r\n        task_id: callback_id,\r\n        data: data\r\n    });\r\n}","import {Session} from \"./session\";\r\n\r\n// Runtime state\r\nexport let state = {\r\n    AutoScrollBottom: false,  // 是否有新内容时自动滚动到底部\r\n    CurrentSession: null as Session,  // 当前正在活跃的会话\r\n    ShowDuration: 200,  // ms, 显示表单的过渡动画时长\r\n    InputPanelMinHeight: 300,  // 输入panel的最小高度\r\n    InputPanelInitHeight: 300,  // 输入panel的初始高度\r\n    FixedInputPanel: true,\r\n    AutoFocusOnInput: true,\r\n};\r\n\r\n// App config\r\nexport let config = {\r\n    codeMirrorModeURL: \"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/%N/%N.min.js\",\r\n    codeMirrorThemeURL: \"https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/theme/%N.min.css\",\r\n    outputAnimation: true, // 启用内容输出动画\r\n    httpPullInterval: 1000,  // HttpSession 拉取消息的周期（ms）\r\n    debug: false,  // 调试模式， 打印所有交互的消息\r\n};\r\n","import {state} from \"./state\";\r\n\r\nlet has_input = false;\r\nlet input_panel = $('#input-container');\r\nlet input_cards = $('#input-cards');\r\nlet end_space = $('#end-space');\r\n\r\nexport function show_input() {\r\n    close_input();\r\n    has_input = true;\r\n    if (($(window).height() - input_panel[0].getBoundingClientRect().top < input_min_fixed_height() - 40)) {\r\n        toggle_input_panel_style(true);\r\n    }\r\n}\r\n\r\nexport function close_input() {\r\n    has_input = false;\r\n    if (input_panel.hasClass('fixed')) {\r\n        input_panel.removeClass('fixed');\r\n    }\r\n    input_panel.height('unset');\r\n    end_space.height(0);\r\n}\r\n\r\n\r\nfunction input_min_fixed_height() { // 返回当前的输入panel的最小高度\r\n    const min_fixed_height = Math.max(state.InputPanelMinHeight, 75);\r\n\r\n    //80 = #input-container.fixed padding-top + padding-bottom\r\n    let now_height = input_cards.height() + 80;\r\n\r\n    return Math.min(now_height, min_fixed_height);\r\n}\r\n\r\n\r\nfunction fixed_input_init_height() { // 返回当前的输入panel的初始高度\r\n    const init_fixed_height = Math.max(state.InputPanelInitHeight, 175);\r\n\r\n    //80 = #input-container.fixed padding-top + padding-bottom\r\n    let now_height = input_cards.height() + 80;\r\n\r\n    return Math.min(now_height, init_fixed_height);\r\n}\r\n\r\n\r\nfunction toggle_input_panel_style(fixed: boolean) {\r\n    fixed = state.FixedInputPanel && fixed;\r\n    if (!fixed) {\r\n        input_panel.removeClass('fixed');\r\n        end_space.height(0);\r\n        input_panel.height('unset');\r\n    } else {\r\n        let min = fixed_input_init_height();\r\n        end_space.height(min - 40);  // 40 =  #input-container.fixed padding-top\r\n        input_panel.height(min);\r\n        // input_panel显示动画\r\n        // input_panel.height(0);\r\n        // input_panel.stop().animate({height: min}, {duration: 50, easing: 'swing'});\r\n        input_panel.addClass('fixed');\r\n    }\r\n}\r\n\r\n\r\nfunction move_input_panel(step: number) {\r\n    let new_height = input_panel.height() + step;\r\n    if (new_height >= input_cards.height())\r\n        new_height = input_cards.height();\r\n    else if (new_height <= input_min_fixed_height() - 80)   //80 = #input-container.fixed padding-top + padding-bottom\r\n        new_height = input_min_fixed_height() - 80;\r\n\r\n    input_panel.height(new_height);\r\n    end_space.height(new_height - 40); // 40 =  #input-container.fixed padding-top\r\n}\r\n\r\n\r\n$(function () {\r\n    input_panel = $('#input-container');\r\n    input_cards = $('#input-cards');\r\n    end_space = $('#end-space');\r\n\r\n\r\n    let lastScrollTop = 0; // to Detecting scroll direction.  Credits: https://stackoverflow.com/questions/31223341/detecting-scroll-direction\r\n    $(window).on('scroll', function () {\r\n        let st = window.pageYOffset || document.documentElement.scrollTop; // Credits: \"https://github.com/qeremy/so/blob/master/so.dom.js#L426\"\r\n        let downmove = st < lastScrollTop;\r\n        let upmove = st > lastScrollTop;\r\n\r\n        if (!input_panel.hasClass('fixed')) {\r\n            // 40 =  #input-container.fixed padding-top\r\n            if (($(window).height() - input_panel[0].getBoundingClientRect().top < input_min_fixed_height() - 40) && downmove && has_input) {\r\n                toggle_input_panel_style(true);\r\n                st = window.pageYOffset || document.documentElement.scrollTop;\r\n            }\r\n        } else {\r\n            // 到达底部\r\n            // 50 = footer height\r\n            // because of the hide-able address panel in mobile browser,\r\n            // `$(window).height() <= window.innerHeight` in mobile phone\r\n            if ($(window).scrollTop() + window.innerHeight > $(document).height() - 50 && upmove) {\r\n                toggle_input_panel_style(false);\r\n                st = window.pageYOffset || document.documentElement.scrollTop;\r\n            }\r\n        }\r\n        lastScrollTop = st <= 0 ? 0 : st; // For Mobile or negative scrolling\r\n    });\r\n\r\n    input_panel[0].addEventListener(\"wheel\", function (e) {\r\n        // Credits: https://stackoverflow.com/questions/30892830/detect-scrolling-on-pages-without-a-scroll-bar\r\n\r\n        if (!input_panel.hasClass('fixed')) return;\r\n        e.preventDefault();\r\n\r\n        // to make it work on IE or Chrome\r\n        // @ts-ignore\r\n        let variation = parseInt(e.deltaY);\r\n        move_input_panel(variation);\r\n    });\r\n\r\n    let last_y = -1;\r\n    input_panel[0].addEventListener(\"touchstart\", function (evt) {\r\n        if (evt.changedTouches.length > 1)\r\n            return;\r\n        last_y = evt.changedTouches[0].screenY;\r\n    });\r\n\r\n\r\n    input_panel[0].addEventListener(\"touchmove\", function (evt) {\r\n        if (!input_panel.hasClass('fixed')) return;\r\n        if (evt.changedTouches.length > 1)\r\n            return;\r\n        evt.preventDefault();\r\n        let variation = last_y - evt.changedTouches[0].screenY;\r\n        last_y = evt.changedTouches[0].screenY;\r\n        move_input_panel(variation);\r\n    });\r\n});\r\n","// Indexable Types\r\n\r\ninterface Dict {\r\n    [index: string]: any;\r\n}\r\n\r\nexport class LRUMap {\r\n    keys: string[] = [];\r\n    map: Dict = {};\r\n\r\n    push(key: string, value: any) {\r\n        if (key in this.map)\r\n            return console.error(\"LRUMap: key:%s already in map\", key);\r\n        this.keys.push(key);\r\n        this.map[key] = value;\r\n    };\r\n\r\n    get_value(key: string) {\r\n        return this.map[key];\r\n    };\r\n\r\n    get_top() {\r\n        let top_key = this.keys[this.keys.length - 1];\r\n        return this.map[top_key];\r\n    };\r\n\r\n    set_value(key: string, value: any) {\r\n        if (!(key in this.map))\r\n            return console.error(\"LRUMap: key:%s not in map when call `set_value`\", key);\r\n        this.map[key] = value;\r\n    };\r\n\r\n    move_to_top(key: string) {\r\n        const index = this.keys.indexOf(key);\r\n        if (index > -1) {\r\n            this.keys.splice(index, 1);\r\n            this.keys.push(key);\r\n        } else {\r\n            return console.error(\"LRUMap: key:%s not in map when call `move_to_top`\", key);\r\n        }\r\n    };\r\n\r\n    remove(key: string) {\r\n        if (key in this.map) {\r\n            delete this.map[key];\r\n            this.keys.splice(this.keys.indexOf(key), 1);\r\n        } else {\r\n            return console.error(\"LRUMap: key:%s not in map when call `remove`\", key);\r\n        }\r\n    };\r\n\r\n}\r\n\r\n\r\nexport function b64toBlob(b64Data: string, contentType = 'application/octet-stream', sliceSize = 512) {\r\n    const byteCharacters = atob(b64Data);\r\n    const byteArrays = [];\r\n\r\n    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\r\n\r\n        const byteNumbers = new Array(slice.length);\r\n        for (let i = 0; i < slice.length; i++) {\r\n            byteNumbers[i] = slice.charCodeAt(i);\r\n        }\r\n\r\n        const byteArray = new Uint8Array(byteNumbers);\r\n        byteArrays.push(byteArray);\r\n    }\r\n\r\n    const blob = new Blob(byteArrays, {type: contentType});\r\n    return blob;\r\n}\r\n\r\nexport function make_set(arr: string[]) {\r\n    let set: { [i: string]: string } = {};\r\n    for (let val of arr)\r\n        set[val] = '';\r\n    return set;\r\n}\r\n\r\nexport function deep_copy(obj: any): any {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\n\r\n// container 为带有滚动条的元素\r\nexport function body_scroll_to(target: JQuery, position = 'top', complete?: (this: HTMLElement) => void, offset = 0) {\r\n    let scrollTop = null;\r\n    if (position === 'top')\r\n        scrollTop = target.offset().top;\r\n    else if (position === 'middle')\r\n        scrollTop = target.offset().top + 0.5 * target[0].clientHeight - 0.5 * $(window).height();\r\n    else if (position === 'bottom')\r\n        scrollTop = target[0].clientHeight + target.offset().top - $(window).height();\r\n\r\n    let container = $('body,html');\r\n    let speed = Math.abs(container.scrollTop() - scrollTop - offset);\r\n    if (scrollTop !== null)\r\n        container.stop().animate({scrollTop: scrollTop + offset}, Math.min(speed, 500) + 100, complete);\r\n}\r\n\r\n// container 为带有滚动条的元素\r\nexport function box_scroll_to(target: JQuery, container: JQuery, position = 'top', complete?: (this: HTMLElement) => void, offset = 0) {\r\n    let scrollTopOffset = null;\r\n    if (position === 'top')\r\n        scrollTopOffset = target[0].getBoundingClientRect().top - container[0].getBoundingClientRect().top;\r\n    else if (position === 'middle')\r\n        scrollTopOffset = target[0].getBoundingClientRect().top - container[0].getBoundingClientRect().top - container.height() * 0.5 + target.height() * 0.5;\r\n    else if (position === 'bottom')\r\n        scrollTopOffset = target[0].getBoundingClientRect().bottom - container[0].getBoundingClientRect().bottom;\r\n\r\n    let speed = Math.min(Math.abs(scrollTopOffset + offset), 500) + 100;\r\n    if (scrollTopOffset !== null)\r\n        container.stop().animate({scrollTop: container.scrollTop() + scrollTopOffset + offset}, speed, complete);\r\n}\r\n\r\n\r\nexport function randomid(length: number) {\r\n    let result = '';\r\n    let characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    let charactersLength = characters.length;\r\n    for (let i = 0; i < length; i++) {\r\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n    return result;\r\n}\r\n\r\n// 跳转PyWebIO Application\r\n// name: app名称\r\n// new_window: 是否在新窗口打开\r\nexport function openApp(name: string, new_window: boolean) {\r\n    let url = new URL(window.location.href);\r\n    url.searchParams.set(\"app\", name);\r\n    if (new_window)\r\n        window.open(url.href);\r\n    else\r\n        window.location.href = url.href;\r\n}\r\n\r\n\r\nexport function error_alert(text: string, duration: number = 1.5) {\r\n    Toastify({\r\n        text: Mustache.escape(text),\r\n        duration: duration * 1000,\r\n        gravity: \"top\",\r\n        position: 'center',\r\n        backgroundColor: '#e53935',\r\n    }).showToast();\r\n}\r\n\r\n\r\n// make File object to Blob\r\nexport function serialize_file(file: File, input_name: string) {\r\n    let header = {\r\n        'filename': file.name,\r\n        'size': file.size,\r\n        'mime_type': file.type,\r\n        'last_modified': file.lastModified / 1000,\r\n        'input_name': input_name\r\n    }\r\n    return new Blob([serialize_json(header), int2bytes(file.size), file], {type: 'application/octet-stream'});\r\n}\r\n\r\n// make json object to Blob\r\nexport function serialize_json(json_obj: any) {\r\n    let json_str = JSON.stringify(json_obj);\r\n    const encoder = new TextEncoder();\r\n    const json_buf = encoder.encode(json_str).buffer;\r\n    return new Blob([int2bytes(json_buf.byteLength), json_buf], {type: 'application/octet-stream'});\r\n}\r\n\r\nfunction int2bytes(num: number) {\r\n    const buf = new ArrayBuffer(8);\r\n    const dataView = new DataView(buf);\r\n    dataView.setUint32(0, (num / 4294967296) | 0); // 4294967296 == 2^32\r\n    dataView.setUint32(4, num | 0);\r\n    return buf;\r\n}\r\n\r\nexport function is_mobile() {\r\n    // @ts-ignore\r\n    if (navigator.userAgentData) return navigator.userAgentData.mobile;\r\n    const ipadOS = (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1); /* iPad OS 13 */\r\n    return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()) || ipadOS;\r\n}\r\n\r\n// put send task to a queue and run it one by one\r\nexport class ReliableSender {\r\n    private seq = 0;\r\n    private queue: { enable_batch: boolean, task: any }[] = [];\r\n    private _stop = false;\r\n    private ignore_interval_send = false;\r\n    private last_send_time = 0;\r\n    private interval_send_id = 0;\r\n\r\n    constructor(\r\n        private readonly sender: (tasks: any[], seq: number) => Promise<void>,\r\n        private window_size: number = 8,\r\n        init_seq = 0,\r\n        send_interval = 2000,\r\n        private min_send_interval = 1000,\r\n    ) {\r\n        this.sender = sender;\r\n        this.window_size = window_size;\r\n        this.seq = init_seq;\r\n        this.queue = [];\r\n        this.ignore_interval_send = false;\r\n        this.interval_send_id = setInterval(this.interval_send.bind(this), send_interval);\r\n    }\r\n\r\n    /*\r\n    * for continuous batch_send tasks in queue, they will be sent in one sender,\r\n    * for non-batch task, each will be sent in a single sender,\r\n    * the sending will retry when there are unfinished task in queue.\r\n    * */\r\n    add_send_task(task: any, allow_batch_send = true) {\r\n        if (this._stop) return;\r\n        this.queue.push({\r\n            enable_batch: allow_batch_send,\r\n            task: task\r\n        });\r\n        this.do_send();\r\n    }\r\n\r\n    private get_tasks() {\r\n        let tasks: any[] = [];\r\n        for (let item of this.queue) {\r\n            if (!item.enable_batch)\r\n                break;\r\n            tasks.push(item.task);\r\n        }\r\n        let batch_send = true;\r\n        if (tasks.length === 0 && this.queue.length > 0 && !this.queue[0].enable_batch) {\r\n            batch_send = false;\r\n            tasks.push(this.queue[0].task);\r\n        }\r\n        return {tasks, batch_send};\r\n    }\r\n\r\n    private do_send() {\r\n        const info = this.get_tasks();\r\n        const tasks = info.tasks, batch_send = info.batch_send;\r\n        if (tasks.length === 0) {\r\n            return;\r\n        }\r\n        this.last_send_time = Date.now();\r\n        if (!batch_send)  // for non-batch task, only retry after current request finished\r\n            this.ignore_interval_send = true;\r\n        this.sender(tasks, this.seq).then(() => {\r\n            this.ignore_interval_send = false;\r\n        });\r\n    }\r\n\r\n    private interval_send() {\r\n        if (this._stop || this.ignore_interval_send) return;\r\n        if (Date.now() - this.last_send_time < this.min_send_interval) return;\r\n        this.do_send();\r\n    }\r\n\r\n    // seq for each ack call must be larger than the previous one, otherwise the ack will be ignored\r\n    ack(seq: number) {\r\n        if (seq < this.seq)\r\n            return;\r\n        let pop_count = seq - this.seq + 1;\r\n        this.queue = this.queue.slice(pop_count);\r\n        this.seq = seq + 1;\r\n    }\r\n\r\n    stop() {\r\n        this._stop = true;\r\n        clearInterval(this.interval_send_id);\r\n    }\r\n}"]}